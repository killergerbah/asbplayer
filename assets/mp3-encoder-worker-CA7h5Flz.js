(function(){"use strict";var T1={},p1,Ee;function G0(){if(Ee)return p1;Ee=1;function _(N){return new Int8Array(N)}function A(N){return new Int16Array(N)}function J(N){return new Int32Array(N)}function k(N){return new Float32Array(N)}function j(N){return new Float64Array(N)}function U(N){if(N.length==1)return k(N[0]);var b=N[0];N=N.slice(1);for(var V=[],t=0;t<b;t++)V.push(U(N));return V}function X(N){if(N.length==1)return J(N[0]);var b=N[0];N=N.slice(1);for(var V=[],t=0;t<b;t++)V.push(X(N));return V}function W(N){if(N.length==1)return A(N[0]);var b=N[0];N=N.slice(1);for(var V=[],t=0;t<b;t++)V.push(W(N));return V}function Y(N){if(N.length==1)return new Array(N[0]);var b=N[0];N=N.slice(1);for(var V=[],t=0;t<b;t++)V.push(Y(N));return V}var $={};$.fill=function(N,b,V,t){if(arguments.length==2)for(var L=0;L<N.length;L++)N[L]=arguments[1];else for(var L=b;L<V;L++)N[L]=t};var B={};B.arraycopy=function(N,b,V,t,L){for(var Z=b+L;b<Z;)V[t++]=N[b++]},B.out={},B.out.println=function(N){console.log(N)},B.out.printf=function(){console.log.apply(console,arguments)};var w={};w.SQRT2=1.4142135623730951,w.FAST_LOG10=function(N){return Math.log10(N)},w.FAST_LOG10_X=function(N,b){return Math.log10(N)*b};function v0(N){this.ordinal=N}v0.short_block_allowed=new v0(0),v0.short_block_coupled=new v0(1),v0.short_block_dispensed=new v0(2),v0.short_block_forced=new v0(3);var I={};I.MAX_VALUE=34028235e31;function g(N){this.ordinal=N}g.vbr_off=new g(0),g.vbr_mt=new g(1),g.vbr_rh=new g(2),g.vbr_abr=new g(3),g.vbr_mtrh=new g(4),g.vbr_default=g.vbr_mtrh;var f=function(N){};return p1={System:B,VbrMode:g,Float:I,ShortBlock:v0,Util:w,Arrays:$,new_array_n:Y,new_byte:_,new_double:j,new_float:k,new_float_n:U,new_int:J,new_int_n:X,new_short:A,new_short_n:W,assert:f},p1}var N1,Be;function da(){if(Be)return N1;Be=1;var _=G0(),A=_.System;_.VbrMode,_.Float,_.ShortBlock;var J=_.Util,k=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var j=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var U=$0();function X(){var W=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*J.SQRT2*.5/2384e-9,.017876148*J.SQRT2*.5/2384e-9,.003134727*J.SQRT2*.5/2384e-9,.002457142*J.SQRT2*.5/2384e-9,971317e-9*J.SQRT2*.5/2384e-9,218868e-9*J.SQRT2*.5/2384e-9,101566e-9*J.SQRT2*.5/2384e-9,13828e-9*J.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],Y=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],$=Y[U.SHORT_TYPE],B=Y[U.SHORT_TYPE],w=Y[U.SHORT_TYPE],v0=Y[U.SHORT_TYPE],I=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function g(b,V,t){for(var L=10,Z=V+238-14-286,H=-15;H<0;H++){var O,F,z;O=W[L+-10],F=b[Z+-224]*O,z=b[V+224]*O,O=W[L+-9],F+=b[Z+-160]*O,z+=b[V+160]*O,O=W[L+-8],F+=b[Z+-96]*O,z+=b[V+96]*O,O=W[L+-7],F+=b[Z+-32]*O,z+=b[V+32]*O,O=W[L+-6],F+=b[Z+32]*O,z+=b[V+-32]*O,O=W[L+-5],F+=b[Z+96]*O,z+=b[V+-96]*O,O=W[L+-4],F+=b[Z+160]*O,z+=b[V+-160]*O,O=W[L+-3],F+=b[Z+224]*O,z+=b[V+-224]*O,O=W[L+-2],F+=b[V+-256]*O,z-=b[Z+256]*O,O=W[L+-1],F+=b[V+-192]*O,z-=b[Z+192]*O,O=W[L+0],F+=b[V+-128]*O,z-=b[Z+128]*O,O=W[L+1],F+=b[V+-64]*O,z-=b[Z+64]*O,O=W[L+2],F+=b[V+0]*O,z-=b[Z+0]*O,O=W[L+3],F+=b[V+64]*O,z-=b[Z+-64]*O,O=W[L+4],F+=b[V+128]*O,z-=b[Z+-128]*O,O=W[L+5],F+=b[V+192]*O,z-=b[Z+-192]*O,F*=W[L+6],O=z-F,t[30+H*2]=z+F,t[31+H*2]=W[L+7]*O,L+=18,V--,Z++}{var F,z,u0,i0;z=b[V+-16]*W[L+-10],F=b[V+-32]*W[L+-2],z+=(b[V+-48]-b[V+16])*W[L+-9],F+=b[V+-96]*W[L+-1],z+=(b[V+-80]+b[V+48])*W[L+-8],F+=b[V+-160]*W[L+0],z+=(b[V+-112]-b[V+80])*W[L+-7],F+=b[V+-224]*W[L+1],z+=(b[V+-144]+b[V+112])*W[L+-6],F-=b[V+32]*W[L+2],z+=(b[V+-176]-b[V+144])*W[L+-5],F-=b[V+96]*W[L+3],z+=(b[V+-208]+b[V+176])*W[L+-4],F-=b[V+160]*W[L+4],z+=(b[V+-240]-b[V+208])*W[L+-3],F-=b[V+224],u0=F-z,i0=F+z,z=t[14],F=t[15]-z,t[31]=i0+z,t[30]=u0+F,t[15]=u0-F,t[14]=i0-z}{var o;o=t[28]-t[0],t[0]+=t[28],t[28]=o*W[L+-2*18+7],o=t[29]-t[1],t[1]+=t[29],t[29]=o*W[L+-2*18+7],o=t[26]-t[2],t[2]+=t[26],t[26]=o*W[L+-4*18+7],o=t[27]-t[3],t[3]+=t[27],t[27]=o*W[L+-4*18+7],o=t[24]-t[4],t[4]+=t[24],t[24]=o*W[L+-6*18+7],o=t[25]-t[5],t[5]+=t[25],t[25]=o*W[L+-6*18+7],o=t[22]-t[6],t[6]+=t[22],t[22]=o*J.SQRT2,o=t[23]-t[7],t[7]+=t[23],t[23]=o*J.SQRT2-t[7],t[7]-=t[6],t[22]-=t[7],t[23]-=t[22],o=t[6],t[6]=t[31]-o,t[31]=t[31]+o,o=t[7],t[7]=t[30]-o,t[30]=t[30]+o,o=t[22],t[22]=t[15]-o,t[15]=t[15]+o,o=t[23],t[23]=t[14]-o,t[14]=t[14]+o,o=t[20]-t[8],t[8]+=t[20],t[20]=o*W[L+-10*18+7],o=t[21]-t[9],t[9]+=t[21],t[21]=o*W[L+-10*18+7],o=t[18]-t[10],t[10]+=t[18],t[18]=o*W[L+-12*18+7],o=t[19]-t[11],t[11]+=t[19],t[19]=o*W[L+-12*18+7],o=t[16]-t[12],t[12]+=t[16],t[16]=o*W[L+-14*18+7],o=t[17]-t[13],t[13]+=t[17],t[17]=o*W[L+-14*18+7],o=-t[20]+t[24],t[20]+=t[24],t[24]=o*W[L+-12*18+7],o=-t[21]+t[25],t[21]+=t[25],t[25]=o*W[L+-12*18+7],o=t[4]-t[8],t[4]+=t[8],t[8]=o*W[L+-12*18+7],o=t[5]-t[9],t[5]+=t[9],t[9]=o*W[L+-12*18+7],o=t[0]-t[12],t[0]+=t[12],t[12]=o*W[L+-4*18+7],o=t[1]-t[13],t[1]+=t[13],t[13]=o*W[L+-4*18+7],o=t[16]-t[28],t[16]+=t[28],t[28]=o*W[L+-4*18+7],o=-t[17]+t[29],t[17]+=t[29],t[29]=o*W[L+-4*18+7],o=J.SQRT2*(t[2]-t[10]),t[2]+=t[10],t[10]=o,o=J.SQRT2*(t[3]-t[11]),t[3]+=t[11],t[11]=o,o=J.SQRT2*(-t[18]+t[26]),t[18]+=t[26],t[26]=o-t[18],o=J.SQRT2*(-t[19]+t[27]),t[19]+=t[27],t[27]=o-t[19],o=t[2],t[19]-=t[3],t[3]-=o,t[2]=t[31]-o,t[31]+=o,o=t[3],t[11]-=t[19],t[18]-=o,t[3]=t[30]-o,t[30]+=o,o=t[18],t[27]-=t[11],t[19]-=o,t[18]=t[15]-o,t[15]+=o,o=t[19],t[10]-=o,t[19]=t[14]-o,t[14]+=o,o=t[10],t[11]-=o,t[10]=t[23]-o,t[23]+=o,o=t[11],t[26]-=o,t[11]=t[22]-o,t[22]+=o,o=t[26],t[27]-=o,t[26]=t[7]-o,t[7]+=o,o=t[27],t[27]=t[6]-o,t[6]+=o,o=J.SQRT2*(t[0]-t[4]),t[0]+=t[4],t[4]=o,o=J.SQRT2*(t[1]-t[5]),t[1]+=t[5],t[5]=o,o=J.SQRT2*(t[16]-t[20]),t[16]+=t[20],t[20]=o,o=J.SQRT2*(t[17]-t[21]),t[17]+=t[21],t[21]=o,o=-J.SQRT2*(t[8]-t[12]),t[8]+=t[12],t[12]=o-t[8],o=-J.SQRT2*(t[9]-t[13]),t[9]+=t[13],t[13]=o-t[9],o=-J.SQRT2*(t[25]-t[29]),t[25]+=t[29],t[29]=o-t[25],o=-J.SQRT2*(t[24]+t[28]),t[24]-=t[28],t[28]=o-t[24],o=t[24]-t[16],t[24]=o,o=t[20]-o,t[20]=o,o=t[28]-o,t[28]=o,o=t[25]-t[17],t[25]=o,o=t[21]-o,t[21]=o,o=t[29]-o,t[29]=o,o=t[17]-t[1],t[17]=o,o=t[9]-o,t[9]=o,o=t[25]-o,t[25]=o,o=t[5]-o,t[5]=o,o=t[21]-o,t[21]=o,o=t[13]-o,t[13]=o,o=t[29]-o,t[29]=o,o=t[1]-t[0],t[1]=o,o=t[16]-o,t[16]=o,o=t[17]-o,t[17]=o,o=t[8]-o,t[8]=o,o=t[9]-o,t[9]=o,o=t[24]-o,t[24]=o,o=t[25]-o,t[25]=o,o=t[4]-o,t[4]=o,o=t[5]-o,t[5]=o,o=t[20]-o,t[20]=o,o=t[21]-o,t[21]=o,o=t[12]-o,t[12]=o,o=t[13]-o,t[13]=o,o=t[28]-o,t[28]=o,o=t[29]-o,t[29]=o,o=t[0],t[0]+=t[31],t[31]-=o,o=t[1],t[1]+=t[30],t[30]-=o,o=t[16],t[16]+=t[15],t[15]-=o,o=t[17],t[17]+=t[14],t[14]-=o,o=t[8],t[8]+=t[23],t[23]-=o,o=t[9],t[9]+=t[22],t[22]-=o,o=t[24],t[24]+=t[7],t[7]-=o,o=t[25],t[25]+=t[6],t[6]-=o,o=t[4],t[4]+=t[27],t[27]-=o,o=t[5],t[5]+=t[26],t[26]-=o,o=t[20],t[20]+=t[11],t[11]-=o,o=t[21],t[21]+=t[10],t[10]-=o,o=t[12],t[12]+=t[19],t[19]-=o,o=t[13],t[13]+=t[18],t[18]-=o,o=t[28],t[28]+=t[3],t[3]-=o,o=t[29],t[29]+=t[2],t[2]-=o}}function f(b,V){for(var t=0;t<3;t++){var L,Z,H,O,F,z;O=b[V+2*3]*Y[U.SHORT_TYPE][0]-b[V+5*3],L=b[V+0*3]*Y[U.SHORT_TYPE][2]-b[V+3*3],Z=O+L,H=O-L,O=b[V+5*3]*Y[U.SHORT_TYPE][0]+b[V+2*3],L=b[V+3*3]*Y[U.SHORT_TYPE][2]+b[V+0*3],F=O+L,z=-O+L,L=(b[V+1*3]*Y[U.SHORT_TYPE][1]-b[V+4*3])*2069978111953089e-26,O=(b[V+4*3]*Y[U.SHORT_TYPE][1]+b[V+1*3])*2069978111953089e-26,b[V+3*0]=Z*190752519173728e-25+L,b[V+3*5]=-F*190752519173728e-25+O,H=H*.8660254037844387*1907525191737281e-26,F=F*.5*1907525191737281e-26+O,b[V+3*1]=H-F,b[V+3*2]=H+F,Z=Z*.5*1907525191737281e-26-L,z=z*.8660254037844387*1907525191737281e-26,b[V+3*3]=Z+z,b[V+3*4]=Z-z,V++}}function N(b,V,t){var L,Z;{var H,O,F,z,u0,i0,o,w0;H=t[17]-t[9],F=t[15]-t[11],z=t[14]-t[12],u0=t[0]+t[8],i0=t[1]+t[7],o=t[2]+t[6],w0=t[3]+t[5],b[V+17]=u0+o-w0-(i0-t[4]),Z=(u0+o-w0)*B[19]+(i0-t[4]),L=(H-F-z)*B[18],b[V+5]=L+Z,b[V+6]=L-Z,O=(t[16]-t[10])*B[18],i0=i0*B[19]+t[4],L=H*B[12]+O+F*B[13]+z*B[14],Z=-u0*B[16]+i0-o*B[17]+w0*B[15],b[V+1]=L+Z,b[V+2]=L-Z,L=H*B[13]-O-F*B[14]+z*B[12],Z=-u0*B[17]+i0-o*B[15]+w0*B[16],b[V+9]=L+Z,b[V+10]=L-Z,L=H*B[14]-O+F*B[12]-z*B[13],Z=u0*B[15]-i0+o*B[16]-w0*B[17],b[V+13]=L+Z,b[V+14]=L-Z}{var o0,S,l,c,R,q,u,n;o0=t[8]-t[0],l=t[6]-t[2],c=t[5]-t[3],R=t[17]+t[9],q=t[16]+t[10],u=t[15]+t[11],n=t[14]+t[12],b[V+0]=R+u+n+(q+t[13]),L=(R+u+n)*B[19]-(q+t[13]),Z=(o0-l+c)*B[18],b[V+11]=L+Z,b[V+12]=L-Z,S=(t[7]-t[1])*B[18],q=t[13]-q*B[19],L=R*B[15]-q+u*B[16]+n*B[17],Z=o0*B[14]+S+l*B[12]+c*B[13],b[V+3]=L+Z,b[V+4]=L-Z,L=-R*B[17]+q-u*B[15]-n*B[16],Z=o0*B[13]+S-l*B[14]-c*B[12],b[V+7]=L+Z,b[V+8]=L-Z,L=-R*B[16]+q-u*B[17]-n*B[15],Z=o0*B[12]-S+l*B[13]-c*B[14],b[V+15]=L+Z,b[V+16]=L-Z}}this.mdct_sub48=function(b,V,t){for(var L=V,Z=286,H=0;H<b.channels_out;H++){for(var O=0;O<b.mode_gr;O++){for(var F,z=b.l3_side.tt[O][H],u0=z.xr,i0=0,o=b.sb_sample[H][1-O],w0=0,o0=0;o0<18/2;o0++)for(g(L,Z,o[w0]),g(L,Z+32,o[w0+1]),w0+=2,Z+=64,F=1;F<32;F+=2)o[w0-1][F]*=-1;for(F=0;F<32;F++,i0+=18){var S=z.block_type,l=b.sb_sample[H][O],c=b.sb_sample[H][1-O];if(z.mixed_block_flag!=0&&F<2&&(S=0),b.amp_filter[F]<1e-12)k.fill(u0,i0+0,i0+18,0);else{if(b.amp_filter[F]<1)for(var o0=0;o0<18;o0++)c[o0][I[F]]*=b.amp_filter[F];if(S==U.SHORT_TYPE){for(var o0=-12/4;o0<0;o0++){var R=Y[U.SHORT_TYPE][o0+3];u0[i0+o0*3+9]=l[9+o0][I[F]]*R-l[8-o0][I[F]],u0[i0+o0*3+18]=l[14-o0][I[F]]*R+l[15+o0][I[F]],u0[i0+o0*3+10]=l[15+o0][I[F]]*R-l[14-o0][I[F]],u0[i0+o0*3+19]=c[2-o0][I[F]]*R+c[3+o0][I[F]],u0[i0+o0*3+11]=c[3+o0][I[F]]*R-c[2-o0][I[F]],u0[i0+o0*3+20]=c[8-o0][I[F]]*R+c[9+o0][I[F]]}f(u0,i0)}else{for(var q=j(18),o0=-36/4;o0<0;o0++){var u,n;u=Y[S][o0+27]*c[o0+9][I[F]]+Y[S][o0+36]*c[8-o0][I[F]],n=Y[S][o0+9]*l[o0+9][I[F]]-Y[S][o0+18]*l[8-o0][I[F]],q[o0+9]=u-n*$[3+o0+9],q[o0+18]=u*$[3+o0+9]+n}N(u0,i0,q)}}if(S!=U.SHORT_TYPE&&F!=0)for(var o0=7;o0>=0;--o0){var e,r;e=u0[i0+o0]*w[20+o0]+u0[i0+-1-o0]*v0[28+o0],r=u0[i0+o0]*v0[28+o0]-u0[i0+-1-o0]*w[20+o0],u0[i0+-1-o0]=e,u0[i0+o0]=r}}}if(L=t,Z=286,b.mode_gr==1)for(var a=0;a<18;a++)A.arraycopy(b.sb_sample[H][1][a],0,b.sb_sample[H][0][a],0,32)}}}return N1=X,N1}var H1,we;function Te(){if(we)return H1;we=1;var _=$0(),A=G0(),J=A.System;A.VbrMode,A.Float,A.ShortBlock,A.Util,A.Arrays,A.new_array_n,A.new_byte,A.new_double;var k=A.new_float,j=A.new_float_n;A.new_int,A.new_int_n,A.assert;function U(){this.l=k(_.SBMAX_l),this.s=j([_.SBMAX_s,3]);var X=this;this.assign=function(W){J.arraycopy(W.l,0,X.l,0,_.SBMAX_l);for(var Y=0;Y<_.SBMAX_s;Y++)for(var $=0;$<3;$++)X.s[Y][$]=W.s[Y][$]}}return H1=U,H1}var C1,ye;function Sa(){if(ye)return C1;ye=1;var _=Te();function A(){this.thm=new _,this.en=new _}return C1=A,C1}var O1,Ie;function S1(){if(Ie)return O1;Ie=1;function _(A){var J=A;this.ordinal=function(){return J}}return _.STEREO=new _(0),_.JOINT_STEREO=new _(1),_.DUAL_CHANNEL=new _(2),_.MONO=new _(3),_.NOT_SET=new _(4),O1=_,O1}var F1,Le;function $0(){if(Le)return F1;Le=1;var _=G0(),A=_.System,J=_.VbrMode;_.Float,_.ShortBlock,_.Util,_.Arrays;var k=_.new_array_n;_.new_byte,_.new_double;var j=_.new_float,U=_.new_float_n,X=_.new_int;_.new_int_n;var W=_.assert;Y.ENCDELAY=576,Y.POSTDELAY=1152,Y.MDCTDELAY=48,Y.FFTOFFSET=224+Y.MDCTDELAY,Y.DECDELAY=528,Y.SBLIMIT=32,Y.CBANDS=64,Y.SBPSY_l=21,Y.SBPSY_s=12,Y.SBMAX_l=22,Y.SBMAX_s=13,Y.PSFB21=6,Y.PSFB12=6,Y.BLKSIZE=1024,Y.HBLKSIZE=Y.BLKSIZE/2+1,Y.BLKSIZE_s=256,Y.HBLKSIZE_s=Y.BLKSIZE_s/2+1,Y.NORM_TYPE=0,Y.START_TYPE=1,Y.SHORT_TYPE=2,Y.STOP_TYPE=3,Y.MPG_MD_LR_LR=0,Y.MPG_MD_LR_I=1,Y.MPG_MD_MS_LR=2,Y.MPG_MD_MS_I=3,Y.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function Y(){var $=da(),B=Sa(),w=S1(),v0=Y.FFTOFFSET,I=Y.MPG_MD_MS_LR,g=null;this.psy=null;var f=null,N=null,b=null;this.setModules=function(H,O,F,z){g=H,this.psy=O,f=O,N=z,b=F};var V=new $;function t(H){var O,F;if(H.ATH.useAdjust==0){H.ATH.adjust=1;return}if(F=H.loudness_sq[0][0],O=H.loudness_sq[1][0],H.channels_out==2?(F+=H.loudness_sq[0][1],O+=H.loudness_sq[1][1]):(F+=F,O+=O),H.mode_gr==2&&(F=Math.max(F,O)),F*=.5,F*=H.ATH.aaSensitivityP,F>.03125)H.ATH.adjust>=1?H.ATH.adjust=1:H.ATH.adjust<H.ATH.adjustLimit&&(H.ATH.adjust=H.ATH.adjustLimit),H.ATH.adjustLimit=1;else{var z=31.98*F+625e-6;H.ATH.adjust>=z?(H.ATH.adjust*=z*.075+.925,H.ATH.adjust<z&&(H.ATH.adjust=z)):H.ATH.adjustLimit>=z?H.ATH.adjust=z:H.ATH.adjust<H.ATH.adjustLimit&&(H.ATH.adjust=H.ATH.adjustLimit),H.ATH.adjustLimit=z}}function L(H){var O,F;for(W(0<=H.bitrate_index&&H.bitrate_index<16),W(0<=H.mode_ext&&H.mode_ext<4),H.bitrate_stereoMode_Hist[H.bitrate_index][4]++,H.bitrate_stereoMode_Hist[15][4]++,H.channels_out==2&&(H.bitrate_stereoMode_Hist[H.bitrate_index][H.mode_ext]++,H.bitrate_stereoMode_Hist[15][H.mode_ext]++),O=0;O<H.mode_gr;++O)for(F=0;F<H.channels_out;++F){var z=H.l3_side.tt[O][F].block_type|0;H.l3_side.tt[O][F].mixed_block_flag!=0&&(z=4),H.bitrate_blockType_Hist[H.bitrate_index][z]++,H.bitrate_blockType_Hist[H.bitrate_index][5]++,H.bitrate_blockType_Hist[15][z]++,H.bitrate_blockType_Hist[15][5]++}}function Z(H,O){var F=H.internal_flags,z,u0;if(F.lame_encode_frame_init==0){var i0,o,w0=j(2014),o0=j(2014);for(F.lame_encode_frame_init=1,i0=0,o=0;i0<286+576*(1+F.mode_gr);++i0)i0<576*F.mode_gr?(w0[i0]=0,F.channels_out==2&&(o0[i0]=0)):(w0[i0]=O[0][o],F.channels_out==2&&(o0[i0]=O[1][o]),++o);for(u0=0;u0<F.mode_gr;u0++)for(z=0;z<F.channels_out;z++)F.l3_side.tt[u0][z].block_type=Y.SHORT_TYPE;V.mdct_sub48(F,w0,o0),W(576>=Y.FFTOFFSET),W(F.mf_size>=Y.BLKSIZE+H.framesize-Y.FFTOFFSET),W(F.mf_size>=512+H.framesize-32)}}this.lame_encode_mp3_frame=function(H,O,F,z,u0,i0){var o,w0=k([2,2]);w0[0][0]=new B,w0[0][1]=new B,w0[1][0]=new B,w0[1][1]=new B;var o0=k([2,2]);o0[0][0]=new B,o0[0][1]=new B,o0[1][0]=new B,o0[1][1]=new B;var S,l=[null,null],c=H.internal_flags,R=U([2,4]),q=[.5,.5],u=[[0,0],[0,0]],n=[[0,0],[0,0]],e,r,a;if(l[0]=O,l[1]=F,c.lame_encode_frame_init==0&&Z(H,l),c.padding=0,(c.slot_lag-=c.frac_SpF)<0&&(c.slot_lag+=H.out_samplerate,c.padding=1),c.psymodel!=0){var i,d=[null,null],M=0,T=X(2);for(a=0;a<c.mode_gr;a++){for(r=0;r<c.channels_out;r++)d[r]=l[r],M=576+a*576-Y.FFTOFFSET;if(H.VBR==J.vbr_mtrh||H.VBR==J.vbr_mt?i=f.L3psycho_anal_vbr(H,d,M,a,w0,o0,u[a],n[a],R[a],T):i=f.L3psycho_anal_ns(H,d,M,a,w0,o0,u[a],n[a],R[a],T),i!=0)return-4;for(H.mode==w.JOINT_STEREO&&(q[a]=R[a][2]+R[a][3],q[a]>0&&(q[a]=R[a][3]/q[a])),r=0;r<c.channels_out;r++){var E=c.l3_side.tt[a][r];E.block_type=T[r],E.mixed_block_flag=0}}}else for(a=0;a<c.mode_gr;a++)for(r=0;r<c.channels_out;r++)c.l3_side.tt[a][r].block_type=Y.NORM_TYPE,c.l3_side.tt[a][r].mixed_block_flag=0,n[a][r]=u[a][r]=700;if(t(c),V.mdct_sub48(c,l[0],l[1]),c.mode_ext=Y.MPG_MD_LR_LR,H.force_ms)c.mode_ext=Y.MPG_MD_MS_LR;else if(H.mode==w.JOINT_STEREO){var C=0,t0=0;for(a=0;a<c.mode_gr;a++)for(r=0;r<c.channels_out;r++)C+=n[a][r],t0+=u[a][r];if(C<=1*t0){var n0=c.l3_side.tt[0],M0=c.l3_side.tt[c.mode_gr-1];n0[0].block_type==n0[1].block_type&&M0[0].block_type==M0[1].block_type&&(c.mode_ext=Y.MPG_MD_MS_LR)}}if(c.mode_ext==I?(S=o0,e=n):(S=w0,e=u),H.analysis&&c.pinfo!=null)for(a=0;a<c.mode_gr;a++)for(r=0;r<c.channels_out;r++)c.pinfo.ms_ratio[a]=c.ms_ratio[a],c.pinfo.ms_ener_ratio[a]=q[a],c.pinfo.blocktype[a][r]=c.l3_side.tt[a][r].block_type,c.pinfo.pe[a][r]=e[a][r],A.arraycopy(c.l3_side.tt[a][r].xr,0,c.pinfo.xr[a][r],0,576),c.mode_ext==I&&(c.pinfo.ers[a][r]=c.pinfo.ers[a][r+2],A.arraycopy(c.pinfo.energy[a][r+2],0,c.pinfo.energy[a][r],0,c.pinfo.energy[a][r].length));if(H.VBR==J.vbr_off||H.VBR==J.vbr_abr){var b0,d0;for(b0=0;b0<18;b0++)c.nsPsy.pefirbuf[b0]=c.nsPsy.pefirbuf[b0+1];for(d0=0,a=0;a<c.mode_gr;a++)for(r=0;r<c.channels_out;r++)d0+=e[a][r];for(c.nsPsy.pefirbuf[18]=d0,d0=c.nsPsy.pefirbuf[9],b0=0;b0<9;b0++)d0+=(c.nsPsy.pefirbuf[b0]+c.nsPsy.pefirbuf[18-b0])*Y.fircoef[b0];for(d0=670*5*c.mode_gr*c.channels_out/d0,a=0;a<c.mode_gr;a++)for(r=0;r<c.channels_out;r++)e[a][r]*=d0}if(c.iteration_loop.iteration_loop(H,e,q,S),g.format_bitstream(H),o=g.copy_buffer(c,z,u0,i0,1),H.bWriteVbrTag&&N.addVbrFrame(H),H.analysis&&c.pinfo!=null){for(r=0;r<c.channels_out;r++){var x0;for(x0=0;x0<v0;x0++)c.pinfo.pcmdata[r][x0]=c.pinfo.pcmdata[r][x0+H.framesize];for(x0=v0;x0<1600;x0++)c.pinfo.pcmdata[r][x0]=l[r][x0-v0]}b.set_frame_pinfo(H,S)}return L(c),o}}return F1=Y,F1}var k1,Ve;function Aa(){if(Ve)return k1;Ve=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock;var A=_.Util;_.Arrays,_.new_array_n,_.new_byte,_.new_double;var J=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var k=$0();function j(){var U=J(k.BLKSIZE),X=J(k.BLKSIZE_s/2),W=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function Y(B,w,v0){var I=0,g,f,N;v0<<=1;var b=w+v0;g=4;do{var V,t,L,Z,H,O,F;F=g>>1,Z=g,H=g<<1,O=H+Z,g=H<<1,f=w,N=f+F;do{var z,u0,i0,o;u0=B[f+0]-B[f+Z],z=B[f+0]+B[f+Z],o=B[f+H]-B[f+O],i0=B[f+H]+B[f+O],B[f+H]=z-i0,B[f+0]=z+i0,B[f+O]=u0-o,B[f+Z]=u0+o,u0=B[N+0]-B[N+Z],z=B[N+0]+B[N+Z],o=A.SQRT2*B[N+O],i0=A.SQRT2*B[N+H],B[N+H]=z-i0,B[N+0]=z+i0,B[N+O]=u0-o,B[N+Z]=u0+o,N+=g,f+=g}while(f<b);for(t=W[I+0],V=W[I+1],L=1;L<F;L++){var w0,o0;w0=1-2*V*V,o0=2*V*t,f=w+L,N=w+Z-L;do{var S,l,c,z,u0,R,i0,q,o,u;l=o0*B[f+Z]-w0*B[N+Z],S=w0*B[f+Z]+o0*B[N+Z],u0=B[f+0]-S,z=B[f+0]+S,R=B[N+0]-l,c=B[N+0]+l,l=o0*B[f+O]-w0*B[N+O],S=w0*B[f+O]+o0*B[N+O],o=B[f+H]-S,i0=B[f+H]+S,u=B[N+H]-l,q=B[N+H]+l,l=V*i0-t*u,S=t*i0+V*u,B[f+H]=z-S,B[f+0]=z+S,B[N+O]=R-l,B[N+Z]=R+l,l=t*q-V*o,S=V*q+t*o,B[N+H]=c-S,B[N+0]=c+S,B[f+O]=u0-l,B[f+Z]=u0+l,N+=g,f+=g}while(f<b);w0=t,t=w0*W[I+0]-V*W[I+1],V=w0*W[I+1]+V*W[I+0]}I+=2}while(g<v0)}var $=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(B,w,v0,I,g){for(var f=0;f<3;f++){var N=k.BLKSIZE_s/2,b=65535&576/3*(f+1),V=k.BLKSIZE_s/8-1;do{var t,L,Z,H,O,F=$[V<<2]&255;t=X[F]*I[v0][g+F+b],O=X[127-F]*I[v0][g+F+b+128],L=t-O,t=t+O,Z=X[F+64]*I[v0][g+F+b+64],O=X[63-F]*I[v0][g+F+b+192],H=Z-O,Z=Z+O,N-=4,w[f][N+0]=t+Z,w[f][N+2]=t-Z,w[f][N+1]=L+H,w[f][N+3]=L-H,t=X[F+1]*I[v0][g+F+b+1],O=X[126-F]*I[v0][g+F+b+129],L=t-O,t=t+O,Z=X[F+65]*I[v0][g+F+b+65],O=X[62-F]*I[v0][g+F+b+193],H=Z-O,Z=Z+O,w[f][N+k.BLKSIZE_s/2+0]=t+Z,w[f][N+k.BLKSIZE_s/2+2]=t-Z,w[f][N+k.BLKSIZE_s/2+1]=L+H,w[f][N+k.BLKSIZE_s/2+3]=L-H}while(--V>=0);Y(w[f],N,k.BLKSIZE_s/2)}},this.fft_long=function(B,w,v0,I,g){var f=k.BLKSIZE/8-1,N=k.BLKSIZE/2;do{var b,V,t,L,Z,H=$[f]&255;b=U[H]*I[v0][g+H],Z=U[H+512]*I[v0][g+H+512],V=b-Z,b=b+Z,t=U[H+256]*I[v0][g+H+256],Z=U[H+768]*I[v0][g+H+768],L=t-Z,t=t+Z,N-=4,w[N+0]=b+t,w[N+2]=b-t,w[N+1]=V+L,w[N+3]=V-L,b=U[H+1]*I[v0][g+H+1],Z=U[H+513]*I[v0][g+H+513],V=b-Z,b=b+Z,t=U[H+257]*I[v0][g+H+257],Z=U[H+769]*I[v0][g+H+769],L=t-Z,t=t+Z,w[N+k.BLKSIZE/2+0]=b+t,w[N+k.BLKSIZE/2+2]=b-t,w[N+k.BLKSIZE/2+1]=V+L,w[N+k.BLKSIZE/2+3]=V-L}while(--f>=0);Y(w,N,k.BLKSIZE/2)},this.init_fft=function(B){for(var w=0;w<k.BLKSIZE;w++)U[w]=.42-.5*Math.cos(2*Math.PI*(w+.5)/k.BLKSIZE)+.08*Math.cos(4*Math.PI*(w+.5)/k.BLKSIZE);for(var w=0;w<k.BLKSIZE_s/2;w++)X[w]=.5*(1-Math.cos(2*Math.PI*(w+.5)/k.BLKSIZE_s))}}return k1=j,k1}var q1,pe;function Ra(){if(pe)return q1;pe=1;var _=G0();_.System;var A=_.VbrMode,J=_.Float,k=_.ShortBlock,j=_.Util,U=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var X=_.new_float,W=_.new_float_n,Y=_.new_int;_.new_int_n;var $=_.assert,B=Aa(),w=$0();function v0(){var I=S1(),g=new B,f=2.302585092994046,N=2,b=16,V=2,t=16,L=.34,Z=1/(14752*14752)/(w.BLKSIZE/2),H=.01,O=.8,F=.6,z=.3,u0=3.5,i0=21,o=.2302585093;function w0(h){return h}function o0(h,m){for(var y=0,p=0;p<w.BLKSIZE/2;++p)y+=h[p]*m.ATH.eql_w[p];return y*=Z,y}function S(h,m,y,p,P,x,D,K,G,a0,Q){var r0=h.internal_flags;if(G<2)g.fft_long(r0,p[P],G,a0,Q),g.fft_short(r0,x[D],G,a0,Q);else if(G==2){for(var f0=w.BLKSIZE-1;f0>=0;--f0){var I0=p[P+0][f0],_0=p[P+1][f0];p[P+0][f0]=(I0+_0)*j.SQRT2*.5,p[P+1][f0]=(I0-_0)*j.SQRT2*.5}for(var T0=2;T0>=0;--T0)for(var f0=w.BLKSIZE_s-1;f0>=0;--f0){var I0=x[D+0][T0][f0],_0=x[D+1][T0][f0];x[D+0][T0][f0]=(I0+_0)*j.SQRT2*.5,x[D+1][T0][f0]=(I0-_0)*j.SQRT2*.5}}m[0]=p[P+0][0],m[0]*=m[0];for(var f0=w.BLKSIZE/2-1;f0>=0;--f0){var e0=p[P+0][w.BLKSIZE/2-f0],A0=p[P+0][w.BLKSIZE/2+f0];m[w.BLKSIZE/2-f0]=(e0*e0+A0*A0)*.5}for(var T0=2;T0>=0;--T0){y[T0][0]=x[D+0][T0][0],y[T0][0]*=y[T0][0];for(var f0=w.BLKSIZE_s/2-1;f0>=0;--f0){var e0=x[D+0][T0][w.BLKSIZE_s/2-f0],A0=x[D+0][T0][w.BLKSIZE_s/2+f0];y[T0][w.BLKSIZE_s/2-f0]=(e0*e0+A0*A0)*.5}}{for(var H0=0,f0=11;f0<w.HBLKSIZE;f0++)H0+=m[f0];r0.tot_ener[G]=H0}if(h.analysis){for(var f0=0;f0<w.HBLKSIZE;f0++)r0.pinfo.energy[K][G][f0]=r0.pinfo.energy_save[G][f0],r0.pinfo.energy_save[G][f0]=m[f0];r0.pinfo.pe[K][G]=r0.pe[G]}h.athaa_loudapprox==2&&G<2&&(r0.loudness_sq[K][G]=r0.loudness_sq_save[G],r0.loudness_sq_save[G]=o0(m,r0))}var l=8,c=23,R=15,q,u,n,e=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function r(){q=Math.pow(10,(l+1)/16),u=Math.pow(10,(c+1)/16),n=Math.pow(10,R/10)}var a=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],i=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],d=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function M(h,m,y,p,P,x){var D;if(m>h)if(m<h*u)D=m/h;else return h+m;else{if(h>=m*u)return h+m;D=h/m}if($(h>=0),$(m>=0),h+=m,p+3<=6){if(D>=q)return h;var K=0|j.FAST_LOG10_X(D,16);return h*i[K]}var K=0|j.FAST_LOG10_X(D,16);if(m=P.ATH.cb_l[y]*P.ATH.adjust,$(m>=0),h<n*m){if(h>m){var G,a0;return G=1,K<=13&&(G=d[K]),a0=j.FAST_LOG10_X(h/m,10/15),h*((a[K]-G)*a0+G)}return K>13?h:h*d[K]}return h*a[K]}var T=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function E(h,m,y){var p;if(h<0&&(h=0),m<0&&(m=0),h<=0)return m;if(m<=0)return h;if(m>h?p=m/h:p=h/m,-2<=y&&y<=2){if(p>=q)return h+m;var P=0|j.FAST_LOG10_X(p,16);return(h+m)*T[P]}return p<u?h+m:(h<m&&(h=m),h)}function C(h,m){var y=h.internal_flags;if(y.channels_out>1){for(var p=0;p<w.SBMAX_l;p++){var P=y.thm[0].l[p],x=y.thm[1].l[p];y.thm[0].l[p]+=x*m,y.thm[1].l[p]+=P*m}for(var p=0;p<w.SBMAX_s;p++)for(var D=0;D<3;D++){var P=y.thm[0].s[p][D],x=y.thm[1].s[p][D];y.thm[0].s[p][D]+=x*m,y.thm[1].s[p][D]+=P*m}}}function t0(h){for(var m=0;m<w.SBMAX_l;m++)if(!(h.thm[0].l[m]>1.58*h.thm[1].l[m]||h.thm[1].l[m]>1.58*h.thm[0].l[m])){var y=h.mld_l[m]*h.en[3].l[m],p=Math.max(h.thm[2].l[m],Math.min(h.thm[3].l[m],y));y=h.mld_l[m]*h.en[2].l[m];var P=Math.max(h.thm[3].l[m],Math.min(h.thm[2].l[m],y));h.thm[2].l[m]=p,h.thm[3].l[m]=P}for(var m=0;m<w.SBMAX_s;m++)for(var x=0;x<3;x++)if(!(h.thm[0].s[m][x]>1.58*h.thm[1].s[m][x]||h.thm[1].s[m][x]>1.58*h.thm[0].s[m][x])){var y=h.mld_s[m]*h.en[3].s[m][x],p=Math.max(h.thm[2].s[m][x],Math.min(h.thm[3].s[m][x],y));y=h.mld_s[m]*h.en[2].s[m][x];var P=Math.max(h.thm[3].s[m][x],Math.min(h.thm[2].s[m][x],y));h.thm[2].s[m][x]=p,h.thm[3].s[m][x]=P}}function n0(h,m,y){var p=m,P=Math.pow(10,y);m*=2,p*=2;for(var x=0;x<w.SBMAX_l;x++){var D,K,G,a0;if(a0=h.ATH.cb_l[h.bm_l[x]]*P,D=Math.min(Math.max(h.thm[0].l[x],a0),Math.max(h.thm[1].l[x],a0)),K=Math.max(h.thm[2].l[x],a0),G=Math.max(h.thm[3].l[x],a0),D*m<K+G){var Q=D*p/(K+G);K*=Q,G*=Q,$(K+G>0)}h.thm[2].l[x]=Math.min(K,h.thm[2].l[x]),h.thm[3].l[x]=Math.min(G,h.thm[3].l[x])}P*=w.BLKSIZE_s/w.BLKSIZE;for(var x=0;x<w.SBMAX_s;x++)for(var r0=0;r0<3;r0++){var D,K,G,a0;if(a0=h.ATH.cb_s[h.bm_s[x]]*P,D=Math.min(Math.max(h.thm[0].s[x][r0],a0),Math.max(h.thm[1].s[x][r0],a0)),K=Math.max(h.thm[2].s[x][r0],a0),G=Math.max(h.thm[3].s[x][r0],a0),D*m<K+G){var Q=D*m/(K+G);K*=Q,G*=Q,$(K+G>0)}h.thm[2].s[x][r0]=Math.min(h.thm[2].s[x][r0],K),h.thm[3].s[x][r0]=Math.min(h.thm[3].s[x][r0],G)}}function M0(h,m,y,p,P){var x,D,K=0,G=0;for(x=D=0;x<w.SBMAX_s;++D,++x){for(var a0=h.bo_s[x],Q=h.npart_s,r0=a0<Q?a0:Q;D<r0;)$(m[D]>=0),$(y[D]>=0),K+=m[D],G+=y[D],D++;if(h.en[p].s[x][P]=K,h.thm[p].s[x][P]=G,D>=Q){++x;break}$(m[D]>=0),$(y[D]>=0);{var f0=h.PSY.bo_s_weight[x],I0=1-f0;K=f0*m[D],G=f0*y[D],h.en[p].s[x][P]+=K,h.thm[p].s[x][P]+=G,K=I0*m[D],G=I0*y[D]}}for(;x<w.SBMAX_s;++x)h.en[p].s[x][P]=0,h.thm[p].s[x][P]=0}function b0(h,m,y,p){var P,x,D=0,K=0;for(P=x=0;P<w.SBMAX_l;++x,++P){for(var G=h.bo_l[P],a0=h.npart_l,Q=G<a0?G:a0;x<Q;)$(m[x]>=0),$(y[x]>=0),D+=m[x],K+=y[x],x++;if(h.en[p].l[P]=D,h.thm[p].l[P]=K,x>=a0){++P;break}$(m[x]>=0),$(y[x]>=0);{var r0=h.PSY.bo_l_weight[P],f0=1-r0;D=r0*m[x],K=r0*y[x],h.en[p].l[P]+=D,h.thm[p].l[P]+=K,D=f0*m[x],K=f0*y[x]}}for(;P<w.SBMAX_l;++P)h.en[p].l[P]=0,h.thm[p].l[P]=0}function d0(h,m,y,p,P,x){var D=h.internal_flags,K,G;for(G=K=0;G<D.npart_s;++G){for(var a0=0,Q=D.numlines_s[G],r0=0;r0<Q;++r0,++K){var f0=m[x][K];a0+=f0}y[G]=a0}for($(G==D.npart_s),$(K==129),K=G=0;G<D.npart_s;G++){var I0=D.s3ind_s[G][0],_0=D.s3_ss[K++]*y[I0];for(++I0;I0<=D.s3ind_s[G][1];)_0+=D.s3_ss[K]*y[I0],++K,++I0;{var T0=V*D.nb_s1[P][G];p[G]=Math.min(_0,T0)}if(D.blocktype_old[P&1]==w.SHORT_TYPE){var T0=t*D.nb_s2[P][G],e0=p[G];p[G]=Math.min(T0,e0)}D.nb_s2[P][G]=D.nb_s1[P][G],D.nb_s1[P][G]=_0,$(p[G]>=0)}for(;G<=w.CBANDS;++G)y[G]=0,p[G]=0}function x0(h,m,y,p){var P=h.internal_flags;h.short_blocks==k.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var x=0;x<P.channels_out;x++)p[x]=w.NORM_TYPE,h.short_blocks==k.short_block_dispensed&&(m[x]=1),h.short_blocks==k.short_block_forced&&(m[x]=0),m[x]!=0?($(P.blocktype_old[x]!=w.START_TYPE),P.blocktype_old[x]==w.SHORT_TYPE&&(p[x]=w.STOP_TYPE)):(p[x]=w.SHORT_TYPE,P.blocktype_old[x]==w.NORM_TYPE&&(P.blocktype_old[x]=w.START_TYPE),P.blocktype_old[x]==w.STOP_TYPE&&(P.blocktype_old[x]=w.SHORT_TYPE)),y[x]=P.blocktype_old[x],P.blocktype_old[x]=p[x]}function O0(h,m,y){return y>=1?h:y<=0?m:m>0?Math.pow(h/m,y)*m:0}var Q0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function s(h,m){for(var y=309.07,p=0;p<w.SBMAX_s-1;p++)for(var P=0;P<3;P++){var x=h.thm.s[p][P];if($(p<Q0.length),x>0){var D=x*m,K=h.en.s[p][P];K>D&&(K>D*1e10?y+=Q0[p]*(10*f):($(D>0),y+=Q0[p]*j.FAST_LOG10(K/D)))}}return y}var v=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function m0(h,m){for(var y=281.0575,p=0;p<w.SBMAX_l-1;p++){var P=h.thm.l[p];if($(p<v.length),P>0){var x=P*m,D=h.en.l[p];D>x&&(D>x*1e10?y+=v[p]*(10*f):($(x>0),y+=v[p]*j.FAST_LOG10(D/x)))}}return y}function S0(h,m,y,p,P){var x,D;for(x=D=0;x<h.npart_l;++x){var K=0,G=0,a0;for(a0=0;a0<h.numlines_l[x];++a0,++D){var Q=m[D];$(Q>=0),K+=Q,G<Q&&(G=Q)}y[x]=K,p[x]=G,P[x]=K*h.rnumlines_l[x],$(h.rnumlines_l[x]>=0),$(K>=0),$(y[x]>=0),$(p[x]>=0),$(P[x]>=0)}}function p0(h,m,y,p){var P=e.length-1,x=0,D=y[x]+y[x+1];if($(D>=0),D>0){var K=m[x];K<m[x+1]&&(K=m[x+1]),$(h.numlines_l[x]+h.numlines_l[x+1]-1>0),D=20*(K*2-D)/(D*(h.numlines_l[x]+h.numlines_l[x+1]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;for(x=1;x<h.npart_l-1;x++)if(D=y[x-1]+y[x]+y[x+1],$(D>=0),D>0){var K=m[x-1];K<m[x]&&(K=m[x]),K<m[x+1]&&(K=m[x+1]),$(h.numlines_l[x-1]+h.numlines_l[x]+h.numlines_l[x+1]-1>0),D=20*(K*3-D)/(D*(h.numlines_l[x-1]+h.numlines_l[x]+h.numlines_l[x+1]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;if($(x>0),$(x==h.npart_l-1),D=y[x-1]+y[x],$(D>=0),D>0){var K=m[x-1];K<m[x]&&(K=m[x]),$(h.numlines_l[x-1]+h.numlines_l[x]-1>0),D=20*(K*2-D)/(D*(h.numlines_l[x-1]+h.numlines_l[x]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;$(x==h.npart_l-1)}var L0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(h,m,y,p,P,x,D,K,G,a0){var Q=h.internal_flags,r0=W([2,w.BLKSIZE]),f0=W([2,3,w.BLKSIZE_s]),I0=X(w.CBANDS+1),_0=X(w.CBANDS+1),T0=X(w.CBANDS+2),e0=Y(2),A0=Y(2),H0,l0,R0,s0,V0,X0,c0,N0,C0=W([2,576]),P0,t1=Y(w.CBANDS+2),z0=Y(w.CBANDS+2);for(U.fill(z0,0),H0=Q.channels_out,h.mode==I.JOINT_STEREO&&(H0=4),h.VBR==A.vbr_off?P0=Q.ResvMax==0?0:Q.ResvSize/Q.ResvMax*.5:h.VBR==A.vbr_rh||h.VBR==A.vbr_mtrh||h.VBR==A.vbr_mt?P0=.6:P0=1,l0=0;l0<Q.channels_out;l0++){var Y0=m[l0],a1=y+576-350-i0+192;for($(L0.length==(i0-1)/2),s0=0;s0<576;s0++){var n1,i1;for(n1=Y0[a1+s0+10],i1=0,V0=0;V0<(i0-1)/2-1;V0+=2)n1+=L0[V0]*(Y0[a1+s0+V0]+Y0[a1+s0+i0-V0]),i1+=L0[V0+1]*(Y0[a1+s0+V0+1]+Y0[a1+s0+i0-V0-1]);C0[l0][s0]=n1+i1}P[p][l0].en.assign(Q.en[l0]),P[p][l0].thm.assign(Q.thm[l0]),H0>2&&(x[p][l0].en.assign(Q.en[l0+2]),x[p][l0].thm.assign(Q.thm[l0+2]))}for(l0=0;l0<H0;l0++){var l1,o1,e1=X(12),v1=[0,0,0,0],d1=X(12),be=1,ua,ha=X(w.CBANDS),fa=X(w.CBANDS),Z0=[0,0,0,0],ma=X(w.HBLKSIZE),ba=W([3,w.HBLKSIZE_s]);for($(Q.npart_s<=w.CBANDS),$(Q.npart_l<=w.CBANDS),s0=0;s0<3;s0++)e1[s0]=Q.nsPsy.last_en_subshort[l0][s0+6],$(Q.nsPsy.last_en_subshort[l0][s0+4]>0),d1[s0]=e1[s0]/Q.nsPsy.last_en_subshort[l0][s0+4],v1[0]+=e1[s0];if(l0==2)for(s0=0;s0<576;s0++){var ce,de;ce=C0[0][s0],de=C0[1][s0],C0[0][s0]=ce+de,C0[1][s0]=ce-de}{var ca=C0[l0&1],x1=0;for(s0=0;s0<9;s0++){for(var Da=x1+64,J0=1;x1<Da;x1++)J0<Math.abs(ca[x1])&&(J0=Math.abs(ca[x1]));Q.nsPsy.last_en_subshort[l0][s0]=e1[s0+3]=J0,v1[1+s0/3]+=J0,J0>e1[s0+3-2]?($(e1[s0+3-2]>0),J0=J0/e1[s0+3-2]):e1[s0+3-2]>J0*10?($(J0>0),J0=e1[s0+3-2]/(J0*10)):J0=0,d1[s0+3]=J0}}if(h.analysis){var Se=d1[0];for(s0=1;s0<12;s0++)Se<d1[s0]&&(Se=d1[s0]);Q.pinfo.ers[p][l0]=Q.pinfo.ers_save[l0],Q.pinfo.ers_save[l0]=Se}for(ua=l0==3?Q.nsPsy.attackthre_s:Q.nsPsy.attackthre,s0=0;s0<12;s0++)Z0[s0/3]==0&&d1[s0]>ua&&(Z0[s0/3]=s0%3+1);for(s0=1;s0<4;s0++){var Ae;v1[s0-1]>v1[s0]?($(v1[s0]>0),Ae=v1[s0-1]/v1[s0]):($(v1[s0-1]>0),Ae=v1[s0]/v1[s0-1]),Ae<1.7&&(Z0[s0]=0,s0==1&&(Z0[0]=0))}for(Z0[0]!=0&&Q.nsPsy.lastAttacks[l0]!=0&&(Z0[0]=0),(Q.nsPsy.lastAttacks[l0]==3||Z0[0]+Z0[1]+Z0[2]+Z0[3]!=0)&&(be=0,Z0[1]!=0&&Z0[0]!=0&&(Z0[1]=0),Z0[2]!=0&&Z0[1]!=0&&(Z0[2]=0),Z0[3]!=0&&Z0[2]!=0&&(Z0[3]=0)),l0<2?A0[l0]=be:be==0&&(A0[0]=A0[1]=0),G[l0]=Q.tot_ener[l0],o1=f0,l1=r0,S(h,ma,ba,l1,l0&1,o1,l0&1,p,l0,m,y),S0(Q,ma,I0,ha,fa),p0(Q,ha,fa,t1),N0=0;N0<3;N0++){var Re,r1;for(d0(h,ba,_0,T0,l0,N0),M0(Q,_0,T0,l0,N0),c0=0;c0<w.SBMAX_s;c0++){if(r1=Q.thm[l0].s[c0][N0],r1*=O,Z0[N0]>=2||Z0[N0+1]==1){var E1=N0!=0?N0-1:2,J0=O0(Q.thm[l0].s[c0][E1],r1,F*P0);r1=Math.min(r1,J0)}if(Z0[N0]==1){var E1=N0!=0?N0-1:2,J0=O0(Q.thm[l0].s[c0][E1],r1,z*P0);r1=Math.min(r1,J0)}else if(N0!=0&&Z0[N0-1]==3||N0==0&&Q.nsPsy.lastAttacks[l0]==3){var E1=N0!=2?N0+1:0,J0=O0(Q.thm[l0].s[c0][E1],r1,z*P0);r1=Math.min(r1,J0)}Re=e1[N0*3+3]+e1[N0*3+4]+e1[N0*3+5],e1[N0*3+5]*6<Re&&(r1*=.5,e1[N0*3+4]*6<Re&&(r1*=.5)),Q.thm[l0].s[c0][N0]=r1}}for(Q.nsPsy.lastAttacks[l0]=Z0[2],X0=0,R0=0;R0<Q.npart_l;R0++){for(var b1=Q.s3ind[R0][0],Me=I0[b1]*e[t1[b1]],c1=Q.s3_ll[X0++]*Me;++b1<=Q.s3ind[R0][1];)Me=I0[b1]*e[t1[b1]],c1=M(c1,Q.s3_ll[X0++]*Me,b1,b1-R0,Q);c1*=.158489319246111,Q.blocktype_old[l0&1]==w.SHORT_TYPE?T0[R0]=c1:T0[R0]=O0(Math.min(c1,Math.min(N*Q.nb_1[l0][R0],b*Q.nb_2[l0][R0])),c1,P0),Q.nb_2[l0][R0]=Q.nb_1[l0][R0],Q.nb_1[l0][R0]=c1}for(;R0<=w.CBANDS;++R0)I0[R0]=0,T0[R0]=0;b0(Q,I0,T0,l0)}if((h.mode==I.STEREO||h.mode==I.JOINT_STEREO)&&h.interChRatio>0&&C(h,h.interChRatio),h.mode==I.JOINT_STEREO){var xe;t0(Q),xe=h.msfix,Math.abs(xe)>0&&n0(Q,xe,h.ATHlower*Q.ATH.adjust)}for(x0(h,A0,a0,e0),l0=0;l0<H0;l0++){var B1,w1=0,L1,V1;l0>1?(B1=K,w1=-2,L1=w.NORM_TYPE,(a0[0]==w.SHORT_TYPE||a0[1]==w.SHORT_TYPE)&&(L1=w.SHORT_TYPE),V1=x[p][l0-2]):(B1=D,w1=0,L1=a0[l0],V1=P[p][l0]),L1==w.SHORT_TYPE?B1[w1+l0]=s(V1,Q.masking_lower):B1[w1+l0]=m0(V1,Q.masking_lower),h.analysis&&(Q.pinfo.pe[p][l0]=B1[w1+l0])}return 0};function B0(h,m,y,p,P,x,D,K){var G=h.internal_flags;if(p<2)g.fft_long(G,D[K],p,m,y);else if(p==2)for(var a0=w.BLKSIZE-1;a0>=0;--a0){var Q=D[K+0][a0],r0=D[K+1][a0];D[K+0][a0]=(Q+r0)*j.SQRT2*.5,D[K+1][a0]=(Q-r0)*j.SQRT2*.5}x[0]=D[K+0][0],x[0]*=x[0];for(var a0=w.BLKSIZE/2-1;a0>=0;--a0){var f0=D[K+0][w.BLKSIZE/2-a0],I0=D[K+0][w.BLKSIZE/2+a0];x[w.BLKSIZE/2-a0]=(f0*f0+I0*I0)*.5}{for(var _0=0,a0=11;a0<w.HBLKSIZE;a0++)_0+=x[a0];G.tot_ener[p]=_0}if(h.analysis){for(var a0=0;a0<w.HBLKSIZE;a0++)G.pinfo.energy[P][p][a0]=G.pinfo.energy_save[p][a0],G.pinfo.energy_save[p][a0]=x[a0];G.pinfo.pe[P][p]=G.pe[p]}}function E0(h,m,y,p,P,x,D,K){var G=h.internal_flags;if(P==0&&p<2&&g.fft_short(G,D[K],p,m,y),p==2)for(var a0=w.BLKSIZE_s-1;a0>=0;--a0){var Q=D[K+0][P][a0],r0=D[K+1][P][a0];D[K+0][P][a0]=(Q+r0)*j.SQRT2*.5,D[K+1][P][a0]=(Q-r0)*j.SQRT2*.5}x[P][0]=D[K+0][P][0],x[P][0]*=x[P][0];for(var a0=w.BLKSIZE_s/2-1;a0>=0;--a0){var f0=D[K+0][P][w.BLKSIZE_s/2-a0],I0=D[K+0][P][w.BLKSIZE_s/2+a0];x[P][w.BLKSIZE_s/2-a0]=(f0*f0+I0*I0)*.5}}function F0(h,m,y,p){var P=h.internal_flags;h.athaa_loudapprox==2&&y<2&&(P.loudness_sq[m][y]=P.loudness_sq_save[y],P.loudness_sq_save[y]=o0(p,P))}var y0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function h0(h,m,y,p,P,x,D,K,G,a0){for(var Q=W([2,576]),r0=h.internal_flags,f0=r0.channels_out,I0=h.mode==I.JOINT_STEREO?4:f0,_0=0;_0<f0;_0++){firbuf=m[_0];var T0=y+576-350-i0+192;$(y0.length==(i0-1)/2);for(var e0=0;e0<576;e0++){var A0,H0;A0=firbuf[T0+e0+10],H0=0;for(var l0=0;l0<(i0-1)/2-1;l0+=2)A0+=y0[l0]*(firbuf[T0+e0+l0]+firbuf[T0+e0+i0-l0]),H0+=y0[l0+1]*(firbuf[T0+e0+l0+1]+firbuf[T0+e0+i0-l0-1]);Q[_0][e0]=A0+H0}P[p][_0].en.assign(r0.en[_0]),P[p][_0].thm.assign(r0.thm[_0]),I0>2&&(x[p][_0].en.assign(r0.en[_0+2]),x[p][_0].thm.assign(r0.thm[_0+2]))}for(var _0=0;_0<I0;_0++){var R0=X(12),s0=X(12),V0=[0,0,0,0],X0=Q[_0&1],c0=0,N0=_0==3?r0.nsPsy.attackthre_s:r0.nsPsy.attackthre,C0=1;if(_0==2)for(var e0=0,l0=576;l0>0;++e0,--l0){var P0=Q[0][e0],t1=Q[1][e0];Q[0][e0]=P0+t1,Q[1][e0]=P0-t1}for(var e0=0;e0<3;e0++)s0[e0]=r0.nsPsy.last_en_subshort[_0][e0+6],$(r0.nsPsy.last_en_subshort[_0][e0+4]>0),R0[e0]=s0[e0]/r0.nsPsy.last_en_subshort[_0][e0+4],V0[0]+=s0[e0];for(var e0=0;e0<9;e0++){for(var z0=c0+64,Y0=1;c0<z0;c0++)Y0<Math.abs(X0[c0])&&(Y0=Math.abs(X0[c0]));r0.nsPsy.last_en_subshort[_0][e0]=s0[e0+3]=Y0,V0[1+e0/3]+=Y0,Y0>s0[e0+3-2]?($(s0[e0+3-2]>0),Y0=Y0/s0[e0+3-2]):s0[e0+3-2]>Y0*10?($(Y0>0),Y0=s0[e0+3-2]/(Y0*10)):Y0=0,R0[e0+3]=Y0}for(var e0=0;e0<3;++e0){var a1=s0[e0*3+3]+s0[e0*3+4]+s0[e0*3+5],n1=1;s0[e0*3+5]*6<a1&&(n1*=.5,s0[e0*3+4]*6<a1&&(n1*=.5)),K[_0][e0]=n1}if(h.analysis){for(var i1=R0[0],e0=1;e0<12;e0++)i1<R0[e0]&&(i1=R0[e0]);r0.pinfo.ers[p][_0]=r0.pinfo.ers_save[_0],r0.pinfo.ers_save[_0]=i1}for(var e0=0;e0<12;e0++)G[_0][e0/3]==0&&R0[e0]>N0&&(G[_0][e0/3]=e0%3+1);for(var e0=1;e0<4;e0++){var l1=V0[e0-1],o1=V0[e0],e1=Math.max(l1,o1);e1<4e4&&l1<1.7*o1&&o1<1.7*l1&&(e0==1&&G[_0][0]<=G[_0][e0]&&(G[_0][0]=0),G[_0][e0]=0)}G[_0][0]<=r0.nsPsy.lastAttacks[_0]&&(G[_0][0]=0),(r0.nsPsy.lastAttacks[_0]==3||G[_0][0]+G[_0][1]+G[_0][2]+G[_0][3]!=0)&&(C0=0,G[_0][1]!=0&&G[_0][0]!=0&&(G[_0][1]=0),G[_0][2]!=0&&G[_0][1]!=0&&(G[_0][2]=0),G[_0][3]!=0&&G[_0][2]!=0&&(G[_0][3]=0)),_0<2?a0[_0]=C0:C0==0&&(a0[0]=a0[1]=0),D[_0]=r0.tot_ener[_0]}}function k0(h,m,y){if(y==0)for(var p=0;p<h.npart_s;p++)h.nb_s2[m][p]=h.nb_s1[m][p],h.nb_s1[m][p]=0}function W0(h,m){for(var y=0;y<h.npart_l;y++)h.nb_2[m][y]=h.nb_1[m][y],h.nb_1[m][y]=0}function q0(h,m,y,p){var P=e.length-1,x=0,D=y[x]+y[x+1];if($(D>=0),D>0){var K=m[x];K<m[x+1]&&(K=m[x+1]),$(h.numlines_s[x]+h.numlines_s[x+1]-1>0),D=20*(K*2-D)/(D*(h.numlines_s[x]+h.numlines_s[x+1]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;for(x=1;x<h.npart_s-1;x++)if(D=y[x-1]+y[x]+y[x+1],$(x+1<h.npart_s),$(D>=0),D>0){var K=m[x-1];K<m[x]&&(K=m[x]),K<m[x+1]&&(K=m[x+1]),$(h.numlines_s[x-1]+h.numlines_s[x]+h.numlines_s[x+1]-1>0),D=20*(K*3-D)/(D*(h.numlines_s[x-1]+h.numlines_s[x]+h.numlines_s[x+1]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;if($(x>0),$(x==h.npart_s-1),D=y[x-1]+y[x],$(D>=0),D>0){var K=m[x-1];K<m[x]&&(K=m[x]),$(h.numlines_s[x-1]+h.numlines_s[x]-1>0),D=20*(K*2-D)/(D*(h.numlines_s[x-1]+h.numlines_s[x]-1));var G=0|D;G>P&&(G=P),p[x]=G}else p[x]=0;$(x==h.npart_s-1)}function K0(h,m,y,p,P,x){var D=h.internal_flags,K=new float[w.CBANDS],G=X(w.CBANDS),a0,Q,r0,f0=new int[w.CBANDS];for(r0=Q=0;r0<D.npart_s;++r0){var I0=0,_0=0,T0=D.numlines_s[r0];for(a0=0;a0<T0;++a0,++Q){var e0=m[x][Q];I0+=e0,_0<e0&&(_0=e0)}y[r0]=I0,$(I0>=0),K[r0]=_0,$(T0>0),G[r0]=I0/T0,$(G[r0]>=0)}for($(r0==D.npart_s),$(Q==129);r0<w.CBANDS;++r0)K[r0]=0,G[r0]=0;for(q0(D,K,G,f0),Q=r0=0;r0<D.npart_s;r0++){var A0=D.s3ind_s[r0][0],H0=D.s3ind_s[r0][1],l0,R0,s0,V0,X0;for(l0=f0[A0],R0=1,V0=D.s3_ss[Q]*y[A0]*e[f0[A0]],++Q,++A0;A0<=H0;)l0+=f0[A0],R0+=1,s0=D.s3_ss[Q]*y[A0]*e[f0[A0]],V0=E(V0,s0,A0-r0),++Q,++A0;l0=(1+2*l0)/(2*R0),X0=e[l0]*.5,V0*=X0,p[r0]=V0,D.nb_s2[P][r0]=D.nb_s1[P][r0],D.nb_s1[P][r0]=V0,s0=K[r0],s0*=D.minval_s[r0],s0*=X0,p[r0]>s0&&(p[r0]=s0),D.masking_lower>1&&(p[r0]*=D.masking_lower),p[r0]>y[r0]&&(p[r0]=y[r0]),D.masking_lower<1&&(p[r0]*=D.masking_lower),$(p[r0]>=0)}for(;r0<w.CBANDS;++r0)y[r0]=0,p[r0]=0}function D0(h,m,y,p,P){var x=X(w.CBANDS),D=X(w.CBANDS),K=Y(w.CBANDS+2),G;S0(h,m,y,x,D),p0(h,x,D,K);var a0=0;for(G=0;G<h.npart_l;G++){var Q,r0,f0,I0,_0=h.s3ind[G][0],T0=h.s3ind[G][1],e0=0,A0=0;for(e0=K[_0],A0+=1,r0=h.s3_ll[a0]*y[_0]*e[K[_0]],++a0,++_0;_0<=T0;)e0+=K[_0],A0+=1,Q=h.s3_ll[a0]*y[_0]*e[K[_0]],I0=E(r0,Q,_0-G),r0=I0,++a0,++_0;if(e0=(1+2*e0)/(2*A0),f0=e[e0]*.5,r0*=f0,h.blocktype_old[P&1]==w.SHORT_TYPE){var H0=N*h.nb_1[P][G];H0>0?p[G]=Math.min(r0,H0):p[G]=Math.min(r0,y[G]*z)}else{var l0=b*h.nb_2[P][G],R0=N*h.nb_1[P][G],H0;l0<=0&&(l0=r0),R0<=0&&(R0=r0),h.blocktype_old[P&1]==w.NORM_TYPE?H0=Math.min(R0,l0):H0=R0,p[G]=Math.min(r0,H0)}h.nb_2[P][G]=h.nb_1[P][G],h.nb_1[P][G]=r0,Q=x[G],Q*=h.minval_l[G],Q*=f0,p[G]>Q&&(p[G]=Q),h.masking_lower>1&&(p[G]*=h.masking_lower),p[G]>y[G]&&(p[G]=y[G]),h.masking_lower<1&&(p[G]*=h.masking_lower),$(p[G]>=0)}for(;G<w.CBANDS;++G)y[G]=0,p[G]=0}function U0(h,m){var y=h.internal_flags;h.short_blocks==k.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var p=0;p<y.channels_out;p++)h.short_blocks==k.short_block_dispensed&&(m[p]=1),h.short_blocks==k.short_block_forced&&(m[p]=0)}function j0(h,m,y){for(var p=h.internal_flags,P=0;P<p.channels_out;P++){var x=w.NORM_TYPE;m[P]!=0?($(p.blocktype_old[P]!=w.START_TYPE),p.blocktype_old[P]==w.SHORT_TYPE&&(x=w.STOP_TYPE)):(x=w.SHORT_TYPE,p.blocktype_old[P]==w.NORM_TYPE&&(p.blocktype_old[P]=w.START_TYPE),p.blocktype_old[P]==w.STOP_TYPE&&(p.blocktype_old[P]=w.SHORT_TYPE)),y[P]=p.blocktype_old[P],p.blocktype_old[P]=x}}function u1(h,m,y,p,P,x,D){for(var K=x*2,G=x>0?Math.pow(10,P):1,a0,Q,r0=0;r0<D;++r0){var f0=h[2][r0],I0=h[3][r0],_0=m[0][r0],T0=m[1][r0],e0=m[2][r0],A0=m[3][r0];if(_0<=1.58*T0&&T0<=1.58*_0){var H0=y[r0]*I0,l0=y[r0]*f0;Q=Math.max(e0,Math.min(A0,H0)),a0=Math.max(A0,Math.min(e0,l0))}else Q=e0,a0=A0;if(x>0){var R0,s0,V0=p[r0]*G;if(R0=Math.min(Math.max(_0,V0),Math.max(T0,V0)),e0=Math.max(Q,V0),A0=Math.max(a0,V0),s0=e0+A0,s0>0&&R0*K<s0){var X0=R0*K/s0;e0*=X0,A0*=X0,$(s0>0)}Q=Math.min(e0,Q),a0=Math.min(A0,a0)}Q>f0&&(Q=f0),a0>I0&&(a0=I0),m[2][r0]=Q,m[3][r0]=a0}}this.L3psycho_anal_vbr=function(h,m,y,p,P,x,D,K,G,a0){var Q=h.internal_flags,r0,f0,I0=X(w.HBLKSIZE),_0=W([3,w.HBLKSIZE_s]),T0=W([2,w.BLKSIZE]),e0=W([2,3,w.BLKSIZE_s]),A0=W([4,w.CBANDS]),H0=W([4,w.CBANDS]),l0=W([4,3]),R0=.6,s0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],V0=Y(2),X0=h.mode==I.JOINT_STEREO?4:Q.channels_out;h0(h,m,y,p,P,x,G,l0,s0,V0),U0(h,V0);{for(var c0=0;c0<X0;c0++){var N0=c0&1;r0=T0,B0(h,m,y,c0,p,I0,r0,N0),F0(h,p,c0,I0),V0[N0]!=0?D0(Q,I0,A0[c0],H0[c0],c0):W0(Q,c0)}V0[0]+V0[1]==2&&h.mode==I.JOINT_STEREO&&u1(A0,H0,Q.mld_cb_l,Q.ATH.cb_l,h.ATHlower*Q.ATH.adjust,h.msfix,Q.npart_l);for(var c0=0;c0<X0;c0++){var N0=c0&1;V0[N0]!=0&&b0(Q,A0[c0],H0[c0],c0)}}{for(var C0=0;C0<3;C0++){for(var c0=0;c0<X0;++c0){var N0=c0&1;V0[N0]!=0?k0(Q,c0,C0):(f0=e0,E0(h,m,y,c0,C0,_0,f0,N0),K0(h,_0,A0[c0],H0[c0],c0,C0))}V0[0]+V0[1]==0&&h.mode==I.JOINT_STEREO&&u1(A0,H0,Q.mld_cb_s,Q.ATH.cb_s,h.ATHlower*Q.ATH.adjust,h.msfix,Q.npart_s);for(var c0=0;c0<X0;++c0){var N0=c0&1;V0[N0]==0&&M0(Q,A0[c0],H0[c0],c0,C0)}}for(var c0=0;c0<X0;c0++){var N0=c0&1;if(V0[N0]==0)for(var P0=0;P0<w.SBMAX_s;P0++){for(var t1=X(3),C0=0;C0<3;C0++){var z0=Q.thm[c0].s[P0][C0];if(z0*=O,s0[c0][C0]>=2||s0[c0][C0+1]==1){var Y0=C0!=0?C0-1:2,a1=O0(Q.thm[c0].s[P0][Y0],z0,F*R0);z0=Math.min(z0,a1)}else if(s0[c0][C0]==1){var Y0=C0!=0?C0-1:2,a1=O0(Q.thm[c0].s[P0][Y0],z0,z*R0);z0=Math.min(z0,a1)}else if(C0!=0&&s0[c0][C0-1]==3||C0==0&&Q.nsPsy.lastAttacks[c0]==3){var Y0=C0!=2?C0+1:0,a1=O0(Q.thm[c0].s[P0][Y0],z0,z*R0);z0=Math.min(z0,a1)}z0*=l0[c0][C0],t1[C0]=z0}for(var C0=0;C0<3;C0++)Q.thm[c0].s[P0][C0]=t1[C0]}}}for(var c0=0;c0<X0;c0++)Q.nsPsy.lastAttacks[c0]=s0[c0][2];j0(h,V0,a0);for(var c0=0;c0<X0;c0++){var n1,i1,l1,o1;c0>1?(n1=K,i1=-2,l1=w.NORM_TYPE,(a0[0]==w.SHORT_TYPE||a0[1]==w.SHORT_TYPE)&&(l1=w.SHORT_TYPE),o1=x[p][c0-2]):(n1=D,i1=0,l1=a0[c0],o1=P[p][c0]),l1==w.SHORT_TYPE?n1[i1+c0]=s(o1,Q.masking_lower):n1[i1+c0]=m0(o1,Q.masking_lower),h.analysis&&(Q.pinfo.pe[p][c0]=n1[i1+c0])}return 0};function g0(h,m){var y=h,p;return y>=0?p=-y*27:p=y*m,p<=-72?0:Math.exp(p*o)}function s1(h){var m=0,y=0;{var p=0,P,x;for(p=0;g0(p,h)>1e-20;p-=1);for(P=p,x=0;Math.abs(x-P)>1e-12;)p=(x+P)/2,g0(p,h)>0?x=p:P=p;m=P}{var p=0,P,x;for(p=0;g0(p,h)>1e-20;p+=1);for(P=0,x=p;Math.abs(x-P)>1e-12;)p=(x+P)/2,g0(p,h)>0?P=p:x=p;y=x}{var D=0,K=1e3,G;for(G=0;G<=K;++G){var p=m+G*(y-m)/K,a0=g0(p,h);D+=a0}{var Q=(K+1)/(D*(y-m));return Q}}}function h1(h){var m,y,p,P;return m=h,m>=0?m*=3:m*=1.5,m>=.5&&m<=2.5?(P=m-.5,y=8*(P*P-2*P)):y=0,m+=.474,p=15.811389+7.5*m-17.5*Math.sqrt(1+m*m),p<=-60?0:(m=Math.exp((y+p)*o),m/=.6609193,m)}function _1(h){return h<0&&(h=0),h=h*.001,13*Math.atan(.76*h)+3.5*Math.atan(h*h/(7.5*7.5))}function R1(h,m,y,p,P,x,D,K,G,a0,Q,r0){var f0=X(w.CBANDS+1),I0=K/(r0>15?2*576:2*192),_0=Y(w.HBLKSIZE),T0;K/=G;var e0=0,A0=0;for(T0=0;T0<w.CBANDS;T0++){var H0,l0;for(H0=_1(K*e0),f0[T0]=K*e0,l0=e0;_1(K*l0)-H0<L&&l0<=G/2;l0++);for(h[T0]=l0-e0,A0=T0+1;e0<l0;)$(e0<w.HBLKSIZE),_0[e0++]=T0;if(e0>G/2){e0=G/2,++T0;break}}$(T0<w.CBANDS),f0[T0]=K*e0;for(var R0=0;R0<r0;R0++){var s0,V0,X0,c0,N0;X0=a0[R0],c0=a0[R0+1],s0=0|Math.floor(.5+Q*(X0-.5)),s0<0&&(s0=0),V0=0|Math.floor(.5+Q*(c0-.5)),V0>G/2&&(V0=G/2),y[R0]=(_0[s0]+_0[V0])/2,m[R0]=_0[V0];var C0=I0*c0;D[R0]=(C0-f0[m[R0]])/(f0[m[R0]+1]-f0[m[R0]]),D[R0]<0?D[R0]=0:D[R0]>1&&(D[R0]=1),N0=_1(K*a0[R0]*Q),N0=Math.min(N0,15.5)/15.5,x[R0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*N0))-2.5)}e0=0;for(var P0=0;P0<A0;P0++){var t1=h[P0],H0,z0;H0=_1(K*e0),z0=_1(K*(e0+t1-1)),p[P0]=.5*(H0+z0),H0=_1(K*(e0-.5)),z0=_1(K*(e0+t1-.5)),P[P0]=z0-H0,e0+=t1}return A0}function f1(h,m,y,p,P,x){var D=W([w.CBANDS,w.CBANDS]),K,G=0;if(x)for(var a0=0;a0<m;a0++)for(K=0;K<m;K++){var Q=h1(y[a0]-y[K])*p[K];D[a0][K]=Q*P[a0]}else for(K=0;K<m;K++)for(var r0=15+Math.min(21/y[K],12),f0=s1(r0),a0=0;a0<m;a0++){var Q=f0*g0(y[a0]-y[K],r0)*p[K];D[a0][K]=Q*P[a0]}for(var a0=0;a0<m;a0++){for(K=0;K<m&&!(D[a0][K]>0);K++);for(h[a0][0]=K,K=m-1;K>0&&!(D[a0][K]>0);K--);h[a0][1]=K,G+=h[a0][1]-h[a0][0]+1}for(var I0=X(G),_0=0,a0=0;a0<m;a0++)for(K=h[a0][0];K<=h[a0][1];K++)I0[_0++]=D[a0][K];return I0}function M1(h){var m=_1(h);return m=Math.min(m,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*m))-2.5)}this.psymodel_init=function(h){var m=h.internal_flags,y,p=!0,P=13,x=24,D=0,K=0,G=-8.25,a0=-4.5,Q=X(w.CBANDS),r0=X(w.CBANDS),f0=X(w.CBANDS),I0=h.out_samplerate;switch(h.experimentalZ){default:case 0:p=!0;break;case 1:p=!(h.VBR==A.vbr_mtrh||h.VBR==A.vbr_mt);break;case 2:p=!1;break;case 3:P=8,D=-1.75,K=-.0125,G=-8.25,a0=-2.25;break}for(m.ms_ener_ratio_old=.25,m.blocktype_old[0]=m.blocktype_old[1]=w.NORM_TYPE,y=0;y<4;++y){for(var e0=0;e0<w.CBANDS;++e0)m.nb_1[y][e0]=1e20,m.nb_2[y][e0]=1e20,m.nb_s1[y][e0]=m.nb_s2[y][e0]=1;for(var _0=0;_0<w.SBMAX_l;_0++)m.en[y].l[_0]=1e20,m.thm[y].l[_0]=1e20;for(var e0=0;e0<3;++e0){for(var _0=0;_0<w.SBMAX_s;_0++)m.en[y].s[_0][e0]=1e20,m.thm[y].s[_0][e0]=1e20;m.nsPsy.lastAttacks[y]=0}for(var e0=0;e0<9;e0++)m.nsPsy.last_en_subshort[y][e0]=10}for(m.loudness_sq_save[0]=m.loudness_sq_save[1]=0,m.npart_l=R1(m.numlines_l,m.bo_l,m.bm_l,Q,r0,m.mld_l,m.PSY.bo_l_weight,I0,w.BLKSIZE,m.scalefac_band.l,w.BLKSIZE/(2*576),w.SBMAX_l),$(m.npart_l<w.CBANDS),y=0;y<m.npart_l;y++){var T0=D;Q[y]>=P&&(T0=K*(Q[y]-P)/(x-P)+D*(x-Q[y])/(x-P)),f0[y]=Math.pow(10,T0/10),m.numlines_l[y]>0?m.rnumlines_l[y]=1/m.numlines_l[y]:m.rnumlines_l[y]=0}m.s3_ll=f1(m.s3ind,m.npart_l,Q,r0,f0,p);var e0=0;for(y=0;y<m.npart_l;y++){var A0;A0=J.MAX_VALUE;for(var H0=0;H0<m.numlines_l[y];H0++,e0++){var l0=I0*e0/(1e3*w.BLKSIZE),R0;R0=this.ATHformula(l0*1e3,h)-20,R0=Math.pow(10,.1*R0),R0*=m.numlines_l[y],A0>R0&&(A0=R0)}m.ATH.cb_l[y]=A0,A0=-20+Q[y]*20/10,A0>6&&(A0=100),A0<-15&&(A0=-15),A0-=8,m.minval_l[y]=Math.pow(10,A0/10)*m.numlines_l[y]}for(m.npart_s=R1(m.numlines_s,m.bo_s,m.bm_s,Q,r0,m.mld_s,m.PSY.bo_s_weight,I0,w.BLKSIZE_s,m.scalefac_band.s,w.BLKSIZE_s/(2*192),w.SBMAX_s),$(m.npart_s<w.CBANDS),e0=0,y=0;y<m.npart_s;y++){var A0,T0=G;Q[y]>=P&&(T0=a0*(Q[y]-P)/(x-P)+G*(x-Q[y])/(x-P)),f0[y]=Math.pow(10,T0/10),A0=J.MAX_VALUE;for(var H0=0;H0<m.numlines_s[y];H0++,e0++){var l0=I0*e0/(1e3*w.BLKSIZE_s),R0;R0=this.ATHformula(l0*1e3,h)-20,R0=Math.pow(10,.1*R0),R0*=m.numlines_s[y],A0>R0&&(A0=R0)}m.ATH.cb_s[y]=A0,A0=-7+Q[y]*7/12,Q[y]>12&&(A0*=1+Math.log(1+A0)*3.1),Q[y]<12&&(A0*=1+Math.log(1-A0)*2.3),A0<-15&&(A0=-15),A0-=8,m.minval_s[y]=Math.pow(10,A0/10)*m.numlines_s[y]}m.s3_ss=f1(m.s3ind_s,m.npart_s,Q,r0,f0,p),r(),g.init_fft(m),m.decay=Math.exp(-1*f/(H*I0/192));{var s0;s0=u0,(h.exp_nspsytune&2)!=0&&(s0=1),Math.abs(h.msfix)>0&&(s0=h.msfix),h.msfix=s0;for(var V0=0;V0<m.npart_l;V0++)m.s3ind[V0][1]>m.npart_l-1&&(m.s3ind[V0][1]=m.npart_l-1)}var X0=576*m.mode_gr/I0;if(m.ATH.decay=Math.pow(10,-12/10*X0),m.ATH.adjust=.01,m.ATH.adjustLimit=1,$(m.bo_l[w.SBMAX_l-1]<=m.npart_l),$(m.bo_s[w.SBMAX_s-1]<=m.npart_s),h.ATHtype!=-1){var l0,c0=h.out_samplerate/w.BLKSIZE,N0=0;for(l0=0,y=0;y<w.BLKSIZE/2;++y)l0+=c0,m.ATH.eql_w[y]=1/Math.pow(10,this.ATHformula(l0,h)/10),N0+=m.ATH.eql_w[y];for(N0=1/N0,y=w.BLKSIZE/2;--y>=0;)m.ATH.eql_w[y]*=N0}{for(var V0=e0=0;V0<m.npart_s;++V0)for(y=0;y<m.numlines_s[V0];++y)++e0;$(e0==129);for(var V0=e0=0;V0<m.npart_l;++V0)for(y=0;y<m.numlines_l[V0];++y)++e0;$(e0==513)}for(e0=0,y=0;y<m.npart_l;y++){var l0=I0*(e0+m.numlines_l[y]/2)/(1*w.BLKSIZE);m.mld_cb_l[y]=M1(l0),e0+=m.numlines_l[y]}for(;y<w.CBANDS;++y)m.mld_cb_l[y]=1;for(e0=0,y=0;y<m.npart_s;y++){var l0=I0*(e0+m.numlines_s[y]/2)/(1*w.BLKSIZE_s);m.mld_cb_s[y]=M1(l0),e0+=m.numlines_s[y]}for(;y<w.CBANDS;++y)m.mld_cb_s[y]=1;return 0};function m1(h,m){h<-.3&&(h=3410),h/=1e3,h=Math.max(.1,h);var y=3.64*Math.pow(h,-.8)-6.8*Math.exp(-.6*Math.pow(h-3.4,2))+6*Math.exp(-.15*Math.pow(h-8.7,2))+(.6+.04*m)*.001*Math.pow(h,4);return y}this.ATHformula=function(h,m){var y;switch(m.ATHtype){case 0:y=m1(h,9);break;case 1:y=m1(h,-1);break;case 2:y=m1(h,0);break;case 3:y=m1(h,1)+6;break;case 4:y=m1(h,m.ATHcurve);break;default:y=m1(h,0);break}return y}}return q1=v0,q1}var X1,Ne;function Ma(){if(Ne)return X1;Ne=1;var _=S1();function A(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=_.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}return X1=A,X1}var Y1,He;function y1(){if(He)return Y1;He=1;var _=$0(),A={};return A.SFBMAX=_.SBMAX_s*3,Y1=A,Y1}var G1,Ce;function D1(){if(Ce)return G1;Ce=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var A=_.new_float;_.new_float_n;var J=_.new_int;_.new_int_n,_.assert;var k=y1();function j(){this.xr=A(576),this.l3_enc=J(576),this.scalefac=J(k.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=J(3),this.subblock_gain=J(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=J(k.SFBMAX),this.window=J(k.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=J(4),this.max_nonzero_coeff=0;var U=this;function X(Y){return new Int32Array(Y)}function W(Y){return new Float32Array(Y)}this.assign=function(Y){U.xr=W(Y.xr),U.l3_enc=X(Y.l3_enc),U.scalefac=X(Y.scalefac),U.xrpow_max=Y.xrpow_max,U.part2_3_length=Y.part2_3_length,U.big_values=Y.big_values,U.count1=Y.count1,U.global_gain=Y.global_gain,U.scalefac_compress=Y.scalefac_compress,U.block_type=Y.block_type,U.mixed_block_flag=Y.mixed_block_flag,U.table_select=X(Y.table_select),U.subblock_gain=X(Y.subblock_gain),U.region0_count=Y.region0_count,U.region1_count=Y.region1_count,U.preflag=Y.preflag,U.scalefac_scale=Y.scalefac_scale,U.count1table_select=Y.count1table_select,U.part2_length=Y.part2_length,U.sfb_lmax=Y.sfb_lmax,U.sfb_smin=Y.sfb_smin,U.psy_lmax=Y.psy_lmax,U.sfbmax=Y.sfbmax,U.psymax=Y.psymax,U.sfbdivide=Y.sfbdivide,U.width=X(Y.width),U.window=X(Y.window),U.count1bits=Y.count1bits,U.sfb_partition_table=Y.sfb_partition_table.slice(0),U.slen=X(Y.slen),U.max_nonzero_coeff=Y.max_nonzero_coeff}}return G1=j,G1}var U1,Oe;function xa(){if(Oe)return U1;Oe=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var A=_.new_int;_.new_int_n,_.assert;var J=D1();function k(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[A(4),A(4)];for(var j=0;j<2;j++)for(var U=0;U<2;U++)this.tt[j][U]=new J}return U1=k,U1}var P1,Fe;function ke(){if(Fe)return P1;Fe=1;var _=G0(),A=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var J=_.new_int;_.new_int_n,_.assert;var k=$0();function j(U,X,W,Y){this.l=J(1+k.SBMAX_l),this.s=J(1+k.SBMAX_s),this.psfb21=J(1+k.PSFB21),this.psfb12=J(1+k.PSFB12);var $=this.l,B=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],A.arraycopy(this.arrL,0,$,0,Math.min(this.arrL.length,this.l.length)),A.arraycopy(this.arrS,0,B,0,Math.min(this.arrS.length,this.s.length)),A.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),A.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}return P1=j,P1}var Z1,qe;function Ea(){if(qe)return Z1;qe=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var A=_.new_float,J=_.new_float_n,k=_.new_int;_.new_int_n,_.assert;var j=$0();function U(){this.last_en_subshort=J([4,9]),this.lastAttacks=k(4),this.pefirbuf=A(19),this.longfact=A(j.SBMAX_l),this.shortfact=A(j.SBMAX_s),this.attackthre=0,this.attackthre_s=0}return Z1=U,Z1}var K1,Xe;function Ba(){if(Xe)return K1;Xe=1;function _(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}return K1=_,K1}var Q1,Ye;function I1(){if(Ye)return Q1;Ye=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n;var A=_.new_byte,J=_.new_double,k=_.new_float,j=_.new_float_n,U=_.new_int,X=_.new_int_n;_.assert;var W=xa(),Y=ke(),$=Ea(),B=Ba(),w=Te(),v0=$0(),I=y1();g.MFSIZE=3*1152+v0.ENCDELAY-v0.MDCTDELAY,g.MAX_HEADER_BUF=256,g.MAX_BITS_PER_CHANNEL=4095,g.MAX_BITS_PER_GRANULE=7680,g.BPC=320;function g(){var f=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=j([2,g.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new W,this.ms_ratio=k(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=U(2),this.CurrentStep=U(2),this.masking_lower=0,this.bv_scf=U(576),this.pseudohalf=U(I.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*g.BPC+1),this.itime=J(2),this.sideinfo_len=0,this.sb_sample=j([2,2,18,v0.SBLIMIT]),this.amp_filter=k(32);function N(){this.write_timing=0,this.ptr=0,this.buf=A(f)}this.header=new Array(g.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Y,this.minval_l=k(v0.CBANDS),this.minval_s=k(v0.CBANDS),this.nb_1=j([4,v0.CBANDS]),this.nb_2=j([4,v0.CBANDS]),this.nb_s1=j([4,v0.CBANDS]),this.nb_s2=j([4,v0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=k(4),this.loudness_sq=j([2,2]),this.loudness_sq_save=k(2),this.mld_l=k(v0.SBMAX_l),this.mld_s=k(v0.SBMAX_s),this.bm_l=U(v0.SBMAX_l),this.bo_l=U(v0.SBMAX_l),this.bm_s=U(v0.SBMAX_s),this.bo_s=U(v0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=X([v0.CBANDS,2]),this.s3ind_s=X([v0.CBANDS,2]),this.numlines_s=U(v0.CBANDS),this.numlines_l=U(v0.CBANDS),this.rnumlines_l=k(v0.CBANDS),this.mld_cb_l=k(v0.CBANDS),this.mld_cb_s=k(v0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=k(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=U(2),this.nsPsy=new $,this.VBR_seek_table=new B,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=X([16,5]),this.bitrate_blockType_Hist=X([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var b=0;b<this.en.length;b++)this.en[b]=new w;for(var b=0;b<this.thm.length;b++)this.thm[b]=new w;for(var b=0;b<this.header.length;b++)this.header[b]=new N}return Q1=g,Q1}var W1,Ge;function wa(){if(Ge)return W1;Ge=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var A=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var J=$0();function k(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=A(J.SBMAX_l),this.s=A(J.SBMAX_s),this.psfb21=A(J.PSFB21),this.psfb12=A(J.PSFB12),this.cb_l=A(J.CBANDS),this.cb_s=A(J.CBANDS),this.eql_w=A(J.BLKSIZE/2)}return W1=k,W1}var z1,De;function Ue(){if(De)return z1;De=1;var _=G0(),A=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var J=_.Arrays;_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n,_.assert,k.STEPS_per_dB=100,k.MAX_dB=120,k.GAIN_NOT_ENOUGH_SAMPLES=-24601,k.GAIN_ANALYSIS_ERROR=0,k.GAIN_ANALYSIS_OK=1,k.INIT_GAIN_ANALYSIS_ERROR=0,k.INIT_GAIN_ANALYSIS_OK=1,k.YULE_ORDER=10,k.MAX_ORDER=k.YULE_ORDER,k.MAX_SAMP_FREQ=48e3,k.RMS_WINDOW_TIME_NUMERATOR=1,k.RMS_WINDOW_TIME_DENOMINATOR=20,k.MAX_SAMPLES_PER_WINDOW=k.MAX_SAMP_FREQ*k.RMS_WINDOW_TIME_NUMERATOR/k.RMS_WINDOW_TIME_DENOMINATOR+1;function k(){var j=64.82;k.YULE_ORDER;var U=.95;k.MAX_SAMP_FREQ;var X=k.RMS_WINDOW_TIME_NUMERATOR,W=k.RMS_WINDOW_TIME_DENOMINATOR;k.MAX_SAMPLES_PER_WINDOW;var Y=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],$=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function B(f,N,b,V,t,L){for(;t--!=0;)b[V]=1e-10+f[N+0]*L[0]-b[V-1]*L[1]+f[N-1]*L[2]-b[V-2]*L[3]+f[N-2]*L[4]-b[V-3]*L[5]+f[N-3]*L[6]-b[V-4]*L[7]+f[N-4]*L[8]-b[V-5]*L[9]+f[N-5]*L[10]-b[V-6]*L[11]+f[N-6]*L[12]-b[V-7]*L[13]+f[N-7]*L[14]-b[V-8]*L[15]+f[N-8]*L[16]-b[V-9]*L[17]+f[N-9]*L[18]-b[V-10]*L[19]+f[N-10]*L[20],++V,++N}function w(f,N,b,V,t,L){for(;t--!=0;)b[V]=f[N+0]*L[0]-b[V-1]*L[1]+f[N-1]*L[2]-b[V-2]*L[3]+f[N-2]*L[4],++V,++N}function v0(f,N){for(var b=0;b<MAX_ORDER;b++)f.linprebuf[b]=f.lstepbuf[b]=f.loutbuf[b]=f.rinprebuf[b]=f.rstepbuf[b]=f.routbuf[b]=0;switch(0|N){case 48e3:f.reqindex=0;break;case 44100:f.reqindex=1;break;case 32e3:f.reqindex=2;break;case 24e3:f.reqindex=3;break;case 22050:f.reqindex=4;break;case 16e3:f.reqindex=5;break;case 12e3:f.reqindex=6;break;case 11025:f.reqindex=7;break;case 8e3:f.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return f.sampleWindow=0|(N*X+W-1)/W,f.lsum=0,f.rsum=0,f.totsamp=0,J.ill(f.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(f,N){return v0(f,N)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(f.linpre=MAX_ORDER,f.rinpre=MAX_ORDER,f.lstep=MAX_ORDER,f.rstep=MAX_ORDER,f.lout=MAX_ORDER,f.rout=MAX_ORDER,J.fill(f.B,0),INIT_GAIN_ANALYSIS_OK)};function I(f){return f*f}this.AnalyzeSamples=function(f,N,b,V,t,L,Z){var H,O,F,z,u0,i0,o;if(L==0)return GAIN_ANALYSIS_OK;switch(o=0,u0=L,Z){case 1:V=N,t=b;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(L<MAX_ORDER?(A.arraycopy(N,b,f.linprebuf,MAX_ORDER,L),A.arraycopy(V,t,f.rinprebuf,MAX_ORDER,L)):(A.arraycopy(N,b,f.linprebuf,MAX_ORDER,MAX_ORDER),A.arraycopy(V,t,f.rinprebuf,MAX_ORDER,MAX_ORDER));u0>0;){i0=u0>f.sampleWindow-f.totsamp?f.sampleWindow-f.totsamp:u0,o<MAX_ORDER?(H=f.linpre+o,O=f.linprebuf,F=f.rinpre+o,z=f.rinprebuf,i0>MAX_ORDER-o&&(i0=MAX_ORDER-o)):(H=b+o,O=N,F=t+o,z=V),B(O,H,f.lstepbuf,f.lstep+f.totsamp,i0,Y[f.reqindex]),B(z,F,f.rstepbuf,f.rstep+f.totsamp,i0,Y[f.reqindex]),w(f.lstepbuf,f.lstep+f.totsamp,f.loutbuf,f.lout+f.totsamp,i0,$[f.reqindex]),w(f.rstepbuf,f.rstep+f.totsamp,f.routbuf,f.rout+f.totsamp,i0,$[f.reqindex]),H=f.lout+f.totsamp,O=f.loutbuf,F=f.rout+f.totsamp,z=f.routbuf;for(var w0=i0%8;w0--!=0;)f.lsum+=I(O[H++]),f.rsum+=I(z[F++]);for(w0=i0/8;w0--!=0;)f.lsum+=I(O[H+0])+I(O[H+1])+I(O[H+2])+I(O[H+3])+I(O[H+4])+I(O[H+5])+I(O[H+6])+I(O[H+7]),H+=8,f.rsum+=I(z[F+0])+I(z[F+1])+I(z[F+2])+I(z[F+3])+I(z[F+4])+I(z[F+5])+I(z[F+6])+I(z[F+7]),F+=8;if(u0-=i0,o+=i0,f.totsamp+=i0,f.totsamp==f.sampleWindow){var o0=k.STEPS_per_dB*10*Math.log10((f.lsum+f.rsum)/f.totsamp*.5+1e-37),S=o0<=0?0:0|o0;S>=f.A.length&&(S=f.A.length-1),f.A[S]++,f.lsum=f.rsum=0,A.arraycopy(f.loutbuf,f.totsamp,f.loutbuf,0,MAX_ORDER),A.arraycopy(f.routbuf,f.totsamp,f.routbuf,0,MAX_ORDER),A.arraycopy(f.lstepbuf,f.totsamp,f.lstepbuf,0,MAX_ORDER),A.arraycopy(f.rstepbuf,f.totsamp,f.rstepbuf,0,MAX_ORDER),f.totsamp=0}if(f.totsamp>f.sampleWindow)return GAIN_ANALYSIS_ERROR}return L<MAX_ORDER?(A.arraycopy(f.linprebuf,L,f.linprebuf,0,MAX_ORDER-L),A.arraycopy(f.rinprebuf,L,f.rinprebuf,0,MAX_ORDER-L),A.arraycopy(N,b,f.linprebuf,MAX_ORDER-L,L),A.arraycopy(V,t,f.rinprebuf,MAX_ORDER-L,L)):(A.arraycopy(N,b+L-MAX_ORDER,f.linprebuf,0,MAX_ORDER),A.arraycopy(V,t+L-MAX_ORDER,f.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function g(f,N){var b,V=0;for(b=0;b<N;b++)V+=f[b];if(V==0)return GAIN_NOT_ENOUGH_SAMPLES;var t=0|Math.ceil(V*(1-U));for(b=N;b-- >0&&!((t-=f[b])<=0););return j-b/k.STEPS_per_dB}this.GetTitleGain=function(f){for(var N=g(f.A,f.A.length),b=0;b<f.A.length;b++)f.B[b]+=f.A[b],f.A[b]=0;for(var b=0;b<MAX_ORDER;b++)f.linprebuf[b]=f.lstepbuf[b]=f.loutbuf[b]=f.rinprebuf[b]=f.rstepbuf[b]=f.routbuf[b]=0;return f.totsamp=0,f.lsum=f.rsum=0,N}}return z1=k,z1}var j1,Pe;function Ta(){if(Pe)return j1;Pe=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var A=_.new_float;_.new_float_n;var J=_.new_int;_.new_int_n,_.assert;var k=Ue();function j(){this.linprebuf=A(k.MAX_ORDER*2),this.linpre=0,this.lstepbuf=A(k.MAX_SAMPLES_PER_WINDOW+k.MAX_ORDER),this.lstep=0,this.loutbuf=A(k.MAX_SAMPLES_PER_WINDOW+k.MAX_ORDER),this.lout=0,this.rinprebuf=A(k.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=A(k.MAX_SAMPLES_PER_WINDOW+k.MAX_ORDER),this.rstep=0,this.routbuf=A(k.MAX_SAMPLES_PER_WINDOW+k.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=J(0|k.STEPS_per_dB*k.MAX_dB),this.B=J(0|k.STEPS_per_dB*k.MAX_dB)}return j1=j,j1}var J1,Ze;function Ke(){if(Ze)return J1;Ze=1;function _(A){this.bits=A}return J1=_,J1}var $1,Qe;function ya(){if(Qe)return $1;Qe=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var A=_.new_float;_.new_float_n;var J=_.new_int;_.new_int_n;var k=_.assert,j=Ke(),U=$0(),X=y1(),W=I1();function Y($){var B=$;this.quantize=B,this.iteration_loop=function(w,v0,I,g){var f=w.internal_flags,N=A(X.SFBMAX),b=A(576),V=J(2),t=0,L,Z=f.l3_side,H=new j(t);this.quantize.rv.ResvFrameBegin(w,H),t=H.bits;for(var O=0;O<f.mode_gr;O++){L=this.quantize.qupvt.on_pe(w,v0,V,t,O,O),f.mode_ext==U.MPG_MD_MS_LR&&(this.quantize.ms_convert(f.l3_side,O),this.quantize.qupvt.reduce_side(V,I[O],t,L));for(var F=0;F<f.channels_out;F++){var z,u0,i0=Z.tt[O][F];i0.block_type!=U.SHORT_TYPE?(z=0,u0=f.PSY.mask_adjust-z):(z=0,u0=f.PSY.mask_adjust_short-z),f.masking_lower=Math.pow(10,u0*.1),this.quantize.init_outer_loop(f,i0),this.quantize.init_xrpow(f,i0,b)&&(this.quantize.qupvt.calc_xmin(w,g[O][F],i0,N),this.quantize.outer_loop(w,i0,N,b,F,V[F])),this.quantize.iteration_finish_one(f,O,F),k(i0.part2_3_length<=W.MAX_BITS_PER_CHANNEL),k(i0.part2_3_length<=V[F])}}this.quantize.rv.ResvFrameEnd(f,t)}}return $1=Y,$1}var g1,We;function ee(){if(We)return g1;We=1;function _(J,k,j,U){this.xlen=J,this.linmax=k,this.table=j,this.hlen=U}var A={};return A.t1HB=[1,1,1,0],A.t2HB=[1,2,1,3,1,1,3,2,0],A.t3HB=[3,2,1,1,1,1,3,2,0],A.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],A.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],A.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],A.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],A.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],A.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],A.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],A.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],A.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],A.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],A.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],A.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],A.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],A.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],A.t1l=[1,4,3,5],A.t2l=[1,4,7,4,5,7,6,7,8],A.t3l=[2,3,7,4,4,7,6,7,8],A.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],A.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],A.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],A.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],A.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],A.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],A.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],A.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],A.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],A.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],A.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],A.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],A.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],A.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],A.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],A.ht=[new _(0,0,null,null),new _(2,0,A.t1HB,A.t1l),new _(3,0,A.t2HB,A.t2l),new _(3,0,A.t3HB,A.t3l),new _(0,0,null,null),new _(4,0,A.t5HB,A.t5l),new _(4,0,A.t6HB,A.t6l),new _(6,0,A.t7HB,A.t7l),new _(6,0,A.t8HB,A.t8l),new _(6,0,A.t9HB,A.t9l),new _(8,0,A.t10HB,A.t10l),new _(8,0,A.t11HB,A.t11l),new _(8,0,A.t12HB,A.t12l),new _(16,0,A.t13HB,A.t13l),new _(0,0,null,A.t16_5l),new _(16,0,A.t15HB,A.t15l),new _(1,1,A.t16HB,A.t16l),new _(2,3,A.t16HB,A.t16l),new _(3,7,A.t16HB,A.t16l),new _(4,15,A.t16HB,A.t16l),new _(6,63,A.t16HB,A.t16l),new _(8,255,A.t16HB,A.t16l),new _(10,1023,A.t16HB,A.t16l),new _(13,8191,A.t16HB,A.t16l),new _(4,15,A.t24HB,A.t24l),new _(5,31,A.t24HB,A.t24l),new _(6,63,A.t24HB,A.t24l),new _(7,127,A.t24HB,A.t24l),new _(8,255,A.t24HB,A.t24l),new _(9,511,A.t24HB,A.t24l),new _(11,2047,A.t24HB,A.t24l),new _(13,8191,A.t24HB,A.t24l),new _(0,0,A.t32HB,A.t32l),new _(0,0,A.t33HB,A.t33l)],A.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],A.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],A.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],A.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],A.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],A.scfsi_band=[0,6,11,16,21],g1=A,g1}var ae,ze;function je(){if(ze)return ae;ze=1;var _=ke(),A=G0();A.System;var J=A.VbrMode,k=A.Float;A.ShortBlock;var j=A.Util;A.Arrays,A.new_array_n,A.new_byte,A.new_double;var U=A.new_float;A.new_float_n;var X=A.new_int;A.new_int_n;var W=A.assert,Y=$0(),$=Ke(),B=I1();w.Q_MAX=257,w.Q_MAX2=116,w.LARGE_BITS=1e5,w.IXMAX_VAL=8206;function w(){var v0=ne(),I=null,g=null,f=null;this.setModules=function(S,l,c){I=S,g=l,f=c};function N(S){return W(0<=S+w.Q_MAX2&&S<w.Q_MAX),F[S+w.Q_MAX2]}this.IPOW20=function(S){return W(0<=S&&S<w.Q_MAX),z[S]};var b=2220446049250313e-31,V=w.IXMAX_VAL,t=V+2,L=w.Q_MAX,Z=w.Q_MAX2;w.LARGE_BITS;var H=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var O=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=O,this.sfBandIndex=[new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var F=U(L+Z+1),z=U(L),u0=U(t),i0=U(t);this.adj43=i0;function o(S,l){var c=f.ATHformula(l,S);return c-=H,c=Math.pow(10,c/10+S.ATHlower),c}function w0(S){for(var l=S.internal_flags.ATH.l,c=S.internal_flags.ATH.psfb21,R=S.internal_flags.ATH.s,q=S.internal_flags.ATH.psfb12,u=S.internal_flags,n=S.out_samplerate,e=0;e<Y.SBMAX_l;e++){var r=u.scalefac_band.l[e],a=u.scalefac_band.l[e+1];l[e]=k.MAX_VALUE;for(var i=r;i<a;i++){var d=i*n/1152,M=o(S,d);l[e]=Math.min(l[e],M)}}for(var e=0;e<Y.PSFB21;e++){var r=u.scalefac_band.psfb21[e],a=u.scalefac_band.psfb21[e+1];c[e]=k.MAX_VALUE;for(var i=r;i<a;i++){var d=i*n/1152,M=o(S,d);c[e]=Math.min(c[e],M)}}for(var e=0;e<Y.SBMAX_s;e++){var r=u.scalefac_band.s[e],a=u.scalefac_band.s[e+1];R[e]=k.MAX_VALUE;for(var i=r;i<a;i++){var d=i*n/384,M=o(S,d);R[e]=Math.min(R[e],M)}R[e]*=u.scalefac_band.s[e+1]-u.scalefac_band.s[e]}for(var e=0;e<Y.PSFB12;e++){var r=u.scalefac_band.psfb12[e],a=u.scalefac_band.psfb12[e+1];q[e]=k.MAX_VALUE;for(var i=r;i<a;i++){var d=i*n/384,M=o(S,d);q[e]=Math.min(q[e],M)}q[e]*=u.scalefac_band.s[13]-u.scalefac_band.s[12]}if(S.noATH){for(var e=0;e<Y.SBMAX_l;e++)l[e]=1e-20;for(var e=0;e<Y.PSFB21;e++)c[e]=1e-20;for(var e=0;e<Y.SBMAX_s;e++)R[e]=1e-20;for(var e=0;e<Y.PSFB12;e++)q[e]=1e-20}u.ATH.floor=10*Math.log10(o(S,-1))}this.iteration_init=function(S){var l=S.internal_flags,c=l.l3_side,R;if(l.iteration_init_init==0){for(l.iteration_init_init=1,c.main_data_begin=0,w0(S),u0[0]=0,R=1;R<t;R++)u0[R]=Math.pow(R,4/3);for(R=0;R<t-1;R++)i0[R]=R+1-Math.pow(.5*(u0[R]+u0[R+1]),.75);for(i0[R]=.5,R=0;R<L;R++)z[R]=Math.pow(2,(R-210)*-.1875);for(R=0;R<=L+Z;R++)F[R]=Math.pow(2,(R-210-Z)*.25);I.huffman_init(l);{var q,u,n,e;for(R=S.exp_nspsytune>>2&63,R>=32&&(R-=64),q=Math.pow(10,R/4/10),R=S.exp_nspsytune>>8&63,R>=32&&(R-=64),u=Math.pow(10,R/4/10),R=S.exp_nspsytune>>14&63,R>=32&&(R-=64),n=Math.pow(10,R/4/10),R=S.exp_nspsytune>>20&63,R>=32&&(R-=64),e=n*Math.pow(10,R/4/10),R=0;R<Y.SBMAX_l;R++){var r;R<=6?r=q:R<=13?r=u:R<=20?r=n:r=e,l.nsPsy.longfact[R]=r}for(R=0;R<Y.SBMAX_s;R++){var r;R<=5?r=q:R<=10?r=u:R<=11?r=n:r=e,l.nsPsy.shortfact[R]=r}}}},this.on_pe=function(S,l,c,R,q,u){var n=S.internal_flags,e=0,r,a=X(2),i,d=new $(e),M=g.ResvMaxBits(S,R,d,u);e=d.bits;var T=e+M;for(T>B.MAX_BITS_PER_GRANULE&&(T=B.MAX_BITS_PER_GRANULE),r=0,i=0;i<n.channels_out;++i)c[i]=Math.min(B.MAX_BITS_PER_CHANNEL,e/n.channels_out),a[i]=0|c[i]*l[q][i]/700-c[i],a[i]>R*3/4&&(a[i]=R*3/4),a[i]<0&&(a[i]=0),a[i]+c[i]>B.MAX_BITS_PER_CHANNEL&&(a[i]=Math.max(0,B.MAX_BITS_PER_CHANNEL-c[i])),r+=a[i];if(r>M)for(i=0;i<n.channels_out;++i)a[i]=M*a[i]/r;for(i=0;i<n.channels_out;++i)c[i]+=a[i],M-=a[i];for(r=0,i=0;i<n.channels_out;++i)r+=c[i];if(r>B.MAX_BITS_PER_GRANULE){var E=0;for(i=0;i<n.channels_out;++i)c[i]*=B.MAX_BITS_PER_GRANULE,c[i]/=r,E+=c[i];W(E<=B.MAX_BITS_PER_GRANULE)}return T},this.reduce_side=function(S,l,c,R){W(R<=B.MAX_BITS_PER_GRANULE),W(S[0]+S[1]<=B.MAX_BITS_PER_GRANULE);var q=.33*(.5-l)/.5;q<0&&(q=0),q>.5&&(q=.5);var u=0|q*.5*(S[0]+S[1]);u>B.MAX_BITS_PER_CHANNEL-S[0]&&(u=B.MAX_BITS_PER_CHANNEL-S[0]),u<0&&(u=0),S[1]>=125&&(S[1]-u>125?(S[0]<c&&(S[0]+=u),S[1]-=u):(S[0]+=S[1]-125,S[1]=125)),u=S[0]+S[1],u>R&&(S[0]=R*S[0]/u,S[1]=R*S[1]/u),W(S[0]<=B.MAX_BITS_PER_CHANNEL),W(S[1]<=B.MAX_BITS_PER_CHANNEL),W(S[0]+S[1]<=B.MAX_BITS_PER_GRANULE)},this.athAdjust=function(S,l,c){var R=90.30873362,q=94.82444863,u=j.FAST_LOG10_X(l,10),n=S*S,e=0;return u-=c,n>1e-20&&(e=1+j.FAST_LOG10_X(n,10/R)),e<0&&(e=0),u*=e,u+=c+R-q,Math.pow(10,.1*u)},this.calc_xmin=function(S,l,c,R){var q=0,u=S.internal_flags,n,e=0,r=0,a=u.ATH,i=c.xr,d=S.VBR==J.vbr_mtrh?1:0,M=u.masking_lower;for((S.VBR==J.vbr_mtrh||S.VBR==J.vbr_mt)&&(M=1),n=0;n<c.psy_lmax;n++){var T,E,C,t0,n0,M0;S.VBR==J.vbr_rh||S.VBR==J.vbr_mtrh?E=athAdjust(a.adjust,a.l[n],a.floor):E=a.adjust*a.l[n],n0=c.width[n],C=E/n0,t0=b,M0=n0>>1,T=0;do{var b0,d0;b0=i[e]*i[e],T+=b0,t0+=b0<C?b0:C,e++,d0=i[e]*i[e],T+=d0,t0+=d0<C?d0:C,e++}while(--M0>0);if(T>E&&r++,n==Y.SBPSY_l){var x0=E*u.nsPsy.longfact[n];t0<x0&&(t0=x0)}if(d!=0&&(E=t0),!S.ATHonly){var O0=l.en.l[n];if(O0>0){var x0;x0=T*l.thm.l[n]*M/O0,d!=0&&(x0*=u.nsPsy.longfact[n]),E<x0&&(E=x0)}}d!=0?R[q++]=E:R[q++]=E*u.nsPsy.longfact[n]}var Q0=575;if(c.block_type!=Y.SHORT_TYPE)for(var s=576;s--!=0&&v0.EQ(i[s],0);)Q0=s;c.max_nonzero_coeff=Q0;for(var v=c.sfb_smin;n<c.psymax;v++,n+=3){var n0,m0,S0;for(S.VBR==J.vbr_rh||S.VBR==J.vbr_mtrh?S0=athAdjust(a.adjust,a.s[v],a.floor):S0=a.adjust*a.s[v],n0=c.width[n],m0=0;m0<3;m0++){var T=0,E,C,t0,M0=n0>>1;C=S0/n0,t0=b;do{var b0,d0;b0=i[e]*i[e],T+=b0,t0+=b0<C?b0:C,e++,d0=i[e]*i[e],T+=d0,t0+=d0<C?d0:C,e++}while(--M0>0);if(T>S0&&r++,v==Y.SBPSY_s){var x0=S0*u.nsPsy.shortfact[v];t0<x0&&(t0=x0)}if(d!=0?E=t0:E=S0,!S.ATHonly&&!S.ATHshort){var O0=l.en.s[v][m0];if(O0>0){var x0;x0=T*l.thm.s[v][m0]*M/O0,d!=0&&(x0*=u.nsPsy.shortfact[v]),E<x0&&(E=x0)}}d!=0?R[q++]=E:R[q++]=E*u.nsPsy.shortfact[v]}S.useTemporal&&(R[q-3]>R[q-3+1]&&(R[q-3+1]+=(R[q-3]-R[q-3+1])*u.decay),R[q-3+1]>R[q-3+2]&&(R[q-3+2]+=(R[q-3+1]-R[q-3+2])*u.decay))}return r};function o0(S){this.s=S}this.calc_noise_core=function(S,l,c,R){var q=0,u=l.s,n=S.l3_enc;if(u>S.count1)for(;c--!=0;){var e;e=S.xr[u],u++,q+=e*e,e=S.xr[u],u++,q+=e*e}else if(u>S.big_values){var r=U(2);for(r[0]=0,r[1]=R;c--!=0;){var e;e=Math.abs(S.xr[u])-r[n[u]],u++,q+=e*e,e=Math.abs(S.xr[u])-r[n[u]],u++,q+=e*e}}else for(;c--!=0;){var e;e=Math.abs(S.xr[u])-u0[n[u]]*R,u++,q+=e*e,e=Math.abs(S.xr[u])-u0[n[u]]*R,u++,q+=e*e}return l.s=u,q},this.calc_noise=function(S,l,c,R,q){var u=0,n=0,e,r,a=0,i=0,d=0,M=-20,T=0,E=S.scalefac,C=0;for(R.over_SSD=0,e=0;e<S.psymax;e++){var t0=S.global_gain-(E[C++]+(S.preflag!=0?O[e]:0)<<S.scalefac_scale+1)-S.subblock_gain[S.window[e]]*8,n0=0;if(q!=null&&q.step[e]==t0)n0=q.noise[e],T+=S.width[e],c[u++]=n0/l[n++],n0=q.noise_log[e];else{var M0=N(t0);if(r=S.width[e]>>1,T+S.width[e]>S.max_nonzero_coeff){var b0;b0=S.max_nonzero_coeff-T+1,b0>0?r=b0>>1:r=0}var d0=new o0(T);n0=this.calc_noise_core(S,d0,r,M0),T=d0.s,q!=null&&(q.step[e]=t0,q.noise[e]=n0),n0=c[u++]=n0/l[n++],n0=j.FAST_LOG10(Math.max(n0,1e-20)),q!=null&&(q.noise_log[e]=n0)}if(q!=null&&(q.global_gain=S.global_gain),d+=n0,n0>0){var x0;x0=Math.max(0|n0*10+.5,1),R.over_SSD+=x0*x0,a++,i+=n0}M=Math.max(M,n0)}return R.over_count=a,R.tot_noise=d,R.over_noise=i,R.max_noise=M,a},this.set_pinfo=function(S,l,c,R,q){var u=S.internal_flags,n,e,r,a,i,d=l.scalefac_scale==0?.5:1,M=l.scalefac,T=U(L3Side.SFBMAX),E=U(L3Side.SFBMAX),C=new CalcNoiseResult;calc_xmin(S,c,l,T),calc_noise(l,T,E,C,null);var t0=0;for(e=l.sfb_lmax,l.block_type!=Y.SHORT_TYPE&&l.mixed_block_flag==0&&(e=22),n=0;n<e;n++){var n0=u.scalefac_band.l[n],M0=u.scalefac_band.l[n+1],b0=M0-n0;for(a=0;t0<M0;t0++)a+=l.xr[t0]*l.xr[t0];a/=b0,i=1e15,u.pinfo.en[R][q][n]=i*a,u.pinfo.xfsf[R][q][n]=i*T[n]*E[n]/b0,c.en.l[n]>0&&!S.ATHonly?a=a/c.en.l[n]:a=0,u.pinfo.thr[R][q][n]=i*Math.max(a*c.thm.l[n],u.ATH.l[n]),u.pinfo.LAMEsfb[R][q][n]=0,l.preflag!=0&&n>=11&&(u.pinfo.LAMEsfb[R][q][n]=-d*O[n]),n<Y.SBPSY_l&&(W(M[n]>=0),u.pinfo.LAMEsfb[R][q][n]-=d*M[n])}if(l.block_type==Y.SHORT_TYPE)for(e=n,n=l.sfb_smin;n<Y.SBMAX_s;n++)for(var n0=u.scalefac_band.s[n],M0=u.scalefac_band.s[n+1],b0=M0-n0,d0=0;d0<3;d0++){for(a=0,r=n0;r<M0;r++)a+=l.xr[t0]*l.xr[t0],t0++;a=Math.max(a/b0,1e-20),i=1e15,u.pinfo.en_s[R][q][3*n+d0]=i*a,u.pinfo.xfsf_s[R][q][3*n+d0]=i*T[e]*E[e]/b0,c.en.s[n][d0]>0?a=a/c.en.s[n][d0]:a=0,(S.ATHonly||S.ATHshort)&&(a=0),u.pinfo.thr_s[R][q][3*n+d0]=i*Math.max(a*c.thm.s[n][d0],u.ATH.s[n]),u.pinfo.LAMEsfb_s[R][q][3*n+d0]=-2*l.subblock_gain[d0],n<Y.SBPSY_s&&(u.pinfo.LAMEsfb_s[R][q][3*n+d0]-=d*M[e]),e++}u.pinfo.LAMEqss[R][q]=l.global_gain,u.pinfo.LAMEmainbits[R][q]=l.part2_3_length+l.part2_length,u.pinfo.LAMEsfbits[R][q]=l.part2_length,u.pinfo.over[R][q]=C.over_count,u.pinfo.max_noise[R][q]=C.max_noise*10,u.pinfo.over_noise[R][q]=C.over_noise*10,u.pinfo.tot_noise[R][q]=C.tot_noise*10,u.pinfo.over_SSD[R][q]=C.over_SSD}}return ae=w,ae}var re,Je;function $e(){if(Je)return re;Je=1;var _=G0(),A=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var J=_.Arrays;_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var k=_.new_int;_.new_int_n;var j=_.assert,U=$0(),X=ee(),W=D1(),Y=je();function $(){var B=null;this.qupvt=null,this.setModules=function(u){this.qupvt=u,B=u};function w(u){this.bits=0|u}var v0=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function I(u,n,e,r,a,i){var d=.5946/n;for(j(u>0),u=u>>1;u--!=0;)a[i++]=d>e[r++]?0:1,a[i++]=d>e[r++]?0:1}function g(u,n,e,r,a,i){j(u>0),u=u>>1;var d=u%2;for(u=u>>1;u--!=0;){var M,T,E,C,t0,n0,M0,b0;M=e[r++]*n,T=e[r++]*n,t0=0|M,E=e[r++]*n,n0=0|T,C=e[r++]*n,M0=0|E,M+=B.adj43[t0],b0=0|C,T+=B.adj43[n0],a[i++]=0|M,E+=B.adj43[M0],a[i++]=0|T,C+=B.adj43[b0],a[i++]=0|E,a[i++]=0|C}if(d!=0){var M,T,t0,n0;M=e[r++]*n,T=e[r++]*n,t0=0|M,n0=0|T,M+=B.adj43[t0],T+=B.adj43[n0],a[i++]=0|M,a[i++]=0|T}}function f(u,n,e,r,a){var i,d,M=0,T,E=0,C=0,t0=0,n0=n,M0=0,b0=n0,d0=0,x0=u,O0=0;for(T=a!=null&&r.global_gain==a.global_gain,r.block_type==U.SHORT_TYPE?d=38:d=21,i=0;i<=d;i++){var Q0=-1;if((T||r.block_type==U.NORM_TYPE)&&(Q0=r.global_gain-(r.scalefac[i]+(r.preflag!=0?B.pretab[i]:0)<<r.scalefac_scale+1)-r.subblock_gain[r.window[i]]*8),j(r.width[i]>=0),T&&a.step[i]==Q0)E!=0&&(g(E,e,x0,O0,b0,d0),E=0),C!=0&&(I(C,e,x0,O0,b0,d0),C=0);else{var s=r.width[i];if(M+r.width[i]>r.max_nonzero_coeff){var v;v=r.max_nonzero_coeff-M+1,J.fill(n,r.max_nonzero_coeff,576,0),s=v,s<0&&(s=0),i=d+1}if(E==0&&C==0&&(b0=n0,d0=M0,x0=u,O0=t0),a!=null&&a.sfb_count1>0&&i>=a.sfb_count1&&a.step[i]>0&&Q0>=a.step[i]?(E!=0&&(g(E,e,x0,O0,b0,d0),E=0,b0=n0,d0=M0,x0=u,O0=t0),C+=s):(C!=0&&(I(C,e,x0,O0,b0,d0),C=0,b0=n0,d0=M0,x0=u,O0=t0),E+=s),s<=0){C!=0&&(I(C,e,x0,O0,b0,d0),C=0),E!=0&&(g(E,e,x0,O0,b0,d0),E=0);break}}i<=d&&(M0+=r.width[i],t0+=r.width[i],M+=r.width[i])}E!=0&&(g(E,e,x0,O0,b0,d0),E=0),C!=0&&(I(C,e,x0,O0,b0,d0),C=0)}function N(u,n,e){var r=0,a=0;do{var i=u[n++],d=u[n++];r<i&&(r=i),a<d&&(a=d)}while(n<e);return r<a&&(r=a),r}function b(u,n,e,r,a,i){var d=X.ht[r].xlen*65536+X.ht[a].xlen,M=0,T;do{var E=u[n++],C=u[n++];E!=0&&(E>14&&(E=15,M+=d),E*=16),C!=0&&(C>14&&(C=15,M+=d),E+=C),M+=X.largetbl[E]}while(n<e);return T=M&65535,M>>=16,M>T&&(M=T,r=a),i.bits+=M,r}function V(u,n,e,r){var a=0,i=X.ht[1].hlen;do{var d=u[n+0]*2+u[n+1];n+=2,a+=i[d]}while(n<e);return r.bits+=a,1}function t(u,n,e,r,a){var i=0,d,M=X.ht[r].xlen,T;r==2?T=X.table23:T=X.table56;do{var E=u[n+0]*M+u[n+1];n+=2,i+=T[E]}while(n<e);return d=i&65535,i>>=16,i>d&&(i=d,r++),a.bits+=i,r}function L(u,n,e,r,a){var i=0,d=0,M=0,T=X.ht[r].xlen,E=X.ht[r].hlen,C=X.ht[r+1].hlen,t0=X.ht[r+2].hlen;do{var n0=u[n+0]*T+u[n+1];n+=2,i+=E[n0],d+=C[n0],M+=t0[n0]}while(n<e);var M0=r;return i>d&&(i=d,M0++),i>M&&(i=M,M0=r+2),a.bits+=i,M0}var Z=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function H(u,n,e,r){var a=N(u,n,e);switch(a){case 0:return a;case 1:return V(u,n,e,r);case 2:case 3:return t(u,n,e,Z[a-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return L(u,n,e,Z[a-1],r);default:if(a>Y.IXMAX_VAL)return r.bits=Y.LARGE_BITS,-1;a-=15;var i;for(i=24;i<32&&!(X.ht[i].linmax>=a);i++);var d;for(d=i-8;d<24&&!(X.ht[d].linmax>=a);d++);return b(u,n,e,d,i,r)}}this.noquant_count_bits=function(u,n,e){var r=n.l3_enc,a=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(e!=null&&(e.sfb_count1=0);a>1&&(r[a-1]|r[a-2])==0;a-=2);n.count1=a;for(var i=0,d=0;a>3;a-=4){var M;if(((r[a-1]|r[a-2]|r[a-3]|r[a-4])&2147483647)>1)break;M=((r[a-4]*2+r[a-3])*2+r[a-2])*2+r[a-1],i+=X.t32l[M],d+=X.t33l[M]}var T=i;if(n.count1table_select=0,i>d&&(T=d,n.count1table_select=1),n.count1bits=T,n.big_values=a,a==0)return T;if(n.block_type==U.SHORT_TYPE)i=3*u.scalefac_band.s[3],i>n.big_values&&(i=n.big_values),d=n.big_values;else if(n.block_type==U.NORM_TYPE){if(j(a<=576),i=n.region0_count=u.bv_scf[a-2],d=n.region1_count=u.bv_scf[a-1],j(i+d+2<U.SBPSY_l),d=u.scalefac_band.l[i+d+2],i=u.scalefac_band.l[i+1],d<a){var E=new w(T);n.table_select[2]=H(r,d,a,E),T=E.bits}}else n.region0_count=7,n.region1_count=U.SBMAX_l-1-7-1,i=u.scalefac_band.l[8],d=a,i>d&&(i=d);if(i=Math.min(i,a),d=Math.min(d,a),j(i>=0),j(d>=0),0<i){var E=new w(T);n.table_select[0]=H(r,0,i,E),T=E.bits}if(i<d){var E=new w(T);n.table_select[1]=H(r,i,d,E),T=E.bits}if(u.use_best_huffman==2&&(n.part2_3_length=T,best_huffman_divide(u,n),T=n.part2_3_length),e!=null&&n.block_type==U.NORM_TYPE){for(var C=0;u.scalefac_band.l[C]<n.big_values;)C++;e.sfb_count1=C}return T},this.count_bits=function(u,n,e,r){var a=e.l3_enc,i=Y.IXMAX_VAL/B.IPOW20(e.global_gain);if(e.xrpow_max>i)return Y.LARGE_BITS;if(f(n,a,B.IPOW20(e.global_gain),e,r),(u.substep_shaping&2)!=0)for(var d=0,M=e.global_gain+e.scalefac_scale,T=.634521682242439/B.IPOW20(M),E=0;E<e.sfbmax;E++){var C=e.width[E];if(j(C>=0),u.pseudohalf[E]==0)d+=C;else{var t0;for(t0=d,d+=C;t0<d;++t0)a[t0]=n[t0]>=T?a[t0]:0}}return this.noquant_count_bits(u,e,r)};function O(u,n,e,r,a,i,d){for(var M=n.big_values,T=0;T<=22;T++)r[T]=Y.LARGE_BITS;for(var T=0;T<16;T++){var E=u.scalefac_band.l[T+1];if(E>=M)break;var C=0,t0=new w(C),n0=H(e,0,E,t0);C=t0.bits;for(var M0=0;M0<8;M0++){var b0=u.scalefac_band.l[T+M0+2];if(b0>=M)break;var d0=C;t0=new w(d0);var x0=H(e,E,b0,t0);d0=t0.bits,r[T+M0]>d0&&(r[T+M0]=d0,a[T+M0]=T,i[T+M0]=n0,d[T+M0]=x0)}}}function F(u,n,e,r,a,i,d,M){for(var T=n.big_values,E=2;E<U.SBMAX_l+1;E++){var C=u.scalefac_band.l[E];if(C>=T)break;var t0=a[E-2]+n.count1bits;if(e.part2_3_length<=t0)break;var n0=new w(t0),M0=H(r,C,T,n0);t0=n0.bits,!(e.part2_3_length<=t0)&&(e.assign(n),e.part2_3_length=t0,e.region0_count=i[E-2],e.region1_count=E-2-i[E-2],e.table_select[0]=d[E-2],e.table_select[1]=M[E-2],e.table_select[2]=M0)}}this.best_huffman_divide=function(u,n){var e=new W,r=n.l3_enc,a=k(23),i=k(23),d=k(23),M=k(23);if(!(n.block_type==U.SHORT_TYPE&&u.mode_gr==1)){e.assign(n),n.block_type==U.NORM_TYPE&&(O(u,n,r,a,i,d,M),F(u,e,n,r,a,i,d,M));var T=e.big_values;if(!(T==0||(r[T-2]|r[T-1])>1)&&(T=n.count1+2,!(T>576))){e.assign(n),e.count1=T;var E=0,C=0;for(j(T<=576);T>e.big_values;T-=4){var t0=((r[T-4]*2+r[T-3])*2+r[T-2])*2+r[T-1];E+=X.t32l[t0],C+=X.t33l[t0]}if(e.big_values=T,e.count1table_select=0,E>C&&(E=C,e.count1table_select=1),e.count1bits=E,e.block_type==U.NORM_TYPE)F(u,e,n,r,a,i,d,M);else{if(e.part2_3_length=E,E=u.scalefac_band.l[8],E>T&&(E=T),E>0){var n0=new w(e.part2_3_length);e.table_select[0]=H(r,0,E,n0),e.part2_3_length=n0.bits}if(T>E){var n0=new w(e.part2_3_length);e.table_select[1]=H(r,E,T,n0),e.part2_3_length=n0.bits}n.part2_3_length>e.part2_3_length&&n.assign(e)}}}};var z=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],u0=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],i0=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],o=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];$.slen1_tab=i0,$.slen2_tab=o;function w0(u,n){for(var e,r=n.tt[1][u],a=n.tt[0][u],i=0;i<X.scfsi_band.length-1;i++){for(e=X.scfsi_band[i];e<X.scfsi_band[i+1]&&!(a.scalefac[e]!=r.scalefac[e]&&r.scalefac[e]>=0);e++);if(e==X.scfsi_band[i+1]){for(e=X.scfsi_band[i];e<X.scfsi_band[i+1];e++)r.scalefac[e]=-1;n.scfsi[u][i]=1}}var d=0,M=0;for(e=0;e<11;e++)r.scalefac[e]!=-1&&(M++,d<r.scalefac[e]&&(d=r.scalefac[e]));for(var T=0,E=0;e<U.SBPSY_l;e++)r.scalefac[e]!=-1&&(E++,T<r.scalefac[e]&&(T=r.scalefac[e]));for(var i=0;i<16;i++)if(d<z[i]&&T<u0[i]){var C=i0[i]*M+o[i]*E;r.part2_length>C&&(r.part2_length=C,r.scalefac_compress=i)}}this.best_scalefac_store=function(u,n,e,r){var a=r.tt[n][e],i,d,M,T,E=0;for(M=0,i=0;i<a.sfbmax;i++){var C=a.width[i];for(j(C>=0),M+=C,T=-C;T<0&&a.l3_enc[T+M]==0;T++);T==0&&(a.scalefac[i]=E=-2)}if(a.scalefac_scale==0&&a.preflag==0){var t0=0;for(i=0;i<a.sfbmax;i++)a.scalefac[i]>0&&(t0|=a.scalefac[i]);if((t0&1)==0&&t0!=0){for(i=0;i<a.sfbmax;i++)a.scalefac[i]>0&&(a.scalefac[i]>>=1);a.scalefac_scale=E=1}}if(a.preflag==0&&a.block_type!=U.SHORT_TYPE&&u.mode_gr==2){for(i=11;i<U.SBPSY_l&&!(a.scalefac[i]<B.pretab[i]&&a.scalefac[i]!=-2);i++);if(i==U.SBPSY_l){for(i=11;i<U.SBPSY_l;i++)a.scalefac[i]>0&&(a.scalefac[i]-=B.pretab[i]);a.preflag=E=1}}for(d=0;d<4;d++)r.scfsi[e][d]=0;for(u.mode_gr==2&&n==1&&r.tt[0][e].block_type!=U.SHORT_TYPE&&r.tt[1][e].block_type!=U.SHORT_TYPE&&(w0(e,r),E=0),i=0;i<a.sfbmax;i++)a.scalefac[i]==-2&&(a.scalefac[i]=0);E!=0&&(u.mode_gr==2?this.scale_bitcount(a):this.scale_bitcount_lsf(u,a))};function o0(u,n){for(var e=0;e<n;++e)if(u[e]<0)return!1;return!0}var S=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],l=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],c=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(u){var n,e,r=0,a=0,i,d=u.scalefac;if(j(o0(d,u.sfbmax)),u.block_type==U.SHORT_TYPE)i=S,u.mixed_block_flag!=0&&(i=l);else if(i=c,u.preflag==0){for(e=11;e<U.SBPSY_l&&!(d[e]<B.pretab[e]);e++);if(e==U.SBPSY_l)for(u.preflag=1,e=11;e<U.SBPSY_l;e++)d[e]-=B.pretab[e]}for(e=0;e<u.sfbdivide;e++)r<d[e]&&(r=d[e]);for(;e<u.sfbmax;e++)a<d[e]&&(a=d[e]);for(u.part2_length=Y.LARGE_BITS,n=0;n<16;n++)r<z[n]&&a<u0[n]&&u.part2_length>i[n]&&(u.part2_length=i[n],u.scalefac_compress=n);return u.part2_length==Y.LARGE_BITS};var R=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(u,n){var e,r,a,i,d,M,T,E,C=k(4),t0=n.scalefac;for(n.preflag!=0?e=2:e=0,T=0;T<4;T++)C[T]=0;if(n.block_type==U.SHORT_TYPE){r=1;var n0=B.nr_of_sfb_block[e][r];for(E=0,a=0;a<4;a++)for(i=n0[a]/3,T=0;T<i;T++,E++)for(d=0;d<3;d++)t0[E*3+d]>C[a]&&(C[a]=t0[E*3+d])}else{r=0;var n0=B.nr_of_sfb_block[e][r];for(E=0,a=0;a<4;a++)for(i=n0[a],T=0;T<i;T++,E++)t0[E]>C[a]&&(C[a]=t0[E])}for(M=!1,a=0;a<4;a++)C[a]>R[e][a]&&(M=!0);if(!M){var M0,b0,d0,x0;for(n.sfb_partition_table=B.nr_of_sfb_block[e][r],a=0;a<4;a++)n.slen[a]=q[C[a]];switch(M0=n.slen[0],b0=n.slen[1],d0=n.slen[2],x0=n.slen[3],e){case 0:n.scalefac_compress=(M0*5+b0<<4)+(d0<<2)+x0;break;case 1:n.scalefac_compress=400+(M0*5+b0<<2)+d0;break;case 2:n.scalefac_compress=500+M0*3+b0;break;default:A.err.printf(`intensity stereo not implemented yet
`);break}}if(!M)for(j(n.sfb_partition_table!=null),n.part2_length=0,a=0;a<4;a++)n.part2_length+=n.slen[a]*n.sfb_partition_table[a];return M};var q=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(u){for(var n=2;n<=576;n+=2){for(var e=0,r;u.scalefac_band.l[++e]<n;);for(r=v0[e][0];u.scalefac_band.l[r+1]>n;)r--;for(r<0&&(r=v0[e][0]),u.bv_scf[n-2]=r,r=v0[e][1];u.scalefac_band.l[r+u.bv_scf[n-2]+2]>n;)r--;r<0&&(r=v0[e][1]),u.bv_scf[n-1]=r}}}return re=$,re}var te,ge;function ne(){if(ge)return te;ge=1;var _=G0(),A=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var J=_.Arrays;_.new_array_n;var k=_.new_byte;_.new_double,_.new_float;var j=_.new_float_n,U=_.new_int;_.new_int_n;var X=_.assert,W=$e(),Y=ee(),$=$0(),B=I1();w.EQ=function(v0,I){return Math.abs(v0)>Math.abs(I)?Math.abs(v0-I)<=Math.abs(v0)*1e-6:Math.abs(v0-I)<=Math.abs(I)*1e-6},w.NEQ=function(v0,I){return!w.EQ(v0,I)};function w(){var v0=se(),I=this,g=32773,f=32,N=null,b=null,V=null,t=null;this.setModules=function(e,r,a,i){N=e,b=r,V=a,t=i};var L=null,Z=0,H=0,O=0;this.getframebits=function(e){var r=e.internal_flags,a;r.bitrate_index!=0?a=Y.bitrate_table[e.version][r.bitrate_index]:a=e.brate,X(8<=a&&a<=640);var i=0|(e.version+1)*72e3*a/e.out_samplerate+r.padding;return 8*i};function F(e){A.arraycopy(e.header[e.w_ptr].buf,0,L,H,e.sideinfo_len),H+=e.sideinfo_len,Z+=e.sideinfo_len*8,e.w_ptr=e.w_ptr+1&B.MAX_HEADER_BUF-1}function z(e,r,a){for(X(a<f-2);a>0;){var i;O==0&&(O=8,H++,X(H<v0.LAME_MAXMP3BUFFER),X(e.header[e.w_ptr].write_timing>=Z),e.header[e.w_ptr].write_timing==Z&&F(e),L[H]=0),i=Math.min(a,O),a-=i,O-=i,X(a<f),X(O<f),L[H]|=r>>a<<O,Z+=i}}function u0(e,r,a){for(X(a<f-2);a>0;){var i;O==0&&(O=8,H++,X(H<v0.LAME_MAXMP3BUFFER),L[H]=0),i=Math.min(a,O),a-=i,O-=i,X(a<f),X(O<f),L[H]|=r>>a<<O,Z+=i}}function i0(e,r){var a=e.internal_flags,i;if(X(r>=0),r>=8&&(z(a,76,8),r-=8),r>=8&&(z(a,65,8),r-=8),r>=8&&(z(a,77,8),r-=8),r>=8&&(z(a,69,8),r-=8),r>=32){var d=V.getLameShortVersion();if(r>=32)for(i=0;i<d.length&&r>=8;++i)r-=8,z(a,d.charAt(i),8)}for(;r>=1;r-=1)z(a,a.ancillary_flag,1),a.ancillary_flag^=e.disable_reservoir?0:1;X(r==0)}function o(e,r,a){for(var i=e.header[e.h_ptr].ptr;a>0;){var d=Math.min(a,8-(i&7));a-=d,X(a<f),e.header[e.h_ptr].buf[i>>3]|=r>>a<<8-(i&7)-d,i+=d}e.header[e.h_ptr].ptr=i}function w0(e,r){e<<=8;for(var a=0;a<8;a++)e<<=1,r<<=1,((r^e)&65536)!=0&&(r^=g);return r}this.CRC_writeheader=function(e,r){var a=65535;a=w0(r[2]&255,a),a=w0(r[3]&255,a);for(var i=6;i<e.sideinfo_len;i++)a=w0(r[i]&255,a);r[4]=byte(a>>8),r[5]=byte(a&255)};function o0(e,r){var a=e.internal_flags,i,d,M;if(i=a.l3_side,a.header[a.h_ptr].ptr=0,J.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),e.out_samplerate<16e3?o(a,4094,12):o(a,4095,12),o(a,e.version,1),o(a,1,2),o(a,e.error_protection?0:1,1),o(a,a.bitrate_index,4),o(a,a.samplerate_index,2),o(a,a.padding,1),o(a,e.extension,1),o(a,e.mode.ordinal(),2),o(a,a.mode_ext,2),o(a,e.copyright,1),o(a,e.original,1),o(a,e.emphasis,2),e.error_protection&&o(a,0,16),e.version==1){for(X(i.main_data_begin>=0),o(a,i.main_data_begin,9),a.channels_out==2?o(a,i.private_bits,3):o(a,i.private_bits,5),M=0;M<a.channels_out;M++){var T;for(T=0;T<4;T++)o(a,i.scfsi[M][T],1)}for(d=0;d<2;d++)for(M=0;M<a.channels_out;M++){var E=i.tt[d][M];o(a,E.part2_3_length+E.part2_length,12),o(a,E.big_values/2,9),o(a,E.global_gain,8),o(a,E.scalefac_compress,4),E.block_type!=$.NORM_TYPE?(o(a,1,1),o(a,E.block_type,2),o(a,E.mixed_block_flag,1),E.table_select[0]==14&&(E.table_select[0]=16),o(a,E.table_select[0],5),E.table_select[1]==14&&(E.table_select[1]=16),o(a,E.table_select[1],5),o(a,E.subblock_gain[0],3),o(a,E.subblock_gain[1],3),o(a,E.subblock_gain[2],3)):(o(a,0,1),E.table_select[0]==14&&(E.table_select[0]=16),o(a,E.table_select[0],5),E.table_select[1]==14&&(E.table_select[1]=16),o(a,E.table_select[1],5),E.table_select[2]==14&&(E.table_select[2]=16),o(a,E.table_select[2],5),X(0<=E.region0_count&&E.region0_count<16),X(0<=E.region1_count&&E.region1_count<8),o(a,E.region0_count,4),o(a,E.region1_count,3)),o(a,E.preflag,1),o(a,E.scalefac_scale,1),o(a,E.count1table_select,1)}}else for(X(i.main_data_begin>=0),o(a,i.main_data_begin,8),o(a,i.private_bits,a.channels_out),d=0,M=0;M<a.channels_out;M++){var E=i.tt[d][M];o(a,E.part2_3_length+E.part2_length,12),o(a,E.big_values/2,9),o(a,E.global_gain,8),o(a,E.scalefac_compress,9),E.block_type!=$.NORM_TYPE?(o(a,1,1),o(a,E.block_type,2),o(a,E.mixed_block_flag,1),E.table_select[0]==14&&(E.table_select[0]=16),o(a,E.table_select[0],5),E.table_select[1]==14&&(E.table_select[1]=16),o(a,E.table_select[1],5),o(a,E.subblock_gain[0],3),o(a,E.subblock_gain[1],3),o(a,E.subblock_gain[2],3)):(o(a,0,1),E.table_select[0]==14&&(E.table_select[0]=16),o(a,E.table_select[0],5),E.table_select[1]==14&&(E.table_select[1]=16),o(a,E.table_select[1],5),E.table_select[2]==14&&(E.table_select[2]=16),o(a,E.table_select[2],5),X(0<=E.region0_count&&E.region0_count<16),X(0<=E.region1_count&&E.region1_count<8),o(a,E.region0_count,4),o(a,E.region1_count,3)),o(a,E.scalefac_scale,1),o(a,E.count1table_select,1)}e.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var C=a.h_ptr;X(a.header[C].ptr==a.sideinfo_len*8),a.h_ptr=C+1&B.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[C].write_timing+r,a.h_ptr==a.w_ptr&&A.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function S(e,r){var a=Y.ht[r.count1table_select+32],i,d=0,M=r.big_values,T=r.big_values;for(X(r.count1table_select<2),i=(r.count1-r.big_values)/4;i>0;--i){var E=0,C=0,t0;t0=r.l3_enc[M+0],t0!=0&&(C+=8,r.xr[T+0]<0&&E++,X(t0<=1)),t0=r.l3_enc[M+1],t0!=0&&(C+=4,E*=2,r.xr[T+1]<0&&E++,X(t0<=1)),t0=r.l3_enc[M+2],t0!=0&&(C+=2,E*=2,r.xr[T+2]<0&&E++,X(t0<=1)),t0=r.l3_enc[M+3],t0!=0&&(C++,E*=2,r.xr[T+3]<0&&E++,X(t0<=1)),M+=4,T+=4,z(e,E+a.table[C],a.hlen[C]),d+=a.hlen[C]}return d}function l(e,r,a,i,d){var M=Y.ht[r],T=0;if(X(r<32),r==0)return T;for(var E=a;E<i;E+=2){var C=0,t0=0,n0=M.xlen,M0=M.xlen,b0=0,d0=d.l3_enc[E],x0=d.l3_enc[E+1];if(d0!=0&&(d.xr[E]<0&&b0++,C--),r>15){if(d0>14){var O0=d0-15;X(O0<=M.linmax),b0|=O0<<1,t0=n0,d0=15}if(x0>14){var Q0=x0-15;X(Q0<=M.linmax),b0<<=n0,b0|=Q0,t0+=n0,x0=15}M0=16}x0!=0&&(b0<<=1,d.xr[E+1]<0&&b0++,C--),X((d0|x0)<16),d0=d0*M0+x0,t0-=C,C+=M.hlen[d0],X(C<=f),X(t0<=f),z(e,M.table[d0],C),z(e,b0,t0),T+=C+t0}return T}function c(e,r){var a=3*e.scalefac_band.s[3];a>r.big_values&&(a=r.big_values);var i=l(e,r.table_select[0],0,a,r);return i+=l(e,r.table_select[1],a,r.big_values,r),i}function R(e,r){var a,i,d,M;a=r.big_values,X(0<=a&&a<=576);var T=r.region0_count+1;return X(0<=T),X(T<e.scalefac_band.l.length),d=e.scalefac_band.l[T],T+=r.region1_count+1,X(0<=T),X(T<e.scalefac_band.l.length),M=e.scalefac_band.l[T],d>a&&(d=a),M>a&&(M=a),i=l(e,r.table_select[0],0,d,r),i+=l(e,r.table_select[1],d,M,r),i+=l(e,r.table_select[2],M,a,r),i}function q(e){var r,a,i,d,M=0,T=e.internal_flags,E=T.l3_side;if(e.version==1)for(r=0;r<2;r++)for(a=0;a<T.channels_out;a++){var C=E.tt[r][a],t0=W.slen1_tab[C.scalefac_compress],n0=W.slen2_tab[C.scalefac_compress];for(d=0,i=0;i<C.sfbdivide;i++)C.scalefac[i]!=-1&&(z(T,C.scalefac[i],t0),d+=t0);for(;i<C.sfbmax;i++)C.scalefac[i]!=-1&&(z(T,C.scalefac[i],n0),d+=n0);X(d==C.part2_length),C.block_type==$.SHORT_TYPE?d+=c(T,C):d+=R(T,C),d+=S(T,C),X(d==C.part2_3_length+C.part2_length),M+=d}else for(r=0,a=0;a<T.channels_out;a++){var C=E.tt[r][a],M0,b0,d0=0;if(X(C.sfb_partition_table!=null),d=0,i=0,b0=0,C.block_type==$.SHORT_TYPE){for(;b0<4;b0++){var x0=C.sfb_partition_table[b0]/3,O0=C.slen[b0];for(M0=0;M0<x0;M0++,i++)z(T,Math.max(C.scalefac[i*3+0],0),O0),z(T,Math.max(C.scalefac[i*3+1],0),O0),z(T,Math.max(C.scalefac[i*3+2],0),O0),d0+=3*O0}d+=c(T,C)}else{for(;b0<4;b0++){var x0=C.sfb_partition_table[b0],O0=C.slen[b0];for(M0=0;M0<x0;M0++,i++)z(T,Math.max(C.scalefac[i],0),O0),d0+=O0}d+=R(T,C)}d+=S(T,C),X(d==C.part2_3_length),X(d0==C.part2_length),M+=d0+d}return M}function u(){this.total=0}function n(e,r){var a=e.internal_flags,i,d,M,T,E;return E=a.w_ptr,T=a.h_ptr-1,T==-1&&(T=B.MAX_HEADER_BUF-1),i=a.header[T].write_timing-Z,r.total=i,i>=0&&(d=1+T-E,T<E&&(d=1+T-E+B.MAX_HEADER_BUF),i-=d*8*a.sideinfo_len),M=I.getframebits(e),i+=M,r.total+=M,r.total%8!=0?r.total=1+r.total/8:r.total=r.total/8,r.total+=H+1,i<0&&A.err.println(`strange error flushing buffer ... 
`),i}this.flush_bitstream=function(e){var r=e.internal_flags,a,i,d=r.h_ptr-1;if(d==-1&&(d=B.MAX_HEADER_BUF-1),a=r.l3_side,!((i=n(e,new u))<0)){if(i0(e,i),X(r.header[d].write_timing+this.getframebits(e)==Z),r.ResvSize=0,a.main_data_begin=0,r.findReplayGain){var M=N.GetTitleGain(r.rgdata);X(NEQ(M,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),r.RadioGain=Math.floor(M*10+.5)|0}r.findPeakSample&&(r.noclipGainChange=Math.ceil(Math.log10(r.PeakSample/32767)*20*10)|0,r.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?r.noclipScale=Math.floor(32767/r.PeakSample*100)/100:r.noclipScale=-1)}},this.add_dummy_byte=function(e,r,a){for(var i=e.internal_flags,d;a-- >0;)for(u0(i,r,8),d=0;d<B.MAX_HEADER_BUF;++d)i.header[d].write_timing+=8},this.format_bitstream=function(e){var r=e.internal_flags,a;a=r.l3_side;var i=this.getframebits(e);i0(e,a.resvDrain_pre),o0(e,i);var d=8*r.sideinfo_len;if(d+=q(e),i0(e,a.resvDrain_post),d+=a.resvDrain_post,a.main_data_begin+=(i-d)/8,n(e,new u)!=r.ResvSize&&A.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=r.ResvSize&&(A.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,r.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*r.sideinfo_len,d-a.resvDrain_post-8*r.sideinfo_len,d,d%8,i),A.err.println("This is a fatal error.  It has several possible causes:"),A.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),A.err.println(" 9%%  Your system is overclocked"),A.err.println(" 1%%  bug in LAME encoding library"),r.ResvSize=a.main_data_begin*8),X(Z%8==0),Z>1e9){var M;for(M=0;M<B.MAX_HEADER_BUF;++M)r.header[M].write_timing-=Z;Z=0}return 0},this.copy_buffer=function(e,r,a,i,d){var M=H+1;if(M<=0)return 0;if(i!=0&&M>i)return-1;if(A.arraycopy(L,0,r,a,M),H=-1,O=0,d!=0){var T=U(1);if(T[0]=e.nMusicCRC,t.updateMusicCRC(T,r,a,M),e.nMusicCRC=T[0],M>0&&(e.VBR_seek_table.nBytesWritten+=M),e.decode_on_the_fly){for(var E=j([2,1152]),C=M,t0=-1,n0;t0!=0;)if(t0=b.hip_decode1_unclipped(e.hip,r,a,C,E[0],E[1]),C=0,t0==-1&&(t0=0),t0>0){if(X(t0<=1152),e.findPeakSample){for(n0=0;n0<t0;n0++)E[0][n0]>e.PeakSample?e.PeakSample=E[0][n0]:-E[0][n0]>e.PeakSample&&(e.PeakSample=-E[0][n0]);if(e.channels_out>1)for(n0=0;n0<t0;n0++)E[1][n0]>e.PeakSample?e.PeakSample=E[1][n0]:-E[1][n0]>e.PeakSample&&(e.PeakSample=-E[1][n0])}if(e.findReplayGain&&N.AnalyzeSamples(e.rgdata,E[0],0,E[1],0,t0,e.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return M},this.init_bit_stream_w=function(e){L=k(v0.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,H=-1,O=0,Z=0}}return te=w,te}var ie,ea;function se(){if(ea)return ie;ea=1;var _=G0(),A=_.System,J=_.VbrMode;_.Float;var k=_.ShortBlock;_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var j=_.new_float;_.new_float_n,_.new_int;var U=_.new_int_n,X=_.new_short_n,W=_.assert,Y=Ra(),$=Ma(),B=I1(),w=wa(),v0=Ta(),I=ya(),g=ne(),f=ee(),N=$0();function b(){var V=S1(),t=this,L=128*1024;b.V9=410,b.V8=420,b.V7=430,b.V6=440,b.V5=450,b.V4=460,b.V3=470,b.V2=480,b.V1=490,b.V0=500,b.R3MIX=1e3,b.STANDARD=1001,b.EXTREME=1002,b.INSANE=1003,b.STANDARD_FAST=1004,b.EXTREME_FAST=1005,b.MEDIUM=1006,b.MEDIUM_FAST=1007;var Z=16384+L;b.LAME_MAXMP3BUFFER=Z;var H,O,F,z,u0,i0=new Y,o,w0,o0;this.enc=new N,this.setModules=function(s,v,m0,S0,p0,L0,B0,E0,F0){H=s,O=v,F=m0,z=S0,u0=p0,o=L0,w0=E0,o0=F0,this.enc.setModules(O,i0,z,o)};function S(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=j(N.SBMAX_l),this.bo_s_weight=j(N.SBMAX_s)}function l(){this.lowerlimit=0}function c(s,v){this.lowpass=v}var R=4294479419;function q(s){var v;return s.class_id=R,v=s.internal_flags=new B,s.mode=V.NOT_SET,s.original=1,s.in_samplerate=44100,s.num_channels=2,s.num_samples=-1,s.bWriteVbrTag=!0,s.quality=-1,s.short_blocks=null,v.subblock_gain=-1,s.lowpassfreq=0,s.highpassfreq=0,s.lowpasswidth=-1,s.highpasswidth=-1,s.VBR=J.vbr_off,s.VBR_q=4,s.ATHcurve=-1,s.VBR_mean_bitrate_kbps=128,s.VBR_min_bitrate_kbps=0,s.VBR_max_bitrate_kbps=0,s.VBR_hard_min=0,v.VBR_min_bitrate=1,v.VBR_max_bitrate=13,s.quant_comp=-1,s.quant_comp_short=-1,s.msfix=-1,v.resample_ratio=1,v.OldValue[0]=180,v.OldValue[1]=180,v.CurrentStep[0]=4,v.CurrentStep[1]=4,v.masking_lower=1,v.nsPsy.attackthre=-1,v.nsPsy.attackthre_s=-1,s.scale=-1,s.athaa_type=-1,s.ATHtype=-1,s.athaa_loudapprox=-1,s.athaa_sensitivity=0,s.useTemporal=null,s.interChRatio=-1,v.mf_samples_to_encode=N.ENCDELAY+N.POSTDELAY,s.encoder_padding=0,v.mf_size=N.ENCDELAY-N.MDCTDELAY,s.findReplayGain=!1,s.decode_on_the_fly=!1,v.decode_on_the_fly=!1,v.findReplayGain=!1,v.findPeakSample=!1,v.RadioGain=0,v.AudiophileGain=0,v.noclipGainChange=0,v.noclipScale=-1,s.preset=0,s.write_id3tag_automatic=!0,0}this.lame_init=function(){var s=new $;return q(s),s.lame_allocated_gfp=1,s};function u(s){return s>1?0:s<=0?1:Math.cos(Math.PI/2*s)}this.nearestBitrateFullIndex=function(s){var v=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],m0=0,S0=0,p0=0,L0=0;L0=v[16],p0=16,S0=v[16],m0=16;for(var B0=0;B0<16;B0++)if(Math.max(s,v[B0+1])!=s){L0=v[B0+1],p0=B0+1,S0=v[B0],m0=B0;break}return L0-s>s-S0?m0:p0};function n(s,v){var m0=44100;return v>=48e3?m0=48e3:v>=44100?m0=44100:v>=32e3?m0=32e3:v>=24e3?m0=24e3:v>=22050?m0=22050:v>=16e3?m0=16e3:v>=12e3?m0=12e3:v>=11025?m0=11025:v>=8e3&&(m0=8e3),s==-1?m0:(s<=15960&&(m0=44100),s<=15250&&(m0=32e3),s<=11220&&(m0=24e3),s<=9970&&(m0=22050),s<=7230&&(m0=16e3),s<=5420&&(m0=12e3),s<=4510&&(m0=11025),s<=3970&&(m0=8e3),v<m0?v>44100?48e3:v>32e3?44100:v>24e3?32e3:v>22050?24e3:v>16e3?22050:v>12e3?16e3:v>11025?12e3:v>8e3?11025:8e3:m0)}function e(s,v){switch(s){case 44100:return v.version=1,0;case 48e3:return v.version=1,1;case 32e3:return v.version=1,2;case 22050:return v.version=0,0;case 24e3:return v.version=0,1;case 16e3:return v.version=0,2;case 11025:return v.version=0,0;case 12e3:return v.version=0,1;case 8e3:return v.version=0,2;default:return v.version=0,-1}}function r(s,v,m0){m0<16e3&&(v=2);for(var S0=f.bitrate_table[v][1],p0=2;p0<=14;p0++)f.bitrate_table[v][p0]>0&&Math.abs(f.bitrate_table[v][p0]-s)<Math.abs(S0-s)&&(S0=f.bitrate_table[v][p0]);return S0}function a(s,v,m0){m0<16e3&&(v=2);for(var S0=0;S0<=14;S0++)if(f.bitrate_table[v][S0]>0&&f.bitrate_table[v][S0]==s)return S0;return-1}function i(s,v){var m0=[new c(8,2e3),new c(16,3700),new c(24,3900),new c(32,5500),new c(40,7e3),new c(48,7500),new c(56,1e4),new c(64,11e3),new c(80,13500),new c(96,15100),new c(112,15600),new c(128,17e3),new c(160,17500),new c(192,18600),new c(224,19400),new c(256,19700),new c(320,20500)],S0=t.nearestBitrateFullIndex(v);s.lowerlimit=m0[S0].lowpass}function d(s){var v=s.internal_flags,m0=32,S0=-1;if(v.lowpass1>0){for(var p0=999,L0=0;L0<=31;L0++){var B0=L0/31;B0>=v.lowpass2&&(m0=Math.min(m0,L0)),v.lowpass1<B0&&B0<v.lowpass2&&(p0=Math.min(p0,L0))}p0==999?v.lowpass1=(m0-.75)/31:v.lowpass1=(p0-.75)/31,v.lowpass2=m0/31}if(v.highpass2>0&&v.highpass2<.9*(.75/31)&&(v.highpass1=0,v.highpass2=0,A.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),v.highpass2>0){for(var E0=-1,L0=0;L0<=31;L0++){var B0=L0/31;B0<=v.highpass1&&(S0=Math.max(S0,L0)),v.highpass1<B0&&B0<v.highpass2&&(E0=Math.max(E0,L0))}v.highpass1=S0/31,E0==-1?v.highpass2=(S0+.75)/31:v.highpass2=(E0+.75)/31}for(var L0=0;L0<32;L0++){var F0,y0,B0=L0/31;v.highpass2>v.highpass1?F0=u((v.highpass2-B0)/(v.highpass2-v.highpass1+1e-20)):F0=1,v.lowpass2>v.lowpass1?y0=u((B0-v.lowpass1)/(v.lowpass2-v.lowpass1+1e-20)):y0=1,v.amp_filter[L0]=F0*y0}}function M(s){var v=s.internal_flags;switch(s.quality){default:case 9:v.psymodel=0,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 8:s.quality=7;case 7:v.psymodel=1,v.noise_shaping=0,v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.use_best_huffman=0,v.full_outer_loop=0;break;case 6:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 5:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=0,v.full_outer_loop=0;break;case 4:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=0,v.noise_shaping_stop=0,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 3:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 2:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=1,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 1:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break;case 0:v.psymodel=1,v.noise_shaping==0&&(v.noise_shaping=1),v.substep_shaping==0&&(v.substep_shaping=2),v.noise_shaping_amp=2,v.noise_shaping_stop=1,v.subblock_gain==-1&&(v.subblock_gain=1),v.use_best_huffman=1,v.full_outer_loop=0;break}}function T(s){var v=s.internal_flags;s.frameNum=0,s.write_id3tag_automatic&&w0.id3tag_write_v2(s),v.bitrate_stereoMode_Hist=U([16,5]),v.bitrate_blockType_Hist=U([16,6]),v.PeakSample=0,s.bWriteVbrTag&&o.InitVbrTag(s)}this.lame_init_params=function(s){var v=s.internal_flags;if(v.Class_ID=0,v.ATH==null&&(v.ATH=new w),v.PSY==null&&(v.PSY=new S),v.rgdata==null&&(v.rgdata=new v0),v.channels_in=s.num_channels,v.channels_in==1&&(s.mode=V.MONO),v.channels_out=s.mode==V.MONO?1:2,v.mode_ext=N.MPG_MD_MS_LR,s.mode==V.MONO&&(s.force_ms=!1),s.VBR==J.vbr_off&&s.VBR_mean_bitrate_kbps!=128&&s.brate==0&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==J.vbr_off||s.VBR==J.vbr_mtrh||s.VBR==J.vbr_mt||(s.free_format=!1),s.VBR==J.vbr_off&&s.brate==0&&g.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==J.vbr_off&&s.compression_ratio>0&&(s.out_samplerate==0&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|s.out_samplerate*16*v.channels_out/(1e3*s.compression_ratio),v.samplerate_index=e(s.out_samplerate,s),s.free_format||(s.brate=r(s.brate,s.version,s.out_samplerate))),s.out_samplerate!=0&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),s.lowpassfreq==0){var m0=16e3;switch(s.VBR){case J.vbr_off:{var S0=new l;i(S0,s.brate),m0=S0.lowerlimit;break}case J.vbr_abr:{var S0=new l;i(S0,s.VBR_mean_bitrate_kbps),m0=S0.lowerlimit;break}case J.vbr_rh:{var p0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var L0=p0[s.VBR_q],B0=p0[s.VBR_q+1],E0=s.VBR_q_frac;m0=linear_int(L0,B0,E0)}else m0=19500;break}default:{var p0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var L0=p0[s.VBR_q],B0=p0[s.VBR_q+1],E0=s.VBR_q_frac;m0=linear_int(L0,B0,E0)}else m0=19500}}s.mode==V.MONO&&(s.VBR==J.vbr_off||s.VBR==J.vbr_abr)&&(m0*=1.5),s.lowpassfreq=m0|0}if(s.out_samplerate==0&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=n(s.lowpassfreq|0,s.in_samplerate)),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==J.vbr_off&&(s.compression_ratio=s.out_samplerate*16*v.channels_out/(1e3*s.brate)),s.VBR==J.vbr_abr&&(s.compression_ratio=s.out_samplerate*16*v.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,v.findPeakSample=!1),v.findReplayGain=s.findReplayGain,v.decode_on_the_fly=s.decode_on_the_fly,v.decode_on_the_fly&&(v.findPeakSample=!0),v.findReplayGain&&H.InitGainAnalysis(v.rgdata,s.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(v.decode_on_the_fly&&!s.decode_only&&(v.hip!=null&&o0.hip_decode_exit(v.hip),v.hip=o0.hip_decode_init()),v.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*v.mode_gr,s.encoder_delay=N.ENCDELAY,v.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case J.vbr_mt:case J.vbr_rh:case J.vbr_mtrh:{var F0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];s.compression_ratio=F0[s.VBR_q]}break;case J.vbr_abr:s.compression_ratio=s.out_samplerate*16*v.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=s.out_samplerate*16*v.channels_out/(1e3*s.brate);break}if(s.mode==V.NOT_SET&&(s.mode=V.JOINT_STEREO),s.highpassfreq>0?(v.highpass1=2*s.highpassfreq,s.highpasswidth>=0?v.highpass2=2*(s.highpassfreq+s.highpasswidth):v.highpass2=1*2*s.highpassfreq,v.highpass1/=s.out_samplerate,v.highpass2/=s.out_samplerate):(v.highpass1=0,v.highpass2=0),s.lowpassfreq>0?(v.lowpass2=2*s.lowpassfreq,s.lowpasswidth>=0?(v.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),v.lowpass1<0&&(v.lowpass1=0)):v.lowpass1=1*2*s.lowpassfreq,v.lowpass1/=s.out_samplerate,v.lowpass2/=s.out_samplerate):(v.lowpass1=0,v.lowpass2=0),d(s),v.samplerate_index=e(s.out_samplerate,s),v.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==J.vbr_off){if(s.free_format)v.bitrate_index=0;else if(s.brate=r(s.brate,s.version,s.out_samplerate),v.bitrate_index=a(s.brate,s.version,s.out_samplerate),v.bitrate_index<=0)return s.internal_flags=null,-1}else v.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),v.pinfo!=null&&(s.bWriteVbrTag=!1),O.init_bit_stream_w(v);for(var y0=v.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),h0=0;h0<N.SBMAX_l+1;h0++)v.scalefac_band.l[h0]=z.sfBandIndex[y0].l[h0];for(var h0=0;h0<N.PSFB21+1;h0++){var k0=(v.scalefac_band.l[22]-v.scalefac_band.l[21])/N.PSFB21,W0=v.scalefac_band.l[21]+h0*k0;v.scalefac_band.psfb21[h0]=W0}v.scalefac_band.psfb21[N.PSFB21]=576;for(var h0=0;h0<N.SBMAX_s+1;h0++)v.scalefac_band.s[h0]=z.sfBandIndex[y0].s[h0];for(var h0=0;h0<N.PSFB12+1;h0++){var k0=(v.scalefac_band.s[13]-v.scalefac_band.s[12])/N.PSFB12,W0=v.scalefac_band.s[12]+h0*k0;v.scalefac_band.psfb12[h0]=W0}v.scalefac_band.psfb12[N.PSFB12]=192,s.version==1?v.sideinfo_len=v.channels_out==1?21:36:v.sideinfo_len=v.channels_out==1?13:21,s.error_protection&&(v.sideinfo_len+=2),T(s),v.Class_ID=R;{var q0;for(q0=0;q0<19;q0++)v.nsPsy.pefirbuf[q0]=700*v.mode_gr*v.channels_out;s.ATHtype==-1&&(s.ATHtype=4)}switch(W(s.VBR_q<=9),W(s.VBR_q>=0),s.VBR){case J.vbr_mt:s.VBR=J.vbr_mtrh;case J.vbr_mtrh:{s.useTemporal==null&&(s.useTemporal=!1),F.apply_preset(s,500-s.VBR_q*10,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),s.quality>5&&(s.quality=5),v.PSY.mask_adjust=s.maskingadjust,v.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=s.out_samplerate>44e3,v.iteration_loop=new VBRNewIterationLoop(u0);break}case J.vbr_rh:{F.apply_preset(s,500-s.VBR_q*10,0),v.PSY.mask_adjust=s.maskingadjust,v.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?v.sfb21_extra=!1:v.sfb21_extra=s.out_samplerate>44e3,s.quality>6&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),v.iteration_loop=new VBROldIterationLoop(u0);break}default:{var K0;v.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),K0=s.VBR,K0==J.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),F.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=K0,v.PSY.mask_adjust=s.maskingadjust,v.PSY.mask_adjust_short=s.maskingadjust_short,K0==J.vbr_off?v.iteration_loop=new I(u0):v.iteration_loop=new ABRIterationLoop(u0);break}}if(W(s.scale>=0),s.VBR!=J.vbr_off){if(v.VBR_min_bitrate=1,v.VBR_max_bitrate=14,s.out_samplerate<16e3&&(v.VBR_max_bitrate=8),s.VBR_min_bitrate_kbps!=0&&(s.VBR_min_bitrate_kbps=r(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),v.VBR_min_bitrate=a(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),v.VBR_min_bitrate<0)||s.VBR_max_bitrate_kbps!=0&&(s.VBR_max_bitrate_kbps=r(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),v.VBR_max_bitrate=a(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),v.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=f.bitrate_table[s.version][v.VBR_min_bitrate],s.VBR_max_bitrate_kbps=f.bitrate_table[s.version][v.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(f.bitrate_table[s.version][v.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(f.bitrate_table[s.version][v.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(v.PSY.mask_adjust+=s.tune_value_a,v.PSY.mask_adjust_short+=s.tune_value_a),M(s),W(s.scale>=0),s.athaa_type<0?v.ATH.useAdjust=3:v.ATH.useAdjust=s.athaa_type,v.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),s.short_blocks==null&&(s.short_blocks=k.short_block_allowed),s.short_blocks==k.short_block_allowed&&(s.mode==V.JOINT_STEREO||s.mode==V.STEREO)&&(s.short_blocks=k.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=s.exp_nspsytune|1,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=Y.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=Y.NSATTACKTHRE_S),W(s.scale>=0),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),s.useTemporal==null&&(s.useTemporal=!0),v.slot_lag=v.frac_SpF=0,s.VBR==J.vbr_off&&(v.slot_lag=v.frac_SpF=(s.version+1)*72e3*s.brate%s.out_samplerate|0),z.iteration_init(s),i0.psymodel_init(s),W(s.scale>=0),0};function E(s,v){(s.in_buffer_0==null||s.in_buffer_nsamples<v)&&(s.in_buffer_0=j(v),s.in_buffer_1=j(v),s.in_buffer_nsamples=v)}this.lame_encode_flush=function(s,v,m0,S0){var p0=s.internal_flags,L0=X([2,1152]),B0=0,E0,F0,y0,h0,k0=p0.mf_samples_to_encode-N.POSTDELAY,W0=C(s);if(p0.mf_samples_to_encode<1)return 0;for(E0=0,s.in_samplerate!=s.out_samplerate&&(k0+=16*s.out_samplerate/s.in_samplerate),y0=s.framesize-k0%s.framesize,y0<576&&(y0+=s.framesize),s.encoder_padding=y0,h0=(k0+y0)/s.framesize;h0>0&&B0>=0;){var q0=W0-p0.mf_size,K0=s.frameNum;q0*=s.in_samplerate,q0/=s.out_samplerate,q0>1152&&(q0=1152),q0<1&&(q0=1),F0=S0-E0,S0==0&&(F0=0),B0=this.lame_encode_buffer(s,L0[0],L0[1],q0,v,m0,F0),m0+=B0,E0+=B0,h0-=K0!=s.frameNum?1:0}if(p0.mf_samples_to_encode=0,B0<0||(F0=S0-E0,S0==0&&(F0=0),O.flush_bitstream(s),B0=O.copy_buffer(p0,v,m0,F0,1),B0<0))return B0;if(m0+=B0,E0+=B0,F0=S0-E0,S0==0&&(F0=0),s.write_id3tag_automatic){if(w0.id3tag_write_v1(s),B0=O.copy_buffer(p0,v,m0,F0,0),B0<0)return B0;E0+=B0}return E0},this.lame_encode_buffer=function(s,v,m0,S0,p0,L0,B0){var E0=s.internal_flags,F0=[null,null];if(E0.Class_ID!=R)return-3;if(S0==0)return 0;E(E0,S0),F0[0]=E0.in_buffer_0,F0[1]=E0.in_buffer_1;for(var y0=0;y0<S0;y0++)F0[0][y0]=v[y0],E0.channels_in>1&&(F0[1][y0]=m0[y0]);return t0(s,F0[0],F0[1],S0,p0,L0,B0)};function C(s){var v=N.BLKSIZE+s.framesize-N.FFTOFFSET;return v=Math.max(v,512+s.framesize-32),W(B.MFSIZE>=v),v}function t0(s,v,m0,S0,p0,L0,B0){var E0=s.internal_flags,F0=0,y0,h0,k0,W0,q0,K0=[null,null],D0=[null,null];if(E0.Class_ID!=R)return-3;if(S0==0)return 0;if(q0=O.copy_buffer(E0,p0,L0,B0,0),q0<0)return q0;if(L0+=q0,F0+=q0,D0[0]=v,D0[1]=m0,g.NEQ(s.scale,0)&&g.NEQ(s.scale,1))for(h0=0;h0<S0;++h0)D0[0][h0]*=s.scale,E0.channels_out==2&&(D0[1][h0]*=s.scale);if(g.NEQ(s.scale_left,0)&&g.NEQ(s.scale_left,1))for(h0=0;h0<S0;++h0)D0[0][h0]*=s.scale_left;if(g.NEQ(s.scale_right,0)&&g.NEQ(s.scale_right,1))for(h0=0;h0<S0;++h0)D0[1][h0]*=s.scale_right;if(s.num_channels==2&&E0.channels_out==1)for(h0=0;h0<S0;++h0)D0[0][h0]=.5*(D0[0][h0]+D0[1][h0]),D0[1][h0]=0;W0=C(s),K0[0]=E0.mfbuf[0],K0[1]=E0.mfbuf[1];for(var U0=0;S0>0;){var j0=[null,null],u1=0,g0=0;j0[0]=D0[0],j0[1]=D0[1];var s1=new M0;if(Q0(s,K0,j0,U0,S0,s1),u1=s1.n_in,g0=s1.n_out,E0.findReplayGain&&!E0.decode_on_the_fly&&H.AnalyzeSamples(E0.rgdata,K0[0],E0.mf_size,K0[1],E0.mf_size,g0,E0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(S0-=u1,U0+=u1,E0.channels_out==2,E0.mf_size+=g0,W(E0.mf_size<=B.MFSIZE),E0.mf_samples_to_encode<1&&(E0.mf_samples_to_encode=N.ENCDELAY+N.POSTDELAY),E0.mf_samples_to_encode+=g0,E0.mf_size>=W0){var h1=B0-F0;if(B0==0&&(h1=0),y0=n0(s,K0[0],K0[1],p0,L0,h1),y0<0)return y0;for(L0+=y0,F0+=y0,E0.mf_size-=s.framesize,E0.mf_samples_to_encode-=s.framesize,k0=0;k0<E0.channels_out;k0++)for(h0=0;h0<E0.mf_size;h0++)K0[k0][h0]=K0[k0][h0+s.framesize]}}return W(S0==0),F0}function n0(s,v,m0,S0,p0,L0){var B0=t.enc.lame_encode_mp3_frame(s,v,m0,S0,p0,L0);return s.frameNum++,B0}function M0(){this.n_in=0,this.n_out=0}function b0(){this.num_used=0}function d0(s,v){return v!=0?d0(v,s%v):s}function x0(s,v,m0){var S0=Math.PI*v;s/=m0,s<0&&(s=0),s>1&&(s=1);var p0=s-.5,L0=.42-.5*Math.cos(2*s*Math.PI)+.08*Math.cos(4*s*Math.PI);return Math.abs(p0)<1e-9?S0/Math.PI:L0*Math.sin(m0*S0*p0)/(Math.PI*m0*p0)}function O0(s,v,m0,S0,p0,L0,B0,E0,F0){var y0=s.internal_flags,h0,k0=0,W0,q0=s.out_samplerate/d0(s.out_samplerate,s.in_samplerate);q0>B.BPC&&(q0=B.BPC);var K0=Math.abs(y0.resample_ratio-Math.floor(.5+y0.resample_ratio))<1e-4?1:0,D0=1/y0.resample_ratio;D0>1&&(D0=1);var U0=31;U0%2==0&&--U0,U0+=K0;var j0=U0+1;if(y0.fill_buffer_resample_init==0){for(y0.inbuf_old[0]=j(j0),y0.inbuf_old[1]=j(j0),h0=0;h0<=2*q0;++h0)y0.blackfilt[h0]=j(j0);for(y0.itime[0]=0,y0.itime[1]=0,k0=0;k0<=2*q0;k0++){var u1=0,g0=(k0-q0)/(2*q0);for(h0=0;h0<=U0;h0++)u1+=y0.blackfilt[k0][h0]=x0(h0-g0,D0,U0);for(h0=0;h0<=U0;h0++)y0.blackfilt[k0][h0]/=u1}y0.fill_buffer_resample_init=1}var s1=y0.inbuf_old[F0];for(W0=0;W0<S0;W0++){var h1,_1;if(h1=W0*y0.resample_ratio,k0=0|Math.floor(h1-y0.itime[F0]),U0+k0-U0/2>=B0)break;var g0=h1-y0.itime[F0]-(k0+.5*(U0%2));W(Math.abs(g0)<=.501),_1=0|Math.floor(g0*2*q0+q0+.5);var R1=0;for(h0=0;h0<=U0;++h0){var f1=0|h0+k0-U0/2,M1;W(f1<B0),W(f1+j0>=0),M1=f1<0?s1[j0+f1]:p0[L0+f1],R1+=M1*y0.blackfilt[_1][h0]}v[m0+W0]=R1}if(E0.num_used=Math.min(B0,U0+k0-U0/2),y0.itime[F0]+=E0.num_used-W0*y0.resample_ratio,E0.num_used>=j0)for(h0=0;h0<j0;h0++)s1[h0]=p0[L0+E0.num_used+h0-j0];else{var m1=j0-E0.num_used;for(h0=0;h0<m1;++h0)s1[h0]=s1[h0+E0.num_used];for(k0=0;h0<j0;++h0,++k0)s1[h0]=p0[L0+k0];W(k0==E0.num_used)}return W0}function Q0(s,v,m0,S0,p0,L0){var B0=s.internal_flags;if(B0.resample_ratio<.9999||B0.resample_ratio>1.0001)for(var E0=0;E0<B0.channels_out;E0++){var F0=new b0;L0.n_out=O0(s,v[E0],B0.mf_size,s.framesize,m0[E0],S0,p0,F0,E0),L0.n_in=F0.num_used}else{L0.n_out=Math.min(s.framesize,p0),L0.n_in=L0.n_out;for(var y0=0;y0<L0.n_out;++y0)v[0][B0.mf_size+y0]=m0[0][S0+y0],B0.channels_out==2&&(v[1][B0.mf_size+y0]=m0[1][S0+y0])}}}return ie=b,ie}var _e,aa;function Ia(){if(aa)return _e;aa=1;var _=G0();_.System;var A=_.VbrMode;_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n,_.assert;function J(){var k=se();function j(I,g,f,N,b,V,t,L,Z,H,O,F,z,u0,i0){this.vbr_q=I,this.quant_comp=g,this.quant_comp_s=f,this.expY=N,this.st_lrm=b,this.st_s=V,this.masking_adj=t,this.masking_adj_short=L,this.ath_lower=Z,this.ath_curve=H,this.ath_sensitivity=O,this.interch=F,this.safejoint=z,this.sfb21mod=u0,this.msfix=i0}function U(I,g,f,N,b,V,t,L,Z,H,O,F,z,u0){this.quant_comp=g,this.quant_comp_s=f,this.safejoint=N,this.nsmsfix=b,this.st_lrm=V,this.st_s=t,this.nsbass=L,this.scale=Z,this.masking_adj=H,this.ath_lower=O,this.ath_curve=F,this.interch=z,this.sfscale=u0}var X;this.setModules=function(I){X=I};var W=[new j(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new j(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new j(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new j(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new j(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new j(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new j(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new j(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new j(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new j(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new j(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],Y=[new j(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new j(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new j(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new j(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new j(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new j(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new j(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new j(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new j(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new j(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new j(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function $(I,g,f){var N=I.VBR==A.vbr_rh?W:Y,b=I.VBR_q_frac,V=N[g],t=N[g+1],L=V;V.st_lrm=V.st_lrm+b*(t.st_lrm-V.st_lrm),V.st_s=V.st_s+b*(t.st_s-V.st_s),V.masking_adj=V.masking_adj+b*(t.masking_adj-V.masking_adj),V.masking_adj_short=V.masking_adj_short+b*(t.masking_adj_short-V.masking_adj_short),V.ath_lower=V.ath_lower+b*(t.ath_lower-V.ath_lower),V.ath_curve=V.ath_curve+b*(t.ath_curve-V.ath_curve),V.ath_sensitivity=V.ath_sensitivity+b*(t.ath_sensitivity-V.ath_sensitivity),V.interch=V.interch+b*(t.interch-V.interch),V.msfix=V.msfix+b*(t.msfix-V.msfix),v0(I,L.vbr_q),f!=0?I.quant_comp=L.quant_comp:Math.abs(I.quant_comp- -1)>0||(I.quant_comp=L.quant_comp),f!=0?I.quant_comp_short=L.quant_comp_s:Math.abs(I.quant_comp_short- -1)>0||(I.quant_comp_short=L.quant_comp_s),L.expY!=0&&(I.experimentalY=L.expY!=0),f!=0?I.internal_flags.nsPsy.attackthre=L.st_lrm:Math.abs(I.internal_flags.nsPsy.attackthre- -1)>0||(I.internal_flags.nsPsy.attackthre=L.st_lrm),f!=0?I.internal_flags.nsPsy.attackthre_s=L.st_s:Math.abs(I.internal_flags.nsPsy.attackthre_s- -1)>0||(I.internal_flags.nsPsy.attackthre_s=L.st_s),f!=0?I.maskingadjust=L.masking_adj:Math.abs(I.maskingadjust-0)>0||(I.maskingadjust=L.masking_adj),f!=0?I.maskingadjust_short=L.masking_adj_short:Math.abs(I.maskingadjust_short-0)>0||(I.maskingadjust_short=L.masking_adj_short),f!=0?I.ATHlower=-L.ath_lower/10:Math.abs(-I.ATHlower*10-0)>0||(I.ATHlower=-L.ath_lower/10),f!=0?I.ATHcurve=L.ath_curve:Math.abs(I.ATHcurve- -1)>0||(I.ATHcurve=L.ath_curve),f!=0?I.athaa_sensitivity=L.ath_sensitivity:Math.abs(I.athaa_sensitivity- -1)>0||(I.athaa_sensitivity=L.ath_sensitivity),L.interch>0&&(f!=0?I.interChRatio=L.interch:Math.abs(I.interChRatio- -1)>0||(I.interChRatio=L.interch)),L.safejoint>0&&(I.exp_nspsytune=I.exp_nspsytune|L.safejoint),L.sfb21mod>0&&(I.exp_nspsytune=I.exp_nspsytune|L.sfb21mod<<20),f!=0?I.msfix=L.msfix:Math.abs(I.msfix- -1)>0||(I.msfix=L.msfix),f==0&&(I.VBR_q=g,I.VBR_q_frac=b)}var B=[new U(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new U(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new U(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new U(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new U(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new U(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new U(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new U(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new U(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new U(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new U(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new U(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new U(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new U(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new U(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new U(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new U(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function w(I,g,f){var N=g,b=X.nearestBitrateFullIndex(g);if(I.VBR=A.vbr_abr,I.VBR_mean_bitrate_kbps=N,I.VBR_mean_bitrate_kbps=Math.min(I.VBR_mean_bitrate_kbps,320),I.VBR_mean_bitrate_kbps=Math.max(I.VBR_mean_bitrate_kbps,8),I.brate=I.VBR_mean_bitrate_kbps,I.VBR_mean_bitrate_kbps>320&&(I.disable_reservoir=!0),B[b].safejoint>0&&(I.exp_nspsytune=I.exp_nspsytune|2),B[b].sfscale>0&&(I.internal_flags.noise_shaping=2),Math.abs(B[b].nsbass)>0){var V=int(B[b].nsbass*4);V<0&&(V+=64),I.exp_nspsytune=I.exp_nspsytune|V<<2}return f!=0?I.quant_comp=B[b].quant_comp:Math.abs(I.quant_comp- -1)>0||(I.quant_comp=B[b].quant_comp),f!=0?I.quant_comp_short=B[b].quant_comp_s:Math.abs(I.quant_comp_short- -1)>0||(I.quant_comp_short=B[b].quant_comp_s),f!=0?I.msfix=B[b].nsmsfix:Math.abs(I.msfix- -1)>0||(I.msfix=B[b].nsmsfix),f!=0?I.internal_flags.nsPsy.attackthre=B[b].st_lrm:Math.abs(I.internal_flags.nsPsy.attackthre- -1)>0||(I.internal_flags.nsPsy.attackthre=B[b].st_lrm),f!=0?I.internal_flags.nsPsy.attackthre_s=B[b].st_s:Math.abs(I.internal_flags.nsPsy.attackthre_s- -1)>0||(I.internal_flags.nsPsy.attackthre_s=B[b].st_s),f!=0?I.scale=B[b].scale:Math.abs(I.scale- -1)>0||(I.scale=B[b].scale),f!=0?I.maskingadjust=B[b].masking_adj:Math.abs(I.maskingadjust-0)>0||(I.maskingadjust=B[b].masking_adj),B[b].masking_adj>0?f!=0?I.maskingadjust_short=B[b].masking_adj*.9:Math.abs(I.maskingadjust_short-0)>0||(I.maskingadjust_short=B[b].masking_adj*.9):f!=0?I.maskingadjust_short=B[b].masking_adj*1.1:Math.abs(I.maskingadjust_short-0)>0||(I.maskingadjust_short=B[b].masking_adj*1.1),f!=0?I.ATHlower=-B[b].ath_lower/10:Math.abs(-I.ATHlower*10-0)>0||(I.ATHlower=-B[b].ath_lower/10),f!=0?I.ATHcurve=B[b].ath_curve:Math.abs(I.ATHcurve- -1)>0||(I.ATHcurve=B[b].ath_curve),f!=0?I.interChRatio=B[b].interch:Math.abs(I.interChRatio- -1)>0||(I.interChRatio=B[b].interch),g}this.apply_preset=function(I,g,f){switch(g){case k.R3MIX:{g=k.V3,I.VBR=A.vbr_mtrh;break}case k.MEDIUM:{g=k.V4,I.VBR=A.vbr_rh;break}case k.MEDIUM_FAST:{g=k.V4,I.VBR=A.vbr_mtrh;break}case k.STANDARD:{g=k.V2,I.VBR=A.vbr_rh;break}case k.STANDARD_FAST:{g=k.V2,I.VBR=A.vbr_mtrh;break}case k.EXTREME:{g=k.V0,I.VBR=A.vbr_rh;break}case k.EXTREME_FAST:{g=k.V0,I.VBR=A.vbr_mtrh;break}case k.INSANE:return g=320,I.preset=g,w(I,g,f),I.VBR=A.vbr_off,g}switch(I.preset=g,g){case k.V9:return $(I,9,f),g;case k.V8:return $(I,8,f),g;case k.V7:return $(I,7,f),g;case k.V6:return $(I,6,f),g;case k.V5:return $(I,5,f),g;case k.V4:return $(I,4,f),g;case k.V3:return $(I,3,f),g;case k.V2:return $(I,2,f),g;case k.V1:return $(I,1,f),g;case k.V0:return $(I,0,f),g}return 8<=g&&g<=320?w(I,g,f):(I.preset=0,g)};function v0(I,g){var f=0;return 0>g&&(f=-1,g=0),9<g&&(f=-1,g=9),I.VBR_q=g,I.VBR_q_frac=0,f}}return _e=J,_e}var le,ra;function La(){if(ra)return le;ra=1;function _(){this.setModules=function(A,J){}}return le=_,le}var oe,ta;function Va(){if(ta)return oe;ta=1;function _(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}return oe=_,oe}var ve,na;function pa(){if(na)return ve;na=1;var _=G0(),A=_.new_float,J=_.new_int;_.assert;function k(){this.global_gain=0,this.sfb_count1=0,this.step=J(39),this.noise=A(39),this.noise_log=A(39)}return ve=k,ve}var ue,ia;function Na(){if(ia)return ue;ia=1;var _=G0(),A=_.System,J=_.VbrMode;_.Float,_.ShortBlock;var k=_.Util,j=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var U=_.new_float;_.new_float_n,_.new_int,_.new_int_n;var X=_.assert,W=La(),Y=Va(),$=pa(),B=$0(),w=D1(),v0=y1();function I(){var g;this.rv=null;var f;this.qupvt=null;var N,b=new W,V;this.setModules=function(S,l,c,R){g=S,f=l,this.rv=l,N=c,this.qupvt=c,V=R,b.setModules(N,V)},this.ms_convert=function(S,l){for(var c=0;c<576;++c){var R=S.tt[l][0].xr[c],q=S.tt[l][1].xr[c];S.tt[l][0].xr[c]=(R+q)*(k.SQRT2*.5),S.tt[l][1].xr[c]=(R-q)*(k.SQRT2*.5)}};function t(S,l,c,R){R=0;for(var q=0;q<=c;++q){var u=Math.abs(S.xr[q]);R+=u,l[q]=Math.sqrt(u*Math.sqrt(u)),l[q]>S.xrpow_max&&(S.xrpow_max=l[q])}return R}this.init_xrpow=function(S,l,c){var R=0,q=0|l.max_nonzero_coeff;if(X(c!=null),l.xrpow_max=0,X(0<=q&&q<=575),j.fill(c,q,576,0),R=t(l,c,q,R),R>1e-20){var u=0;(S.substep_shaping&2)!=0&&(u=1);for(var n=0;n<l.psymax;n++)S.pseudohalf[n]=u;return!0}return j.fill(l.l3_enc,0,576,0),!1};function L(S,l){var c=S.ATH,R=l.xr;if(l.block_type!=B.SHORT_TYPE)for(var q=!1,u=B.PSFB21-1;u>=0&&!q;u--){var n=S.scalefac_band.psfb21[u],e=S.scalefac_band.psfb21[u+1],r=N.athAdjust(c.adjust,c.psfb21[u],c.floor);S.nsPsy.longfact[21]>1e-12&&(r*=S.nsPsy.longfact[21]);for(var a=e-1;a>=n;a--)if(Math.abs(R[a])<r)R[a]=0;else{q=!0;break}}else for(var i=0;i<3;i++)for(var q=!1,u=B.PSFB12-1;u>=0&&!q;u--){var n=S.scalefac_band.s[12]*3+(S.scalefac_band.s[13]-S.scalefac_band.s[12])*i+(S.scalefac_band.psfb12[u]-S.scalefac_band.psfb12[0]),e=n+(S.scalefac_band.psfb12[u+1]-S.scalefac_band.psfb12[u]),d=N.athAdjust(c.adjust,c.psfb12[u],c.floor);S.nsPsy.shortfact[12]>1e-12&&(d*=S.nsPsy.shortfact[12]);for(var a=e-1;a>=n;a--)if(Math.abs(R[a])<d)R[a]=0;else{q=!0;break}}}this.init_outer_loop=function(S,l){l.part2_3_length=0,l.big_values=0,l.count1=0,l.global_gain=210,l.scalefac_compress=0,l.table_select[0]=0,l.table_select[1]=0,l.table_select[2]=0,l.subblock_gain[0]=0,l.subblock_gain[1]=0,l.subblock_gain[2]=0,l.subblock_gain[3]=0,l.region0_count=0,l.region1_count=0,l.preflag=0,l.scalefac_scale=0,l.count1table_select=0,l.part2_length=0,l.sfb_lmax=B.SBPSY_l,l.sfb_smin=B.SBPSY_s,l.psy_lmax=S.sfb21_extra?B.SBMAX_l:B.SBPSY_l,l.psymax=l.psy_lmax,l.sfbmax=l.sfb_lmax,l.sfbdivide=11;for(var c=0;c<B.SBMAX_l;c++)l.width[c]=S.scalefac_band.l[c+1]-S.scalefac_band.l[c],l.window[c]=3;if(l.block_type==B.SHORT_TYPE){var R=U(576);l.sfb_smin=0,l.sfb_lmax=0,l.mixed_block_flag!=0&&(l.sfb_smin=3,l.sfb_lmax=S.mode_gr*2+4),l.psymax=l.sfb_lmax+3*((S.sfb21_extra?B.SBMAX_s:B.SBPSY_s)-l.sfb_smin),l.sfbmax=l.sfb_lmax+3*(B.SBPSY_s-l.sfb_smin),l.sfbdivide=l.sfbmax-18,l.psy_lmax=l.sfb_lmax;var q=S.scalefac_band.l[l.sfb_lmax];A.arraycopy(l.xr,0,R,0,576);for(var c=l.sfb_smin;c<B.SBMAX_s;c++)for(var u=S.scalefac_band.s[c],n=S.scalefac_band.s[c+1],e=0;e<3;e++)for(var r=u;r<n;r++)l.xr[q++]=R[3*r+e];for(var a=l.sfb_lmax,c=l.sfb_smin;c<B.SBMAX_s;c++)l.width[a]=l.width[a+1]=l.width[a+2]=S.scalefac_band.s[c+1]-S.scalefac_band.s[c],l.window[a]=0,l.window[a+1]=1,l.window[a+2]=2,a+=3}l.count1bits=0,l.sfb_partition_table=N.nr_of_sfb_block[0][0],l.slen[0]=0,l.slen[1]=0,l.slen[2]=0,l.slen[3]=0,l.max_nonzero_coeff=575,j.fill(l.scalefac,0),L(S,l)};function Z(S){this.ordinal=S}Z.BINSEARCH_NONE=new Z(0),Z.BINSEARCH_UP=new Z(1),Z.BINSEARCH_DOWN=new Z(2);function H(S,l,c,R,q){var u,n=S.CurrentStep[R],e=!1,r=S.OldValue[R],a=Z.BINSEARCH_NONE;for(l.global_gain=r,c-=l.part2_length,X(n!=0);;){var i;if(u=V.count_bits(S,q,l,null),n==1||u==c)break;u>c?(a==Z.BINSEARCH_DOWN&&(e=!0),e&&(n/=2),a=Z.BINSEARCH_UP,i=n):(a==Z.BINSEARCH_UP&&(e=!0),e&&(n/=2),a=Z.BINSEARCH_DOWN,i=-n),l.global_gain+=i,l.global_gain<0&&(l.global_gain=0,e=!0),l.global_gain>255&&(l.global_gain=255,e=!0)}for(X(l.global_gain>=0),X(l.global_gain<256);u>c&&l.global_gain<255;)l.global_gain++,u=V.count_bits(S,q,l,null);return S.CurrentStep[R]=r-l.global_gain>=4?4:2,S.OldValue[R]=l.global_gain,l.part2_3_length=u,u}this.trancate_smallspectrums=function(S,l,c,R){var q=U(v0.SFBMAX);if(!((S.substep_shaping&4)==0&&l.block_type==B.SHORT_TYPE||(S.substep_shaping&128)!=0)){N.calc_noise(l,c,q,new Y,null);for(var n=0;n<576;n++){var u=0;l.l3_enc[n]!=0&&(u=Math.abs(l.xr[n])),R[n]=u}var n=0,e=8;l.block_type==B.SHORT_TYPE&&(e=6);do{var r,a,i,d,M=l.width[e];if(n+=M,!(q[e]>=1)&&(j.sort(R,n-M,M),!BitStream.EQ(R[n-1],0))){r=(1-q[e])*c[e],a=0,d=0;do{var T;for(i=1;d+i<M&&!BitStream.NEQ(R[d+n-M],R[d+n+i-M]);i++);if(T=R[d+n-M]*R[d+n-M]*i,r<T){d!=0&&(a=R[d+n-M-1]);break}r-=T,d+=i}while(d<M);if(!BitStream.EQ(a,0))do Math.abs(l.xr[n-M])<=a&&(l.l3_enc[n-M]=0);while(--M>0)}}while(++e<l.psymax);l.part2_3_length=V.noquant_count_bits(S,l,null)}};function O(S){for(var l=0;l<S.sfbmax;l++)if(S.scalefac[l]+S.subblock_gain[S.window[l]]==0)return!1;return!0}function F(S){return k.FAST_LOG10(.368+.632*S*S*S)}function z(S,l){for(var c=1e-37,R=0;R<l.psymax;R++)c+=F(S[R]);return Math.max(1e-20,c)}function u0(S,l,c,R,q){var u;switch(S){default:case 9:{l.over_count>0?(u=c.over_SSD<=l.over_SSD,c.over_SSD==l.over_SSD&&(u=c.bits<l.bits)):u=c.max_noise<0&&c.max_noise*10+c.bits<=l.max_noise*10+l.bits;break}case 0:u=c.over_count<l.over_count||c.over_count==l.over_count&&c.over_noise<l.over_noise||c.over_count==l.over_count&&BitStream.EQ(c.over_noise,l.over_noise)&&c.tot_noise<l.tot_noise;break;case 8:c.max_noise=z(q,R);case 1:u=c.max_noise<l.max_noise;break;case 2:u=c.tot_noise<l.tot_noise;break;case 3:u=c.tot_noise<l.tot_noise&&c.max_noise<l.max_noise;break;case 4:u=c.max_noise<=0&&l.max_noise>.2||c.max_noise<=0&&l.max_noise<0&&l.max_noise>c.max_noise-.2&&c.tot_noise<l.tot_noise||c.max_noise<=0&&l.max_noise>0&&l.max_noise>c.max_noise-.2&&c.tot_noise<l.tot_noise+l.over_noise||c.max_noise>0&&l.max_noise>-.05&&l.max_noise>c.max_noise-.1&&c.tot_noise+c.over_noise<l.tot_noise+l.over_noise||c.max_noise>0&&l.max_noise>-.1&&l.max_noise>c.max_noise-.15&&c.tot_noise+c.over_noise+c.over_noise<l.tot_noise+l.over_noise+l.over_noise;break;case 5:u=c.over_noise<l.over_noise||BitStream.EQ(c.over_noise,l.over_noise)&&c.tot_noise<l.tot_noise;break;case 6:u=c.over_noise<l.over_noise||BitStream.EQ(c.over_noise,l.over_noise)&&(c.max_noise<l.max_noise||BitStream.EQ(c.max_noise,l.max_noise)&&c.tot_noise<=l.tot_noise);break;case 7:u=c.over_count<l.over_count||c.over_noise<l.over_noise;break}return l.over_count==0&&(u=u&&c.bits<l.bits),u}function i0(S,l,c,R,q){var u=S.internal_flags,n;l.scalefac_scale==0?n=1.2968395546510096:n=1.6817928305074292;for(var e=0,r=0;r<l.sfbmax;r++)e<c[r]&&(e=c[r]);var a=u.noise_shaping_amp;switch(a==3&&(q?a=2:a=1),a){case 2:break;case 1:e>1?e=Math.pow(e,.5):e*=.95;break;case 0:default:e>1?e=1:e*=.95;break}for(var i=0,r=0;r<l.sfbmax;r++){var d=l.width[r],M;if(i+=d,!(c[r]<e)){if((u.substep_shaping&2)!=0&&(u.pseudohalf[r]=u.pseudohalf[r]==0?1:0,u.pseudohalf[r]==0&&u.noise_shaping_amp==2))return;for(l.scalefac[r]++,M=-d;M<0;M++)R[i+M]*=n,R[i+M]>l.xrpow_max&&(l.xrpow_max=R[i+M]);if(u.noise_shaping_amp==2)return}}}function o(S,l){for(var c=1.2968395546510096,R=0,q=0;q<S.sfbmax;q++){var u=S.width[q],n=S.scalefac[q];if(S.preflag!=0&&(n+=N.pretab[q]),R+=u,(n&1)!=0){n++;for(var e=-u;e<0;e++)l[R+e]*=c,l[R+e]>S.xrpow_max&&(S.xrpow_max=l[R+e])}S.scalefac[q]=n>>1}S.preflag=0,S.scalefac_scale=1}function w0(S,l,c){var R,q=l.scalefac;for(R=0;R<l.sfb_lmax;R++)if(q[R]>=16)return!0;for(var u=0;u<3;u++){var n=0,e=0;for(R=l.sfb_lmax+u;R<l.sfbdivide;R+=3)n<q[R]&&(n=q[R]);for(;R<l.sfbmax;R+=3)e<q[R]&&(e=q[R]);if(!(n<16&&e<8)){if(l.subblock_gain[u]>=7)return!0;l.subblock_gain[u]++;var r=S.scalefac_band.l[l.sfb_lmax];for(R=l.sfb_lmax+u;R<l.sfbmax;R+=3){var a,i=l.width[R],d=q[R];if(X(d>=0),d=d-(4>>l.scalefac_scale),d>=0){q[R]=d,r+=i*3;continue}q[R]=0;{var M=210+(d<<l.scalefac_scale+1);a=N.IPOW20(M)}r+=i*(u+1);for(var T=-i;T<0;T++)c[r+T]*=a,c[r+T]>l.xrpow_max&&(l.xrpow_max=c[r+T]);r+=i*(3-u-1)}{var a=N.IPOW20(202);r+=l.width[R]*(u+1);for(var T=-l.width[R];T<0;T++)c[r+T]*=a,c[r+T]>l.xrpow_max&&(l.xrpow_max=c[r+T])}}}return!1}function o0(S,l,c,R,q){var u=S.internal_flags;i0(S,l,c,R,q);var n=O(l);return n?!1:(u.mode_gr==2?n=V.scale_bitcount(l):n=V.scale_bitcount_lsf(u,l),n?(u.noise_shaping>1&&(j.fill(u.pseudohalf,0),l.scalefac_scale==0?(o(l,R),n=!1):l.block_type==B.SHORT_TYPE&&u.subblock_gain>0&&(n=w0(u,l,R)||O(l))),n||(u.mode_gr==2?n=V.scale_bitcount(l):n=V.scale_bitcount_lsf(u,l)),!n):!0)}this.outer_loop=function(S,l,c,R,q,u){var n=S.internal_flags,e=new w,r=U(576),a=U(v0.SFBMAX),i=new Y,d,M=new $,T=9999999,E=!1,C=!1,t0=0;if(H(n,l,u,q,R),n.noise_shaping==0)return 100;N.calc_noise(l,c,a,i,M),i.bits=l.part2_3_length,e.assign(l);var n0=0;for(A.arraycopy(R,0,r,0,576);!E;){do{var M0=new Y,b0,d0=255;if((n.substep_shaping&2)!=0?b0=20:b0=3,n.sfb21_extra&&(a[e.sfbmax]>1||e.block_type==B.SHORT_TYPE&&(a[e.sfbmax+1]>1||a[e.sfbmax+2]>1))||!o0(S,e,a,R,C))break;e.scalefac_scale!=0&&(d0=254);var x0=u-e.part2_length;if(x0<=0)break;for(;(e.part2_3_length=V.count_bits(n,R,e,M))>x0&&e.global_gain<=d0;)e.global_gain++;if(e.global_gain>d0)break;if(i.over_count==0){for(;(e.part2_3_length=V.count_bits(n,R,e,M))>T&&e.global_gain<=d0;)e.global_gain++;if(e.global_gain>d0)break}if(N.calc_noise(e,c,a,M0,M),M0.bits=e.part2_3_length,l.block_type!=B.SHORT_TYPE?d=S.quant_comp:d=S.quant_comp_short,d=u0(d,i,M0,e,a)?1:0,d!=0)T=l.part2_3_length,i=M0,l.assign(e),n0=0,A.arraycopy(R,0,r,0,576);else if(n.full_outer_loop==0&&(++n0>b0&&i.over_count==0||n.noise_shaping_amp==3&&C&&n0>30||n.noise_shaping_amp==3&&C&&e.global_gain-t0>15))break}while(e.global_gain+e.scalefac_scale<255);n.noise_shaping_amp==3?C?E=!0:(e.assign(l),A.arraycopy(r,0,R,0,576),n0=0,t0=e.global_gain,C=!0):E=!0}return X(l.global_gain+l.scalefac_scale<=255),S.VBR==J.vbr_rh||S.VBR==J.vbr_mtrh?A.arraycopy(r,0,R,0,576):(n.substep_shaping&1)!=0&&trancate_smallspectrums(n,l,c,R),i.over_count},this.iteration_finish_one=function(S,l,c){var R=S.l3_side,q=R.tt[l][c];V.best_scalefac_store(S,l,c,R),S.use_best_huffman==1&&V.best_huffman_divide(S,q),f.ResvAdjust(S,q)},this.VBR_encode_granule=function(S,l,c,R,q,u,n){var e=S.internal_flags,r=new w,a=U(576),i=n,d=n+1,M=(n+u)/2,T,E,C=0,t0=e.sfb21_extra;X(i<=LameInternalFlags.MAX_BITS_PER_CHANNEL),j.fill(r.l3_enc,0);do X(M>=u),X(M<=n),X(u<=n),M>i-42?e.sfb21_extra=!1:e.sfb21_extra=t0,E=outer_loop(S,l,c,R,q,M),E<=0?(C=1,d=l.part2_3_length,r.assign(l),A.arraycopy(R,0,a,0,576),n=d-32,T=n-u,M=(n+u)/2):(u=M+32,T=n-u,M=(n+u)/2,C!=0&&(C=2,l.assign(r),A.arraycopy(a,0,R,0,576)));while(T>12);e.sfb21_extra=t0,C==2&&A.arraycopy(r.l3_enc,0,l.l3_enc,0,576),X(l.part2_3_length<=i)},this.get_framebits=function(S,l){var c=S.internal_flags;c.bitrate_index=c.VBR_min_bitrate;var R=g.getframebits(S);c.bitrate_index=1,R=g.getframebits(S);for(var q=1;q<=c.VBR_max_bitrate;q++){c.bitrate_index=q;var u=new MeanBits(R);l[q]=f.ResvFrameBegin(S,u),R=u.bits}},this.VBR_old_prepare=function(S,l,c,R,q,u,n,e,r){var a=S.internal_flags,i,d=0,M=1,T=0;a.bitrate_index=a.VBR_max_bitrate;var E=f.ResvFrameBegin(S,new MeanBits(0))/a.mode_gr;get_framebits(S,u);for(var C=0;C<a.mode_gr;C++){var t0=N.on_pe(S,l,e[C],E,C,0);a.mode_ext==B.MPG_MD_MS_LR&&(ms_convert(a.l3_side,C),N.reduce_side(e[C],c[C],E,t0));for(var n0=0;n0<a.channels_out;++n0){var M0=a.l3_side.tt[C][n0];M0.block_type!=B.SHORT_TYPE?(d=1.28/(1+Math.exp(3.5-l[C][n0]/300))-.05,i=a.PSY.mask_adjust-d):(d=2.56/(1+Math.exp(3.5-l[C][n0]/300))-.14,i=a.PSY.mask_adjust_short-d),a.masking_lower=Math.pow(10,i*.1),init_outer_loop(a,M0),r[C][n0]=N.calc_xmin(S,R[C][n0],M0,q[C][n0]),r[C][n0]!=0&&(M=0),n[C][n0]=126,T+=e[C][n0]}}for(var C=0;C<a.mode_gr;C++)for(var n0=0;n0<a.channels_out;n0++)T>u[a.VBR_max_bitrate]&&(e[C][n0]*=u[a.VBR_max_bitrate],e[C][n0]/=T),n[C][n0]>e[C][n0]&&(n[C][n0]=e[C][n0]);return M},this.bitpressure_strategy=function(S,l,c,R){for(var q=0;q<S.mode_gr;q++)for(var u=0;u<S.channels_out;u++){for(var n=S.l3_side.tt[q][u],e=l[q][u],r=0,a=0;a<n.psy_lmax;a++)e[r++]*=1+.029*a*a/B.SBMAX_l/B.SBMAX_l;if(n.block_type==B.SHORT_TYPE)for(var a=n.sfb_smin;a<B.SBMAX_s;a++)e[r++]*=1+.029*a*a/B.SBMAX_s/B.SBMAX_s,e[r++]*=1+.029*a*a/B.SBMAX_s/B.SBMAX_s,e[r++]*=1+.029*a*a/B.SBMAX_s/B.SBMAX_s;R[q][u]=0|Math.max(c[q][u],.9*R[q][u])}},this.VBR_new_prepare=function(S,l,c,R,q,u){var n=S.internal_flags,e=1,r=0,a=0,i;if(S.free_format){n.bitrate_index=0;var d=new MeanBits(r);i=f.ResvFrameBegin(S,d),r=d.bits,q[0]=i}else{n.bitrate_index=n.VBR_max_bitrate;var d=new MeanBits(r);f.ResvFrameBegin(S,d),r=d.bits,get_framebits(S,q),i=q[n.VBR_max_bitrate]}for(var M=0;M<n.mode_gr;M++){N.on_pe(S,l,u[M],r,M,0),n.mode_ext==B.MPG_MD_MS_LR&&ms_convert(n.l3_side,M);for(var T=0;T<n.channels_out;++T){var E=n.l3_side.tt[M][T];n.masking_lower=Math.pow(10,n.PSY.mask_adjust*.1),init_outer_loop(n,E),N.calc_xmin(S,c[M][T],E,R[M][T])!=0&&(e=0),a+=u[M][T]}}for(var M=0;M<n.mode_gr;M++)for(var T=0;T<n.channels_out;T++)a>i&&(u[M][T]*=i,u[M][T]/=a);return e},this.calc_target_bits=function(S,l,c,R,q,u){var n=S.internal_flags,e=n.l3_side,r,a,i,d,M=0;n.bitrate_index=n.VBR_max_bitrate;var T=new MeanBits(M);for(u[0]=f.ResvFrameBegin(S,T),M=T.bits,n.bitrate_index=1,M=g.getframebits(S)-n.sideinfo_len*8,q[0]=M/(n.mode_gr*n.channels_out),M=S.VBR_mean_bitrate_kbps*S.framesize*1e3,(n.substep_shaping&1)!=0&&(M*=1.09),M/=S.out_samplerate,M-=n.sideinfo_len*8,M/=n.mode_gr*n.channels_out,r=.93+.07*(11-S.compression_ratio)/(11-5.5),r<.9&&(r=.9),r>1&&(r=1),a=0;a<n.mode_gr;a++){var E=0;for(i=0;i<n.channels_out;i++){if(R[a][i]=int(r*M),l[a][i]>700){var C=int((l[a][i]-700)/1.4),t0=e.tt[a][i];R[a][i]=int(r*M),t0.block_type==B.SHORT_TYPE&&C<M/2&&(C=M/2),C>M*3/2?C=M*3/2:C<0&&(C=0),R[a][i]+=C}R[a][i]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(R[a][i]=LameInternalFlags.MAX_BITS_PER_CHANNEL),E+=R[a][i]}if(E>LameInternalFlags.MAX_BITS_PER_GRANULE)for(i=0;i<n.channels_out;++i)R[a][i]*=LameInternalFlags.MAX_BITS_PER_GRANULE,R[a][i]/=E}if(n.mode_ext==B.MPG_MD_MS_LR)for(a=0;a<n.mode_gr;a++)N.reduce_side(R[a],c[a],M*n.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(d=0,a=0;a<n.mode_gr;a++)for(i=0;i<n.channels_out;i++)R[a][i]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(R[a][i]=LameInternalFlags.MAX_BITS_PER_CHANNEL),d+=R[a][i];if(d>u[0])for(a=0;a<n.mode_gr;a++)for(i=0;i<n.channels_out;i++)R[a][i]*=u[0],R[a][i]/=d}}return ue=I,ue}var he,sa;function Ha(){if(sa)return he;sa=1;var _=G0(),A=_.assert;function J(){var k;this.setModules=function(j){k=j},this.ResvFrameBegin=function(j,U){var X=j.internal_flags,W,Y=X.l3_side,$=k.getframebits(j);U.bits=($-X.sideinfo_len*8)/X.mode_gr;var B=8*256*X.mode_gr-8;j.brate>320?W=8*int(j.brate*1e3/(j.out_samplerate/1152)/8+.5):(W=8*1440,j.strict_ISO&&(W=8*int(32e4/(j.out_samplerate/1152)/8+.5))),X.ResvMax=W-$,X.ResvMax>B&&(X.ResvMax=B),(X.ResvMax<0||j.disable_reservoir)&&(X.ResvMax=0);var w=U.bits*X.mode_gr+Math.min(X.ResvSize,X.ResvMax);return w>W&&(w=W),A(X.ResvMax%8==0),A(X.ResvMax>=0),Y.resvDrain_pre=0,X.pinfo!=null&&(X.pinfo.mean_bits=U.bits/2,X.pinfo.resvsize=X.ResvSize),w},this.ResvMaxBits=function(j,U,X,W){var Y=j.internal_flags,$,B=Y.ResvSize,w=Y.ResvMax;W!=0&&(B+=U),(Y.substep_shaping&1)!=0&&(w*=.9),X.bits=U,B*10>w*9?($=B-w*9/10,X.bits+=$,Y.substep_shaping|=128):($=0,Y.substep_shaping&=127,!j.disable_reservoir&&(Y.substep_shaping&1)==0&&(X.bits-=.1*U));var v0=B<Y.ResvMax*6/10?B:Y.ResvMax*6/10;return v0-=$,v0<0&&(v0=0),v0},this.ResvAdjust=function(j,U){j.ResvSize-=U.part2_3_length+U.part2_length},this.ResvFrameEnd=function(j,U){var X,W=j.l3_side;j.ResvSize+=U*j.mode_gr;var Y=0;W.resvDrain_post=0,W.resvDrain_pre=0,(X=j.ResvSize%8)!=0&&(Y+=X),X=j.ResvSize-Y-j.ResvMax,X>0&&(A(X%8==0),A(X>=0),Y+=X);{var $=Math.min(W.main_data_begin*8,Y)/8;W.resvDrain_pre+=8*$,Y-=8*$,j.ResvSize-=8*$,W.main_data_begin-=$}W.resvDrain_post+=Y,j.ResvSize-=Y}}return he=J,he}var fe,_a;function Ca(){if(_a)return fe;_a=1;function _(){var A="http://www.mp3dev.org/",J=3,k=98,j=4,U=0,X=93;this.getLameVersion=function(){return J+"."+k+"."+j},this.getLameShortVersion=function(){return J+"."+k+"."+j},this.getLameVeryShortVersion=function(){return"LAME"+J+"."+k+"r"},this.getPsyVersion=function(){return U+"."+X},this.getLameUrl=function(){return A},this.getLameOsBitness=function(){return"32bits"}}return fe=_,fe}var me,la;function Oa(){if(la)return me;la=1;var _=G0(),A=_.System,J=_.VbrMode;_.Float;var k=_.ShortBlock;_.Util;var j=_.Arrays;_.new_array_n;var U=_.new_byte;_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n;var X=_.assert;W.NUMTOCENTRIES=100,W.MAXFRAMESIZE=2880;function W(){var Y,$,B;this.setModules=function(n,e,r){Y=n,$=e,B=r};var w=1,v0=2,I=4,g=8,f=W.NUMTOCENTRIES,N=W.MAXFRAMESIZE,b=f+4+4+4+4+4,V=b+9+1+1+8+1+1+3+1+1+2+4+2+2,t=128,L=64,Z=32,H=null,O="Xing",F="Info",z=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function u0(n,e){if(n.nVbrNumFrames++,n.sum+=e,n.seen++,!(n.seen<n.want)&&(n.pos<n.size&&(n.bag[n.pos]=n.sum,n.pos++,n.seen=0),n.pos==n.size)){for(var r=1;r<n.size;r+=2)n.bag[r/2]=n.bag[r];n.want*=2,n.pos/=2}}function i0(n,e){if(!(n.pos<=0))for(var r=1;r<f;++r){var a=r/f,i,d,M=0|Math.floor(a*n.pos);M>n.pos-1&&(M=n.pos-1),i=n.bag[M],d=n.sum;var T=0|256*i/d;T>255&&(T=255),e[r]=255&T}}this.addVbrFrame=function(n){var e=n.internal_flags,r=Tables.bitrate_table[n.version][e.bitrate_index];X(e.VBR_seek_table.bag!=null),u0(e.VBR_seek_table,r)};function o(n,e){var r=n[e+0]&255;return r<<=8,r|=n[e+1]&255,r<<=8,r|=n[e+2]&255,r<<=8,r|=n[e+3]&255,r}function w0(n,e,r){n[e+0]=255&(r>>24&255),n[e+1]=255&(r>>16&255),n[e+2]=255&(r>>8&255),n[e+3]=255&(r&255)}function o0(n,e,r){n[e+0]=255&(r>>8&255),n[e+1]=255&(r&255)}function S(n,e){return new String(n,e,O.length(),H).equals(O)||new String(n,e,F.length(),H).equals(F)}function l(n,e,r){return 255&(n<<e|r&~(-1<<e))}function c(n,e){var r=n.internal_flags;e[0]=l(e[0],8,255),e[1]=l(e[1],3,7),e[1]=l(e[1],1,n.out_samplerate<16e3?0:1),e[1]=l(e[1],1,n.version),e[1]=l(e[1],2,1),e[1]=l(e[1],1,n.error_protection?0:1),e[2]=l(e[2],4,r.bitrate_index),e[2]=l(e[2],2,r.samplerate_index),e[2]=l(e[2],1,0),e[2]=l(e[2],1,n.extension),e[3]=l(e[3],2,n.mode.ordinal()),e[3]=l(e[3],2,r.mode_ext),e[3]=l(e[3],1,n.copyright),e[3]=l(e[3],1,n.original),e[3]=l(e[3],2,n.emphasis),e[0]=255;var a=255&(e[1]&241),i;n.version==1?i=t:n.out_samplerate<16e3?i=Z:i=L,n.VBR==J.vbr_off&&(i=n.brate);var d;n.free_format?d=0:d=255&16*Y.BitrateIndex(i,n.version,n.out_samplerate),n.version==1?(e[1]=255&(a|10),a=255&(e[2]&13),e[2]=255&(d|a)):(e[1]=255&(a|2),a=255&(e[2]&13),e[2]=255&(d|a))}this.getVbrTag=function(n){var e=new VBRTagData,r=0;e.flags=0;var a=n[r+1]>>3&1,i=n[r+2]>>2&3,d=n[r+3]>>6&3,M=n[r+2]>>4&15;if(M=Tables.bitrate_table[a][M],n[r+1]>>4==14?e.samprate=Tables.samplerate_table[2][i]:e.samprate=Tables.samplerate_table[a][i],a!=0?d!=3?r+=36:r+=21:d!=3?r+=21:r+=13,!S(n,r))return null;r+=4,e.hId=a;var T=e.flags=o(n,r);if(r+=4,(T&w)!=0&&(e.frames=o(n,r),r+=4),(T&v0)!=0&&(e.bytes=o(n,r),r+=4),(T&I)!=0){if(e.toc!=null)for(var E=0;E<f;E++)e.toc[E]=n[r+E];r+=f}e.vbrScale=-1,(T&g)!=0&&(e.vbrScale=o(n,r),r+=4),e.headersize=(a+1)*72e3*M/e.samprate,r+=21;var C=n[r+0]<<4;C+=n[r+1]>>4;var t0=(n[r+1]&15)<<8;return t0+=n[r+2]&255,(C<0||C>3e3)&&(C=-1),(t0<0||t0>3e3)&&(t0=-1),e.encDelay=C,e.encPadding=t0,e},this.InitVbrTag=function(n){var e=n.internal_flags,r;n.version==1?r=t:n.out_samplerate<16e3?r=Z:r=L,n.VBR==J.vbr_off&&(r=n.brate);var a=(n.version+1)*72e3*r/n.out_samplerate,i=e.sideinfo_len+V;if(e.VBR_seek_table.TotalFrameSize=a,a<i||a>N){n.bWriteVbrTag=!1;return}e.VBR_seek_table.nVbrNumFrames=0,e.VBR_seek_table.nBytesWritten=0,e.VBR_seek_table.sum=0,e.VBR_seek_table.seen=0,e.VBR_seek_table.want=1,e.VBR_seek_table.pos=0,e.VBR_seek_table.bag==null&&(e.VBR_seek_table.bag=new int[400],e.VBR_seek_table.size=400);var d=U(N);c(n,d);for(var M=e.VBR_seek_table.TotalFrameSize,T=0;T<M;++T)$.add_dummy_byte(n,d[T]&255,1)};function R(n,e){var r=e^n;return e=e>>8^z[r&255],e}this.updateMusicCRC=function(n,e,r,a){for(var i=0;i<a;++i)n[0]=R(e[r+i],n[0])};function q(n,e,r,a,i){var d=n.internal_flags,M=0,T=n.encoder_delay,E=n.encoder_padding,C=100-10*n.VBR_q-n.quality,t0=B.getLameVeryShortVersion(),n0,M0=0,b0,d0=[1,5,3,2,4,0,3],x0=0|(n.lowpassfreq/100+.5>255?255:n.lowpassfreq/100+.5),O0=0,Q0=0,s=0,v=n.internal_flags.noise_shaping,m0=0,S0=0,p0=0,L0=0,B0=0,E0=(n.exp_nspsytune&1)!=0,F0=(n.exp_nspsytune&2)!=0,y0=!1,h0=!1,k0=n.internal_flags.nogap_total,W0=n.internal_flags.nogap_current,q0=n.ATHtype,K0=0,D0;switch(n.VBR){case vbr_abr:D0=n.VBR_mean_bitrate_kbps;break;case vbr_off:D0=n.brate;break;default:D0=n.VBR_min_bitrate_kbps}switch(n.VBR.ordinal()<d0.length?n0=d0[n.VBR.ordinal()]:n0=0,b0=16*M0+n0,d.findReplayGain&&(d.RadioGain>510&&(d.RadioGain=510),d.RadioGain<-510&&(d.RadioGain=-510),Q0=8192,Q0|=3072,d.RadioGain>=0?Q0|=d.RadioGain:(Q0|=512,Q0|=-d.RadioGain)),d.findPeakSample&&(O0=Math.abs(0|d.PeakSample/32767*Math.pow(2,23)+.5)),k0!=-1&&(W0>0&&(h0=!0),W0<k0-1&&(y0=!0)),K0=q0+((E0?1:0)<<4)+((F0?1:0)<<5)+((y0?1:0)<<6)+((h0?1:0)<<7),C<0&&(C=0),n.mode){case MONO:m0=0;break;case STEREO:m0=1;break;case DUAL_CHANNEL:m0=2;break;case JOINT_STEREO:n.force_ms?m0=4:m0=3;break;case NOT_SET:default:m0=7;break}n.in_samplerate<=32e3?p0=0:n.in_samplerate==48e3?p0=2:n.in_samplerate>48e3?p0=3:p0=1,(n.short_blocks==k.short_block_forced||n.short_blocks==k.short_block_dispensed||n.lowpassfreq==-1&&n.highpassfreq==-1||n.scale_left<n.scale_right||n.scale_left>n.scale_right||n.disable_reservoir&&n.brate<320||n.noATH||n.ATHonly||q0==0||n.in_samplerate<=32e3)&&(S0=1),L0=v+(m0<<2)+(S0<<5)+(p0<<6),B0=d.nMusicCRC,w0(r,a+M,C),M+=4;for(var U0=0;U0<9;U0++)r[a+M+U0]=255&t0.charAt(U0);M+=9,r[a+M]=255&b0,M++,r[a+M]=255&x0,M++,w0(r,a+M,O0),M+=4,o0(r,a+M,Q0),M+=2,o0(r,a+M,s),M+=2,r[a+M]=255&K0,M++,D0>=255?r[a+M]=255:r[a+M]=255&D0,M++,r[a+M]=255&T>>4,r[a+M+1]=255&(T<<4)+(E>>8),r[a+M+2]=255&E,M+=3,r[a+M]=255&L0,M++,r[a+M++]=0,o0(r,a+M,n.preset),M+=2,w0(r,a+M,e),M+=4,o0(r,a+M,B0),M+=2;for(var j0=0;j0<M;j0++)i=R(r[a+j0],i);return o0(r,a+M,i),M+=2,M}function u(n){n.seek(0);var e=U(10);n.readFully(e);var r;return new String(e,"ISO-8859-1").startsWith("ID3")?r=0:r=((e[6]&127)<<21|(e[7]&127)<<14|(e[8]&127)<<7|e[9]&127)+e.length,r}this.getLameTagFrame=function(n,e){var r=n.internal_flags;if(!n.bWriteVbrTag||r.Class_ID!=Lame.LAME_ID||r.VBR_seek_table.pos<=0)return 0;if(e.length<r.VBR_seek_table.TotalFrameSize)return r.VBR_seek_table.TotalFrameSize;j.fill(e,0,r.VBR_seek_table.TotalFrameSize,0),c(n,e);var a=U(f);if(n.free_format)for(var i=1;i<f;++i)a[i]=255&255*i/100;else i0(r.VBR_seek_table,a);var d=r.sideinfo_len;n.error_protection&&(d-=2),n.VBR==J.vbr_off?(e[d++]=255&F.charAt(0),e[d++]=255&F.charAt(1),e[d++]=255&F.charAt(2),e[d++]=255&F.charAt(3)):(e[d++]=255&O.charAt(0),e[d++]=255&O.charAt(1),e[d++]=255&O.charAt(2),e[d++]=255&O.charAt(3)),w0(e,d,w+v0+I+g),d+=4,w0(e,d,r.VBR_seek_table.nVbrNumFrames),d+=4;var M=r.VBR_seek_table.nBytesWritten+r.VBR_seek_table.TotalFrameSize;w0(e,d,0|M),d+=4,A.arraycopy(a,0,e,d,a.length),d+=a.length,n.error_protection&&$.CRC_writeheader(r,e);for(var T=0,i=0;i<d;i++)T=R(e[i],T);return d+=q(n,M,e,d,T),r.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(n,e){var r=n.internal_flags;if(r.VBR_seek_table.pos<=0||(e.seek(e.length()),e.length()==0))return-1;var a=u(e);e.seek(a);var i=U(N),d=getLameTagFrame(n,i);return d>i.length?-1:(d<1||e.write(i,0,d),0)}}return me=W,me}var oa;function Fa(){if(oa)return T1;oa=1;var _=G0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n;var A=_.new_byte;_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n;var J=_.assert,k=se(),j=Ia(),U=Ue(),X=je(),W=Na(),Y=$e(),$=Ha(),B=S1(),w=ne();$0();var v0=Ca(),I=Oa();function g(){this.setModules=function(Z,H){}}function f(){this.setModules=function(Z,H,O){}}function N(){}function b(){this.setModules=function(Z,H){}}function V(Z,H,O){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),Z=1,H=44100,O=128);var F=new k,z=new g,u0=new U,i0=new w,o=new j,w0=new X,o0=new W,S=new I,l=new v0,c=new b,R=new $,q=new Y,u=new f,n=new N;F.setModules(u0,i0,o,w0,o0,S,l,c,n),i0.setModules(u0,n,l,S),c.setModules(i0,l),o.setModules(F),o0.setModules(i0,R,w0,q),w0.setModules(q,R,F.enc.psy),R.setModules(i0),q.setModules(w0),S.setModules(F,i0,l),z.setModules(u,n),u.setModules(l,c,o);var e=F.lame_init();e.num_channels=Z,e.in_samplerate=H,e.brate=O,e.mode=B.STEREO,e.quality=3,e.bWriteVbrTag=!1,e.disable_reservoir=!0,e.write_id3tag_automatic=!1;var r=F.lame_init_params(e);J(r==0);var a=1152,i=0|1.25*a+7200,d=A(i);this.encodeBuffer=function(M,T){Z==1&&(T=M),J(M.length==T.length),M.length>a&&(a=M.length,i=0|1.25*a+7200,d=A(i));var E=F.lame_encode_buffer(e,M,T,M.length,d,0,i);return new Int8Array(d.subarray(0,E))},this.flush=function(){var M=F.lame_encode_flush(e,d,0,i);return new Int8Array(d.subarray(0,M))}}function t(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function L(Z){return Z.charCodeAt(0)<<24|Z.charCodeAt(1)<<16|Z.charCodeAt(2)<<8|Z.charCodeAt(3)}return t.RIFF=L("RIFF"),t.WAVE=L("WAVE"),t.fmt_=L("fmt "),t.data=L("data"),t.readHeader=function(Z){var H=new t,O=Z.getUint32(0,!1);if(t.RIFF==O&&(Z.getUint32(4,!0),t.WAVE==Z.getUint32(8,!1)&&t.fmt_==Z.getUint32(12,!1))){var F=Z.getUint32(16,!0),z=20;switch(F){case 16:case 18:H.channels=Z.getUint16(z+2,!0),H.sampleRate=Z.getUint32(z+4,!0);break;default:throw"extended fmt chunk not implemented"}z+=F;for(var u0=t.data,i0=0;u0!=O&&(O=Z.getUint32(z,!1),i0=Z.getUint32(z+4,!0),u0!=O);)z+=i0+8;return H.dataLen=i0,H.dataOffset=z+8,H}},T1.Mp3Encoder=V,T1.WavHeader=t,T1}var va=Fa();const A1=1152,ka=192;class qa{header;samples;constructor(A){const J=A.length*A.numberOfChannels*2+44,k=new Xa(new DataView(new ArrayBuffer(J)));k.setUint32(1179011410),k.setUint32(J-8),k.setUint32(1163280727),k.setUint32(544501094),k.setUint32(16),k.setUint16(1),k.setUint16(A.numberOfChannels),k.setUint32(A.sampleRate),k.setUint32(A.sampleRate*2*A.numberOfChannels),k.setUint16(A.numberOfChannels*2),k.setUint16(16),k.setUint32(1635017060),k.setUint32(J-k.position-4);const j=A.channels;let U=0;for(;k.position<J;){for(let X=0;X<A.numberOfChannels;++X){let W=Math.max(-1,Math.min(1,j[X][U]));W=(.5+W<0?W*32768:W*32767)|0,k.setInt16(W)}++U}this.header=va.WavHeader.readHeader(k.dataView),this.samples=new Int16Array(k.dataView.buffer,this.header.dataOffset,this.header.dataLen/2)}}class Xa{dataView;position;constructor(A){this.dataView=A,this.position=0}setUint16(A){this.dataView.setUint16(this.position,A,!0),this.position+=2}setUint32(A){this.dataView.setUint32(this.position,A,!0),this.position+=4}setInt16(A){this.dataView.setInt16(this.position,A,!0),this.position+=2}}async function Ya(_){const A=new qa(_),J=A.header.channels,k=A.header.sampleRate,j=A.samples;let U,X=null;if(J===1)U=new Int16Array(j);else if(J===2){let I=[],g=[];for(let f=0;f<j.length;f+=2)I.push(j[f]),g.push(j[f+1]);U=new Int16Array(I),X=new Int16Array(g)}else throw new Error("Unsupport number of channels "+J);const W=[],Y=new va.Mp3Encoder(J,k,ka);let $=j.length;for(var B=0;$>=A1;B+=A1){const I=X===null?null:X.subarray(B,B+A1);var w=Y.encodeBuffer(U.subarray(B,B+A1),I);w.length>0&&W.push(new Int8Array(w)),$-=A1}const v0=Y.flush();return v0.length>0&&W.push(new Int8Array(v0)),W}function Ga(){onmessage=async _=>{postMessage({command:"finished",buffer:await Ya(_.data.audioBuffer)})}}Ga()})();
